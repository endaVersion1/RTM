Issue Type,Issue key,Issue id,Summary,Priority,Status,Updated,Sprint,Description,Custom field (Acceptance Criteria)
Story,MCR-678,23375,Tax a vehicle. Cancel Tax Disc - Validate Reason Codes,Lowest,QA Finished,07/07/2025 16:26,MTO Sprint 15,"*As* internal staff

*I need to* be able to validate the Reason Code used when cancelling a motor tax disc 

*So that* I can be sure the appropriate criteria have been met 

This user story will be called when the user selects the “Continue” button on the Cancel Tax screen. It is tightly coupled with [https://digitalhubjira.atlassian.net/browse/MCR-58|https://digitalhubjira.atlassian.net/browse/MCR-58|smart-link], which is the user story responsible for displaying the Cancel Tax screen. 

This user story will apply validation to the selected Cancel Reason Code selected by the user via the dropdown list box on the screen. The following validation that must be applied: 

* If the user has selected a reason code of “Vehicle Stolen” there must be an active ""VEHICLE STOLEN"" alert on the vehicle
** If no active Stolen alert exists, an error message “Cannot select this reason code - no active stolen alert exists for the vehicle” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.
* If the user has selected a reason code of “Vehicle Scrapped / Destroyed”, the vehicle status must be ""SCRAPPED VEHICLE DESTROYED""
** If the vehicle status is not ""SCRAPPED VEHICLE DESTROYED"", an error message “Cannot select this reason code - vehicle status is not ""SCRAPPED VEHICLE DESTROYED""” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.
* If the user has selected a reason code of “Vehicle ELV”, the vehicle status must be ""END-OF-LIFE VEHICLE""
** If the vehicle status is not ""END-OF-LIFE VEHICLE"", an error message “Cannot select this reason code - vehicle status is not ""END-OF-LIFE VEHICLE""” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.
** If the ELV / COD Issued Date on system is greater than or equal to the Cancellation Start Date, an error message “Cancellation Start Date cannot pre-date ELV Date for the vehicle” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.
* If the user has selected a reason code of “Vehicle Exported”, the vehicle status must be ""EXPORTED""
** If the vehicle status is not ""EXPORTED"", an error message “Cannot select this reason code - vehicle status is not ""EXPORTED""” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.
** If the Exported Date on system is greater than or equal to the Cancellation Start Date, an error message “Cancellation Start Date cannot pre-date vehicle export date” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.
* If the user has selected a reason code of “Vehicle Written Off by Insurer”, the vehicle status must be ""WRITTEN OFF BY INSURER""
** If the vehicle status is not ""WRITTEN OFF BY INSURER"", an error message “Cannot select this reason code - vehicle status is not ""WRITTEN OFF BY INSURER""” will be displayed at the top of the screen and the “Cancel Reason” field will be highlighted in red.","*Scenario 1: Validate Reason Code - Stolen*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with no alerts

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle Stolen” Cancel Reason code

*And* I provide the Cancellation Start Date 

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cannot select this reason code - no active stolen alert exists for the vehicle” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red



*Scenario 2: Validate Reason Code - Scrapped Status*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status that is not ""SCRAPPED VEHICLE DESTROYED""

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle Scrapped / Destroyed” Cancel Reason code

*And* I provide the Cancellation Start Date 

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cannot select this reason code - vehicle status is not ""SCRAPPED VEHICLE DESTROYED""” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red



*Scenario 3: Validate Reason Code - ELV Status*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status that is not ""END-OF-LIFE VEHICLE""

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle ELV” Cancel Reason code

*And* I provide the Cancellation Start Date 

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cannot select this reason code - vehicle status is not ""END-OF-LIFE VEHICLE""” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red



*Scenario 4: Validate Reason Code - Exported Status*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status that is not ""EXPORTED""

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle Exported” Cancel Reason code

*And* I provide the Cancellation Start Date 

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cannot select this reason code - vehicle status is not ""EXPORTED""” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red



*Scenario 5: Validate Reason Code - Written Off Status*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status that is not ""WRITTEN OFF BY INSURER""

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle Written Off by Insurer” Cancel Reason code

*And* I provide the Cancellation Start Date 

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cannot select this reason code - vehicle status is not ""WRITTEN OFF BY INSURER""” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red



*Scenario 6: Validate Reason Code - ELV Date*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ""END-OF-LIFE VEHICLE""

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle ELV” Cancel Reason code

*And* I provide the Cancellation Start Date that pre-dates the ELV Issued Date for the vehicle

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cancellation Start Date cannot pre-date ELV Date for the vehicle” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red



*Scenario 7: Validate Reason Code - Exported Date*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ""EXPORTED""

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I set the “Refund Due?” radio button

*And* I select the “Vehicle Exported” Cancel Reason code

*And* I provide the Cancellation Start Date that pre-dates the Exported Date on the system for the vehicle

*And* I confirm that the refund amount is calculated pro rata, based on the number of months remaining on the tax disc

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* an error message “Cancellation Start Date cannot pre-date vehicle export date” is displayed at the top of the screen 

*And* the Cancel Reason field is highlighted in red"
Story,MCR-117,19307,Create the advance vehicle search screen,Medium,QA Finished,07/03/2025 16:43,MTO Sprint 2,"*As* internal staff

*I need to* be able to search for a vehicle using a variety of different search criteria 

*So that* I can view the details of the associated vehicle

The Vehicle Registration Number is a unique identifier that allows us to identify a specific vehicle. If the Vehicle Registration Number is not available, the MTO client will need to use other details to search for the vehicle, e.g. Chassis number, Engine number, etc.

The most commonly user search fields are as follows: 

* Chassis Number 
* Owner name
* Engine Number

This user story will focus purely on _delivering the Advanced Vehicle Search screen_. None of the actual functionality to make the screen work will be delivered as a result of this user story; that will be delivered as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-3|https://digitalhubjira.atlassian.net/browse/MCR-3|smart-link] 

The screen design included below has been agreed with the MTO representatives during our MTO workshop on 11th Dec 2024. 

We will allow the user to search vehicle by:

* Chassis Number
* Engine
* Registration number
* MTO
* Owner Surname
* Owner Forename
* Country
* Town
* Make
* Model
* Colour
* Body Type
* Vehicle Status
* Tax class

The Vehicle Status field should default to “Current”, but the user can change this if required.

There will also be a ""Clear"" button to reset the search criteria if the MTO agent wishes to restart their search using different search criteria. 

The dropdown list boxes will be loaded as part of this user story (see [https://digitalhubjira.atlassian.net/browse/MCR-120|https://digitalhubjira.atlassian.net/browse/MCR-120|smart-link]). Placeholder text for the dropdown list boxes will be “Please Select”.

!image-20241216-111952.png|width=1149,height=1084,alt=""image-20241216-111952.png""!","*Scenario 1: Search for a vehicle*

*Given* I am logged in as an internal user

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*Then* I can search a vehicle by reg number, engine, owner surname, chassis, etc. as per the screen design "
Story,MCR-99,19222,Cashier portal front office,Medium,QA Finished,20/03/2025 11:50,MTO Sprint 1,"*As* internal staff

*I need to* be able to have a landing page

*So that* I can perform searches against different entities.

----

Only the Vehicle Menu search box will be developed as part of this story. The other boxes will be developed under different user stories for Search garage, Search Trailer, etc. 

This screen will show 4 boxes that will allow the user to search by vehicle reg number, garage code and trailer code and sundry transactions.

Searches will use full registration number and only if it matches with exact vehicle will show details for the vehicle, otherwise an error will be shown about vehicle/garage/trailer not found.

Note: The scope of this Story only involves vehicle search by registration number without style.

The following screen will be delivered as part of this user story: 

!image-20241129-170940.png|width=1170,height=1020,alt=""image-20241129-170940.png""!

We will deliver the “bare bones” screen displayed above as part of this user story. All of the other features on the agreed full screen design for the Front Office Menu will be delivered as part of additional user stories on the backlog.  ","*Scenario 1: Display Front Office screen*

*Given* I am logged in as a cashier

*When* I land on the front office menu

*Then* I am able to see the field where I can enter a Vehicle Registration Number"
Story,MCR-2,18319,Search for a vehicle using vehicle registration number,Medium,QA Finished,21/05/2025 15:38,MTO Sprint 1,"*As* internal staff

*I need to* be able to search for a vehicle using the Vehicle Registration Number

*So that* I can view the details of the associated vehicle

----

The Vehicle Registration Number is a unique identifier that allows us to identify a specific vehicle. The Vehicle Registration Number is made up of a combination of alpha numeric characters. Any white space characters that are keyed by the user will need to be stripped out of the Vehicle Registration Number before the code initiates a search on the database. 

When the user keys any non-alpha numeric characters (other than white space characters) in a Vehicle Registration Number, the system must alert the user that non-alpha numeric characters are not allowed in the Vehicle Registration Number field. 

*Mandatory fields:*

* Vehicle Registration No.

*Original screen*:

!image-20241007-112738.png|width=649,height=487,alt=""image-20241007-112738.png""!



Screens agreed with the MTO representatives: 

!image-20241128-153435.png|width=1460,height=1034,alt=""image-20241128-153435.png""!



!image-20241128-155032.png|width=1194,height=886,alt=""image-20241128-155032.png""!

Once the user has entered a valid Vehicle Registration Number, they can select the ""Search"" button to find the vehicle in question. If the vehicle exists in the database, the details of the vehicle are displayed on the screen. If the vehicle does not exist in the database, the system will pop up a message informing the user that the requested Vehicle Registration Number could not be found.  

This search will be an *EXACT match only*. If the exact registration number provided can be found, the vehicle details will be displayed. If the exact registration number provided cannot be found, an error message is displayed to the user. There will be no wildcard searches on this screen. Wildcard searches will only come into play on the Advanced Search screen. 

One validation that will need to be applied to the Vehicle Registration Number field is that the data provided must contain at least one number and at least one letter. ","*Scenario 1: Search for a vehicle*

*Given* I am logged in as a cashier

*When* I land on the front office menu

*And* I enter a _valid_ vehicle registration number 

*And* I click Search

*Then* I am redirected to the vehicle details screen ([https://digitalhubjira.atlassian.net/browse/MCR-11|https://digitalhubjira.atlassian.net/browse/MCR-11|smart-link])

*And* I can see all the details for that vehicle



*Scenario 2: Search for a vehicle. Validations. Not a valid Vehicle Registration Number*

*Given* I am logged in as a cashier

*When* I land on the front office menu

*And* I enter an _invalid_ vehicle registration number 

*And* I click Search

*Then* I see the following message on the screen : ‘Vehicle details not found’



*Scenario 3: Search for a vehicle. Validations. Mandatory field.* 

*Given* I am logged in as a cashier

*When* I land on the front office menu

*And* I do not enter a vehicle registration number 

*And* I click Search

*Then* I see the following message on the screen : ‘Vehicle Registration No. is a required field’



*Scenario 4: Search for a vehicle. Validations. Invalid characters.* 

*Given* I am logged in as a cashier

*When* I land on the front office menu

*And* I enter an _invalid_ vehicle registration number, including non-alpha numeric characters

*And* I click Search

*Then* I see the following message on the screen : ‘Only alpha numeric characters allowed for Vehicle Registration No.’



*Scenario 5: Search for a vehicle. Validations. Missing Number / Letter.* 

*Given* I am logged in as a cashier

*When* I land on the front office menu

*And* I enter a vehicle registration number that comprises of only letters _or_ only numbers

*And* I click Search

*Then* I see the following message on the screen : ‘Vehicle Registration No. must contain numbers and letters’"
Story,MCR-819,24192,Tax a vehicle. View Motor Tax - View Specific Motor Tax - Additional Validation,Medium,QA Finished,25/06/2025 15:04,MTO Sprint 14,"*As* an internal user

*I need to* be able to prevent changes to the tax class or the tax disc if the Status of the tax disc is not “Valid”

*So that* I can ensure that changes are controlled

*Background:*

User story [https://digitalhubjira.atlassian.net/browse/MCR-441|https://digitalhubjira.atlassian.net/browse/MCR-441|smart-link] had the following validation called out: 

* This screen will only display the “Change Tax Class” button if the tax disc selected by the user *has not already expired*. If the tax disc has not already expired, the “Change Tax Class” button will be visible. Otherwise, the “Change Tax Class” button will be dynamically hidden.
* This screen will only display the “Transfer” button if the following two conditions are met: 
** the vehicle is a vintage vehicle, i.e. if the year of vehicle registration is thirty years ago or more. 
** the tax disc selected by the user *has not already expired*.
** If both of these criteria are met, the “Transfer” button will be visible. Otherwise, the “Transfer” button will be dynamically hidden. 
* This screen will only display the “Cancel Tax” button if the tax disc selected by the user *has not already expired*. If the tax disc has not expired, the “Cancel Tax” button will be visible. Otherwise, the “Cancel Tax” button will be dynamically hidden.

In each of these three validations, it states that the buttons will only be displayed if the tax disc “*has not already expired*”. It would appear that this statement may have been ambiguous. During testing, it was found that the buttons on the Motor Tax Details screen were being displayed for tax discs with a status other than “Valid”. It looks like a simple check was implemented to see if the End Date of the tax disc is in the future. If it is in the future, the buttons are displayed, if it’s in the past, the buttons are hidden. 



*Requirement:*

As part of this user story, we need to ensure that the check to see if a tax disc “has not already expired” is expanded to also check the status of the tax disc. The check to confirm that the tax disc has not expired must be updated to include: 

* Status of the tax disc is “Valid”
* End date of the tax disc is in the future. ","*Scenario 1: View motor tax. All Buttons Hidden.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*Then* I use the “View” button to select a motor tax record where the status to the tax disc is not “Valid” but the End Date is in the future

*And* I see a new screen with the full motor tax details displayed

*And* the “Transfer” button is not visible

*And* the “Change Tax Class” button is not visible

*And* the “Cancel Tax” button is not visible

 "
Story,MCR-803,24068,Tax a Vehicle. Change Tax Class and Transfer Tax Class - Validate Vehicle Status and Vehicle Stolen Alert,Medium,QA Finished,24/06/2025 11:36,MTO Sprint 14,"*As* an internal user

*I need to* be able to see validate the status of a vehicle and check for a Stolen Alert

*So that* I can ensure that the Tax Class can be changed

This user story is related to [https://digitalhubjira.atlassian.net/browse/MCR-441|https://digitalhubjira.atlassian.net/browse/MCR-441|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-251|https://digitalhubjira.atlassian.net/browse/MCR-251|smart-link] 

!image-20250411-112206.png|width=783,height=561,alt=""image-20250411-112206.png""!

* We need to add some validation to the “Change Tax Class” button on the View Motor Tax screen. If the user selects the “Change Tax Class” button, and the Status of the vehicle is not “Current” or “Restricted Data Access Limited”, we need to prevent the user from changing the Tax Class. 
** To do this, we will pop up a modal with the message “Cannot Change Tax class for a vehicle unless the status is “Current” or “Restricted Data Access Limited””. The pop up modal will include a single “OK” button to acknowledge the message. When the user selects the “OK” button on the modal, they will remain on the Motor Tax Details screen. 
* We also need to check if there’s an active Stolen alert on the vehicle. If the user selects the “Change Tax Class” button and there is an active / live Stolen alert on the vehicle we need to prevent the user from changing the Tax Class. 
** To do this, we will pop up a modal with the message “Cannot Change Tax class for a vehicle with an active Stolen alert”. The pop up modal will include a single “OK” button to acknowledge the message. When the user selects the “OK” button on the modal, they will remain on the Motor Tax Details screen. 

* We need to add some validation to the “Transfer” button on the View Motor Tax screen. If the user selects the “Transfer” button, and the Status of the vehicle is not “Current” or “Restricted Data Access Limited”, we need to prevent the user from transferring the Tax Disc. 
** To do this, we will pop up a modal with the message “Cannot Transfer tax disc for a vehicle unless the status is “Current” or “Restricted Data Access Limited””. The pop up modal will include a single “OK” button to acknowledge the message. When the user selects the “OK” button on the modal, they will remain on the Motor Tax Details screen. 
* We also need to check if there’s an active Stolen alert on the vehicle. If the user selects the “Transfer” button and there is an active / live Stolen alert on the vehicle we need to prevent the user from transferring the Tax Disc. 
** To do this, we will pop up a modal with the message “Cannot transfer tax disc for a vehicle with an active Stolen alert”. The pop up modal will include a single “OK” button to acknowledge the message. When the user selects the “OK” button on the modal, they will remain on the Motor Tax Details screen. ","*Scenario 1: Change the tax class associated with a tax disc - allowed*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status “Current” or “Restricted Data Access Limited” and with no active Stolen alert

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle



*Scenario 2: Change the tax class associated with a tax disc - status - disallowed*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status other than “Current” or “Restricted Data Access Limited”

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see a pop up modal with an error message “Cannot Change tax class for a vehicle unless the status is “Current” or “Restricted Data Access Limited””

*And* I can click on the “OK” button to acknowledge the error message

Wireframe: 16/06/2025

!image-20250616-151649.png|width=1920,height=1511,alt=""image-20250616-151649.png""!



*Scenario 3: Change the tax class associated with a tax disc - Stolen Alert - disallowed*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status of “Current” but also with an active Stolen alert

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see a pop up modal with an error message “Cannot Change tax class for a vehicle with an active Stolen alert”

*And* I can click on the “OK” button to acknowledge the error message



*Scenario 4: Transfer tax disc - allowed*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status “Current” or “Restricted Data Access Limited” and with no active Stolen alert

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Transfer” button

*Then* I can see the screen to transfer the tax disc for a vehicle



*Scenario 5: Transfer tax disc - status - disallowed*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status other than “Current” or “Restricted Data Access Limited”

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Transfer” button

*Then* I can see a pop up modal with an error message “Cannot transfer tax disc for a vehicle unless the status is “Current” or “Restricted Data Access Limited””

*And* I can click on the “OK” button to acknowledge the error message



*Scenario 6: Transfer tax disc - Stolen Alert - disallowed*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status of “Current” but also with an active Stolen alert

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Transfer” button

*Then* I can see a pop up modal with an error message “Cannot transfer tax disc for a vehicle with an active Stolen alert”

*And* I can click on the “OK” button to acknowledge the error message"
Story,MCR-712,23815,Tax a Vehicle. Change tax class associated with a tax disc - More Change Start Date Validation,Medium,QA Finished,27/06/2025 09:25,MTO Sprint 14,"*As* internal staff

*I need to* be able to update the Tax Class associated with a vehicle’s tax disc

*So that* the Tax Class accurately represents the usage of the vehicle

*Background:*

This user story is closely coupled with [https://digitalhubjira.atlassian.net/browse/MCR-251|https://digitalhubjira.atlassian.net/browse/MCR-251|smart-link].

This was discussed during a call with Michael Bambrick and Enda Casey on 19 May 2025. 

We agreed that we’d include an additional restriction for the Change Start Date validation process. The additional rule must ensure that Change Start Date cannot be greater than the 1st day of the current month. 

The reason we shouldn’t allow the Change Start Date to be in the future is because the Tax Class is associated with the vehicle, not the tax disc itself. As a result, if we allow the Tax Class screen to accept a Change Start Date in the future, we may charge a surcharge from that date onwards, but the Tax Class is actually updated immediately.

If the Change Start Date is greater than the first day of the current month, the system will display a message at the top of the screen saying “Change Start Date cannot be greater than the first day of the current month” and the Change Start Date field will be highlighted in red.



!image-20250502-144729.png|width=554,height=709,alt=""image-20250502-144729.png""!","*Scenario 1: Change the tax class associated with a tax disc - Change Start Date validation*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class 

*And* I do not provide a Change Start Date

*And* I click on the “Continue” button

*And* a message is displayed at the top of the screen saying “Change Start Date is a mandatory field” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is earlier than the Start Date of the current tax disc

*Then* a message is displayed at the top of the screen saying “Change Start Date cannot be earlier than the Current Start Date” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is is later than the End Date of the current tax disc

*Then* a message is displayed at the top of the screen saying “Change Start Date cannot be greater than the first day of the current month” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is not the first day of a month

*Then* a message is displayed at the top of the screen saying “Change Start Date must be the first day of a month” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is greater than the first day of the current month

*Then* a message is displayed at the top of the screen saying “Change Start Date cannot be greater than the first day of the current month” 

*And* the Change Start Date field will be highlighted in red.


Wireframe 16/06/2025:

!image-20250616-150047.png|width=1920,height=2433,alt=""image-20250616-150047.png""!"
Story,MCR-646,22717,Tax a vehicle. Change tax class associated with a tax disc - Display process payment screen,Medium,QA Finished,27/06/2025 13:02,MTO Sprint 14,"*As* internal staff

*I need to* be able to process a payment for a tax class change 

*So that* the tax class change transaction can be completed

This user story will deal with delivering the _front end_ functionality for processing a payment. The payment screen will be displayed when the user selects the “Continue” button on the Change Tax Class screen. 

The payment to be processed will be provided to this screen from the Change Tax Class screen. 

The Transaction summary section of the screen will describe the transaction for which the payment is being taken. 

As part of taking payment, the MTO agent must be able to record one or more payment types and the associated payment amounts. The payment types can be cash, card, postal order, cheque. The user must select the appropriate payment type and enter the amount. If more than one payment type is used to settle the transaction, the user must click on the “Add Payment” button to capture additional payment types and amounts. 

If an additional payment is added by mistake, the user can select the “Remove” hyperlink alongside the payment to remove the payment from the transaction. 

The values entered in the Payment Amount field cannot be negative. 

* If the user enters a negative payment amount, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Payment Amount cannot be a negative value”.

In the Payment Summary section at the bottom of the screen, 

* The Method field will be displayed as a drop down list box with the values “Counter” or “Postal”. The default value when the screen is displayed will be “Counter”. When the Method is “Counter”, no supporting data is required. However, when the Method is “Postal”, we will also need to capture the Postal Receipt Date in the format DD/MM/YYYY.
** If the user selects a Method of “Postal”, the screen will dynamically update to display the required “Postal Receipt Date”. 
*** The Date Picker icon, which will allow the user to select a date using a date picking function, will be displayed to the right of the Postal Receipt Date to make it easier for the user to update the field
*** The postal Receipt Date must be validated to ensure that it is a well formed / valid date that is not in the future. 
** If the user selects a Method of “Postal”, and they do not provide a Postal Receipt Date, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Postal Receipt Date is a required field”.  
** If the user selects a Method of “Postal”, and they provide a Postal Receipt Date in the future, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Postal Receipt Date cannot be in the future”.  
** If the user selects a Method of “Postal”, and they provide an invalid Postal Receipt Date, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Invalid Postal Receipt Date”.  
** If the user selects a Method of “Postal”, and the screen dynamically updates to display the required “Postal Receipt Date”, and if the user then changes the Method back to “Counter”, the screen will dynamically update to hide the Postal Receipt Date.
* The Payment Total field will display the total payment due for the transaction. 
* The Payment Amount field will display the total value of payments already entered by the user. 
* The Payment Remaining field will display the outstanding balance required to settle the transaction. 

These payments must be recorded against the relevant licence renewal transaction. The payment details will be written to the database and will be available to form part of payment reports made available to the MTO agent and the MTO supervisor. 

When the payment details have been completed, and the user selects the “Process” button, the system will give the user the option to print a receipt. The printing of the receipt, etc. will be dealt with in the separate user story ([https://digitalhubjira.atlassian.net/browse/MCR-643|https://digitalhubjira.atlassian.net/browse/MCR-643|smart-link])

If the user selects the “Process” button and insufficient payment has been entered, the system will pop up an error message saying “Insufficient funds have been provided”. The user will have to click the “OK” button to acknowledge the error message. 

If the user selects the “Process” button and the payment amount entered by the user exceeds the payment required, the system will populate the “Change Due” field within the Payment Summary section of the screen with the difference between the “Payment Total” and the “Payment Amount”. The “Change Due” field is for information purposes only, to allow the user to determine what change they need to give the vehicle owner. The overpayment should not be recorded against the transaction, as the user will give the vehicle owner their change, based on the contents of the “Change Due” field. 

The “Change Due” field will be dynamically displayed - if there is no change due to the vehicle owner, the field will not be displayed. If there is change due to the vehicle owner, the field will be displayed. 

If the user selects the “Cancel Transaction” button, they will be returned to the View Motor Tax screen and all payment information will be discarded.

There is *no* limit to the number of payments that can be added to the transaction. In reality, the vast majority of transactions will be paid for using a single payment type. 

There will be *no* restriction to prevent a user from creating multiple payments of the same type, e.g. two “Card” payments. 

If the user adds two or more payments with the same type, e.g. €50.00 Cash and €75.00 cash, we will *not* need to roll the Cash payment figure up, e.g. resulting in one Cash payment of €125.00. 

If the user chooses to refresh the screen, all of the data on the screen will be retained. 

The Payment screen will look as follows: 

!image-20250428-114833.png|width=584,height=902,alt=""image-20250428-114833.png""!","*Scenario 1: Change tax class associated with a tax disc*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*Then* I can capture details of the payment type(s) provided

*And* I can provide the Method of payment details

*And* I can see the Transactions value and the Remainder value being automatically updated as each payment type is entered

*And* I can select the “Process” button to complete the payment transaction.



*Scenario 2: Process a payment. Validation. Negative payment.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*Then* I can capture details of the payment type(s) provided

*And* I ensure that I enter a negative payment amount

*And* I provide the Method of payment details

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up error message displayed on the screen: “Payment Amount cannot be a negative value”.

Wireframe: 16/06/2025

!image-20250616-151101.png|width=1920,height=2929,alt=""image-20250616-151101.png""!



*Scenario 3: Process a payment. Validation. Payment provided does not cover the cost of the transaction.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of payment details

*And* the total of the payments recorded does not cover the cost of the transaction

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Insufficient funds have been provided”. 



*Scenario 4: Process a payment. Validation. Payment provided exceeds the cost of the transaction.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of payment details

*And* the total of the payments recorded exceeds the cost of the transaction

*And* I can see that the “Change Due” field is populated with the difference between the “Payment Total” and the “Payment Amount” fields



*Scenario 5: Process a payment. Validation. Remove unwanted payment.*  

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I select the “Add Payment” button

*And* A second payment section is displayed to capture the additional payment type

*Then* I can select the “Remove” hyperlink to remove the second payment section. 



*Scenario 6: Process a payment. Validation. Postal Receipt Date.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of “Postal”

*And* I see the screen dynamically update to include a Postal Receipt Date field

*And* I do not provide a Postal Receipt Date

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Postal Receipt Date is a required field”

*And* I provide a Postal Receipt Date in the future

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Postal Receipt Date cannot be in the future”

*And* I provide an invalid Postal Receipt Date (e.g. MM = 13)

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Invalid Postal Receipt Date”

*And* I click on the “Today” button 

*Then* the Postal Receipt Date is updated to today’s date

*And* I click on the “Clear” button

*Then* the Postal Receipt Date field is cleared 

*And* I enter two digits in the DD field of the Postal Receipt Date

*Then* the cursor automatically jumps to the MM field

*And* I enter two digits in the MM field of the Postal Receipt Date

*Then* the cursor automatically jumps to the YYYY field

*And* I enter four digits in the YYYY field of the Postal Receipt Date

*And* I provide the Method of “Counter”

*Then* I see the screen dynamically update to remove the Postal Receipt Date field

*And* I select the “Process” button to complete the payment transaction"
Story,MCR-644,22715,"Tax a vehicle. Change tax class associated with a tax disc - display Transaction Complete screen - ""Finish"" pop up",Lowest,QA Finished,27/06/2025 14:31,MTO Sprint 14,"*As* internal staff

*I need to* be able to update the Tax Class associated with a vehicle’s tax disc

*So that* the Tax Class accurately represents the usage of the vehicle

This user story will be initiated when the user selects the “Print Receipt” button on the Tax Class Change Confirm screen, as delivered by user story [https://digitalhubjira.atlassian.net/browse/MCR-643|https://digitalhubjira.atlassian.net/browse/MCR-643|smart-link]  

This user story will be responsible for delivering the _front end_ changes required for the Tax Class Change Transaction Complete “Finish” pop up screen, as per the following wireframe: 

!image-20250428-135343.png|width=762,height=642,alt=""image-20250428-135343.png""!



The user can select the “Print Receipt” button to leave the tax class change transaction confirmation screen and print the receipt.

When the user selects the “Print Receipt” button, the system will pop up a message box informing the user that the receipt is available to print via a separate tab on the browser. The only button available on this pop up message box will be the “Finish” button. When this button is selected, the user will be returned to the Front Office screen.","*Scenario 1: Change tax class associated with a tax disc*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*And* all of the details displayed are correct

*And* I click on the “Process” button

*Then* the Tax Change Transaction Complete screen is displayed

*And* I can click the “Print Receipt” button to proceed to printing the receipt for the transaction"
Story,MCR-642,22713,Tax a vehicle. Change tax class associated with a tax disc - display Transaction Complete screen,Lowest,QA Finished,27/06/2025 13:02,MTO Sprint 14,"*As* internal staff

*I need to* be able to update the Tax Class associated with a vehicle’s tax disc

*So that* the Tax Class accurately represents the usage of the vehicle

This user story is closely coupled with [https://digitalhubjira.atlassian.net/browse/MCR-251|https://digitalhubjira.atlassian.net/browse/MCR-251|smart-link] 

This user story will be responsible for delivering the _front end_ changes required for the Change Tax Class Transaction Complete screen, as per the following wireframe: 

!image-20250428-104500.png|width=646,height=781,alt=""image-20250428-104500.png""!

The Change Tax Class Transaction Complete screen will display all of the relevant details for the changing of the tax disc, including the Current Tax Class, Taxing Period, Change Start Date, etc. 

The breadcrumbs will be implemented as part of this user story. 

The stepper will be provided as part of a separate user story. 

The user can click on the “Print Receipt” button to print the receipt for the Changing of the Tax Class. This will be delivered via a separate user story.","*Scenario 1: Change tax class associated with a tax disc*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*And* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount

*And* I click on “Continue” to confirm the Tax Class Change transaction

*And* I can see the Tax Class Change Payment screen

*And* all of the details displayed are correct

*And* I click on the “Process” button

*Then* the Tax Change Transaction Complete screen is displayed

*And* I can click the “Print Receipt” button to proceed to printing the receipt for the transaction"
Story,MCR-597,22252,"Tax a vehicle. Cancel Tax Disc - display Transaction Complete screen - ""Finish"" pop up",Lowest,QA Finished,27/06/2025 14:31,MTO Sprint 14,"*As* internal staff

*I need to* be able to cancel a motor tax disc and trigger a refund

*So that* the funds can be returned to the customer. 

This user story will be initiated when the user selects the “Print Receipt” button on the Cancel Tax Confirm screen, as delivered by user story [https://digitalhubjira.atlassian.net/browse/MCR-595|https://digitalhubjira.atlassian.net/browse/MCR-595|smart-link] 

This user story will be responsible for delivering the _front end_ changes required for the Cancel Tax Transaction Complete “Finish” pop up screen, as per the following wireframe: 

!image-20250416-111015.png|width=502,height=565,alt=""image-20250416-111015.png""!



The user can select the “Print Receipt” button to leave the cancel motor tax transaction confirmation screen and print the receipt.

When the user selects the “Print Receipt” button, the system will pop up a message box informing the user that the receipt is available to print via a separate tab on the browser. The only button available on this pop up message box will be the “Finish” button. When this button is selected, the user will be returned to the Front Office screen.","*Scenario 1: Cancel a motor tax disc*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I select the cancel reason code

*And* I provide the cancellation start date 

*And* I click on “Continue” to confirm the cancel motor tax transaction

*And* I can see the Cancel Tax confirmation screen

*And* all of the details displayed are correct

*And* I click on the “Process” button

*Then* the Cancel Tax Transaction Complete screen is displayed

*And* I can click the “Print Receipt” button to proceed to printing the receipt for the transaction"
Story,MCR-595,22250,Tax a vehicle. Cancel Tax Disc - Display Transaction Complete Screen,Lowest,QA Finished,27/06/2025 13:02,MTO Sprint 14,"*As* internal staff

*I need to* be able to cancel a motor tax disc and trigger a refund

*So that* the funds can be returned to the customer. 

This user story will be initiated when the user selects the “Confirm” button on the Cancel Tax screen confirmation modal, as delivered by user story [https://digitalhubjira.atlassian.net/browse/MCR-593|https://digitalhubjira.atlassian.net/browse/MCR-593|smart-link]. 

This user story will be responsible for delivering the _front end_ changes required for the Cancel Tax Transaction Complete screen, as per the following wireframe: 

!image-20250618-093538.png|width=451,height=497,alt=""image-20250618-093538.png""!



The Cancel Tax Transaction Complete screen will display all of the relevant details for the cancellation of the tax disc, including the Current Tax Class, Current Motor Tax Dates, Current Motor Tax Number, Cancellation Start Date and Cancel Reason, etc. 

* If “Refund Due?” has been selected as “Yes”, the following fields will be dynamically displayed, otherwise they will be dynamically hidden:
** “Number of Months Refunded” will be calculated by subtracting the “Cancellation Start Date” from the Motor Tax “End Date”.
** “Monthly Rate” will be calculated by dividing the Motor Tax Amount by the number of months on the the tax disc.
** “Refund Type” will be “Full” if the the full tax disc is being refunded; otherwise, it will be “Partial”. 
** “Refund Amount” will be calculated by multiplying the “Number of Months Refunded” by the “Monthly Rate”. 

The breadcrumbs will be implemented as part of this user story. 

The stepper will be provided as part of a separate user story. 

The user can click on the “Print Receipt” button to print the receipt for the tax disc cancellation. This will be delivered as part of a separate user story.","*Scenario 1: Cancel a motor tax disc*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I select the cancel reason code

*And* I provide the cancellation start date 

*And* I click on “Continue” to confirm the cancel motor tax transaction

*And* I can see the Cancel Tax confirmation screen

*And* all of the details displayed are correct

*And* I click on the “Process” button

*Then* the Cancel Tax Transaction Complete screen is displayed

*And* I can click the “Print Receipt” button to proceed to printing the receipt for the transaction"
Story,MCR-829,24305,mto client be: update service api mappers to map 1970 dates as null ,Medium,QA Finished,13/06/2025 16:13,MTO Sprint 13,ingres saves null dates as 1970-01-01 00:00:00.000 we need to treat these dates as null in our back end application. review all service api response and make the appropriate changes to the relevant mappers/parsers,
Story,MCR-593,22248,Tax a vehicle. Cancel Tax Disc - Confirm,Lowest,QA Finished,12/06/2025 17:10,MTO Sprint 13,"*As* internal staff

*I need to* be able to cancel a motor tax disc and trigger a refund

*So that* the funds can be returned to the customer. 

This user story will be initiated when the user selects the “Continue” button on the Cancel Tax screen, as delivered by user story [https://digitalhubjira.atlassian.net/browse/MCR-58|https://digitalhubjira.atlassian.net/browse/MCR-58|smart-link]. 

Initially, we were going to display a separate screen to confirm if the user wanted to cancel the motor tax record. We have changed our approach here to pop up a modal instead.  

This user story will be responsible for delivering the _front end_ changes required to pop up a modal to confirm that the motor tax record is to be cancelled, as follows:

!image-20250609-134044.png|width=2880,height=2136,alt=""image-20250609-134044.png""!

The user can click on the “Cancel Transaction” button to get rid of the modal without cancelling the motor tax record. The user will remain on the Cancel Tax screen. 

The user can click on the “Confirm” button to terminate the motor tax record, save the details to the database, and move on to the “Transaction Complete” screen.

The saving of the details to the database will be carried out as part of a separate user story. ","*Scenario 1: Cancel a motor tax disc*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I select the current valid tax disc with more than three months remaining 

*And* I see the full details of the motor tax disc

*And* I click on the “Cancel Tax” button

*And* I am redirected to the “Cancel Tax” screen

*And* I select the “Refund Due?” radio button

*And* I select the Cancel Reason code

*And* I provide the cancellation start date 

*And* I click on “Continue” to confirm the cancel motor tax transaction

*Then* I can see the Cancel Tax confirmation modal pop up on the screen

*And* I can select “Back” to get rid of the modal

*OR* I can click the “Confirm” button to confirm the cancelling of the motor tax record"
Story,MCR-268,20135,Declare a vehicle as off the road (SORD) - Save details to the database - Happy Path,Medium,QA Finished,11/06/2025 12:22,MTO Sprint 13,"*As* internal staff

*I need to* be able to save the details of the SORD transaction to the database

*So that* the transaction can be referenced in the future.  

This user story will provide the _back end_ functionality required to save the details of a SORD to the database. This user story will connect the technical user stories to expose the “save” endpoint ([https://digitalhubjira.atlassian.net/browse/MCR-479|https://digitalhubjira.atlassian.net/browse/MCR-479|smart-link], [https://digitalhubjira.atlassian.net/browse/MCR-482|https://digitalhubjira.atlassian.net/browse/MCR-482|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-483|https://digitalhubjira.atlassian.net/browse/MCR-483|smart-link]) with the call from the application itself. 

Full details of the SORD transaction will need to be saved to the database, including any of the relevant information from the following list: 

* Transaction Number
* Date and time of transaction
* Motor Tax Office (default to “999” for now, until we know the actual value)
* Vehicle Registration Number
* Transaction Type (e.g. SORD)
* Tax Class
* Start and End Date of SORD
* MTO user ID

Writing to the StockFin database will be carried out as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-476|https://digitalhubjira.atlassian.net/browse/MCR-476|smart-link].

The details must be written to the database when the user selects the “Confirm” button at the bottom of the Declare Off Road screen. 

!image-20250319-115528.png|width=926,height=593,alt=""image-20250319-115528.png""!

We have already created and exposed a new endpoint to save declare off road information via user story [https://digitalhubjira.atlassian.net/browse/MCR-482|https://digitalhubjira.atlassian.net/browse/MCR-482|smart-link] 

Once declare off road is saved we will need to update the vehicle expiry date with the end date of sord under this new endpoint [https://digitalhubjira.atlassian.net/browse/MCR-483|https://digitalhubjira.atlassian.net/browse/MCR-483|smart-link] 

Since transactions are not managed yet we will call these 2 endpoints one after the other and we will only apply revert logic if we receive an error when calling one of the endpoints. This user story will only deal with the “happy path” whereby the save to the database is successful. The failure scenario will be dealt with separately via user story [https://digitalhubjira.atlassian.net/browse/MCR-766|https://digitalhubjira.atlassian.net/browse/MCR-766|smart-link].

DOMAIN LOGIC:

* Call save method in SORD that will validate logic needed to be able to save SORD and validate that data about to be inserted is correct and call services API (vehicle-writes) to insert SORD (new endpoint)
* Call save method in vehicle (nothing has been done in Vehicle domain yet regarding mandatory fields that need to be there to create Vehicle domain so we will use what we have so far…) and call services API (vehicle-writes) to update vehicle (new endpoint)","*Scenario 1: Save a SORD to the database.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I have processed a SORD transaction  

*And* I confirm the transaction

*Then* the details of the SORD transaction are written to the database. "
Story,MCR-699,23635,Tax a Vehicle. Transfer motor tax - add current tax disc details to screen,Medium,QA Finished,19/06/2025 16:12,MTO Sprint 12,"*As* internal staff

*I need to* be able to transfer motor tax details from one vehicle registration number to a different vehicle registration number

*So that* a vehicle re-registration can be processed without any issues

This user story is very closely coupled with [https://digitalhubjira.atlassian.net/browse/MCR-416|https://digitalhubjira.atlassian.net/browse/MCR-416|smart-link].

When we were delivering the transfer tax screen we realised that we should also include the following two fields:

* Current Tax Class 
* Current Motor Tax Dates

This user story will deliver the front end changes required to include these two fields on the Transfer Tax screen. 

!image-20250519-084011.png|width=2880,height=2924,alt=""image-20250519-084011.png""!","*Scenario 1: Transfer motor tax.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*Then* the “Transfer Motor Tax” screen is displayed

*And* the fields “Current Tax Class” and “Current Motor Tax Dates” correctly displayed on the screen. "
Story,MCR-634,22619,Tax a Vehicle. Change tax class associated with a tax disc - Calculate Surcharge,Medium,QA Finished,19/06/2025 16:17,MTO Sprint 12,"*As* internal staff

*I need to* calculate the Surcharge Amount when the Tax Class is changed during the current motor tax period

*So that* the correct Surcharge Amount is charged based on the new Tax Class

This user story will deliver the calculation required to determine the Surcharge Amount due as a result of a Tax Class change for an existing tax disc.

The user story will accept the current Tax Class, the new Tax Class, the timeframe of the original tax disc (i.e. 3, 6 or 12 months), and the number of months that the surcharge is to be applied.

The system will calculate the Surcharge Amount based on the difference between the original fee paid and the rate of motor tax due for the new Tax Class from the start of the month in which the Tax Class change took place.

If the calculated Surcharge Amount is less than or equal to €0.00, there will be no charge applied for the Tax Class change. There will also be no refund given to the vehicle owner.

The following steps will ensure that the Surcharge Amount is calculated accurately and fairly when changing the Tax Class of a vehicle. 

*Surcharge Calculation Steps*

# Determine the Cost per Month for the Current Tax Class:
#* Take the total cost of the current tax disc.
#* Divide this total cost by the total number of months covered by the disc to get the cost per month for the current tax class.
# Determine the Cost per Month for the New Tax Class:
#* Calculate the cost per month for the tax disc associated with the new tax class based on the same number of months as the original tax disc.
# Calculate the Monthly Surcharge Amount:
#* Subtract the original cost per month (current tax class) from the new cost per month (new tax class) to get the Monthly Surcharge Amount.
#** The Monthly Surcharge Amount may be €0.00 or more. 
#** The Monthly Surcharge Amount should not be negative
#*** If the Monthly Surcharge Amount calculation results in a negative value, we set the Monthly Surcharge Amount to €0.00
#** The Monthly Surcharge Amount may include euro and cents, e.g. €23.65
# Calculate the Total Surcharge Amount:
#* Multiply the Monthly Surcharge Amount by the number of months remaining on the tax disc from the date that the Tax Class change applies to get the Total Surcharge Amount.
#** The Total Surcharge Amount will be a value in euro. 
#** The Total Surcharge Amount may be zero, if the Monthly Surcharge Amount is zero. 
#** The Total Surcharge Amount will be rounded down to an even euro amount, e.g. €140.64 will be rounded down to €140.00.

*Example Calculation*

* Current Tax Class:
** Total cost of the current tax disc: €333.00
** Number of months covered by the disc: 12 months
** Cost per month for the current tax class: €333.00 / 12 = €27.75
* New Tax Class:
** Total cost of the new tax disc: €544.00
** Number of months covered by the disc: 12 months
** Cost per month for the new tax class: €544.00 / 12 = €45.33
* Monthly Surcharge Amount:
** Monthly Surcharge Amount: €45.33 - €27.75 = €17.58
* Number of Months Remaining:
** Let's assume the Tax Class change applies for 8 months.
* Total Surcharge Amount:
** Total Surcharge Amount: €17.58 * 8 = €140.64; rounded down to €140.00.

* Handling Negative Surcharge Amount:
** If the value of the Surcharge Amount is negative (i.e., the new tax rate is lower than the old rate), there is no surcharge levied and there is no refund due.



Additional examples provided by Stephen O’Hare from the Meath MTO:

*Example 1*

M1 vehicle
Customer A taxes the vehicle as a taxi on the 02/01/2025 and pays €95.00. Period of Disc is January to December 2025
Customer A sells the Vehicle to Customer B on the 29/01/2025.
Customer B presents to change the tax class to private on the 01/03/2025 (Customer B has no spsv licence)
The Private rate is €170 per annum.
€170 minus €95 = €75.00 (Sundry Receipt)
Tax class changed to private and VRC issued
Currently FIL Tax disc issued but that will not occur when we move to electronic discs

*Example 2*

N1 vehicle
Customer A taxes N1 vehicle at own goods rate, €333.00 on 02/01/2025 for the period January to December 2025
Customer A sells vehicle to Customer B on the 01/05/2025
Customer B presents on the 01/12/2025 to tax the vehicle at the private rate from January to December 2026 (is not entitled to goods rate)
The private rate is €544 per annum
+_2025 portion_+
€544 minus €333 = €211.00
€211 divided by 12 and multiply by 8 = €140 (Charged €140 for the 8 months it was used privately in 2025) €140 by way of sundry receipt
+_2026 portion_+
€544 (for 2026) and the €544 is processed in the normal manner
Tax class changed to private and VRC issued
Currently FIL Tax disc issued for disc (Jan – Dec 2025) but that will not occur when we move to electronic discs
New disc issues for period January – December 2026

*Example 3*

N1 vehicle
Customer A taxes N1 vehicle at own goods rate, €333.00 on 02/01/2025 for the period January to December 2025
Customer A sells vehicle to Customer B on the 01/05/2025
Customer B presents on the 01/03/2026 to tax the vehicle at the private rate ( is not entitled to goods rate) for 1 year
The private rate is €544 per annum
+_2025 portion_+
€544 minus €333 = €211
€211 divided by 12 and multiply by 8 (8 months used at private rate) = €140.00 via sundry receipt
+_2026 portion_+
Jan – Feb’26 arrears at private rate – charged at €54.40 per month (€108 for 2 months)
Tax vehicle at private rate from March 2026 – Feb 2027 - €544.00
€108 plus €544 = €652 charged in normal manner
Tax class changed to private and VRC issued","*Scenario 1: Change the tax class associated with a tax disc - increase*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Total Surcharge Amount values are correct.



*Scenario 2: Change the tax class associated with a tax disc - decrease*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs less than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Total Surcharge Amount values are both €0.00."
Story,MCR-609,22478,Tax a vehicle. Display Correct Rate for Exempt Vehicles,Medium,QA Finished,05/06/2025 08:01,MTO Sprint 12,"*As* internal staff

*I need to* be able to validate that the correct tax rates are displayed for Exempt vehicles

*So that* the appropriate rate is charged

For vehicles that are exempt from paying road tax, there are a number of different Tax Classes. For example:

* Exempt State Owned
* Exempt Emergency Services
* Exempt Diplomatic
* Exempt Special Service
* Emergency Rescue Vehicle

If a vehicle has one of these exempt Tax Classes, the tax rate is €0.00 and the vehicle is taxed annually. 

We need to ensure that the Process motor Tax screen is showing the correct Tax Rate (€0.00) and that Annual is the only taxing period available. 

This was called out on 14/04/2025 when Silvia was reviewing the legacy system functionality. 

Tax Classes in the 700 range are seen as exempt vehicles. 

These changes will need to be applied for the change of Tax Class as part of taxing the vehicle, and for the Tax Class selected as part of adding an Arrear. ","*Scenario 1: Display Correct Rate for Exempt Vehicles*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number for a vehicle that is less than 30 years old

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*And* I select a new Tax Class of “Exempt Special Service”

*Then* I see that “Annual” is the only taxing period available to select

*And* the associated tax rate is correctly showing as €0.00"
Story,MCR-509,21431,Tax a vehicle. Gaps and Arrears. Add Tax Class for Arrears,Medium,QA Finished,23/05/2025 15:11,MTO Sprint 12,"*As* internal staff

*I need to* be able to capture the Tax Class associated with an arrear 

*So that* the arrear can be charged according to a specific Tax Class 

This user story is closely coupled with [https://digitalhubjira.atlassian.net/browse/MCR-411|https://digitalhubjira.atlassian.net/browse/MCR-411|smart-link]. 

Following discussions with the business (Enda Casey and Michael Bambrick) on 24 Mar 2025, we identified a requirement to capture Tax Class for every arrear. This is to satisfy the scenario where an untaxed period needs to be accounted for using two different arrears with two different Tax Classes. For example, a six month unpaid tax period may be accounted for using a three month arrear with a “Private” Tax Class and a three month arrear with a “Goods” Tax Class. The costs associated with each of these three month arrears will be different as a result of the Tax Class used when adding the Arrear. 

Currently, when adding a Gap, we capture a Gap Reason Code. In the future, we will capture a Tax Class in the same manner when capturing an Arrear. 

This user story will deliver the _front end_ and _back end_ changes required to implement the capturing of Tax Class for each Arrear. 

When auto-generating an arrear as part of loading the Process Motor Tax screen, the Tax Class associated with the arrear will default to the Tax Class associated with the vehicle.

The Process Motor Tax screen will need to be changed to capture a Tax Class per Arrear. When the user selects the Arrear radio button, a Tax Class drop down list box will become available. This drop down list box will only contain the list of Tax Classes relevant for the Body Type of the vehicle in question. The drop down list box will default to the Tax Class currently associated with the vehicle. If necessary, the user will be able to change the Tax Class associated with the Arrear by selecting an alternative Tax Class from the drop down list box. 

The fee associated with the Arrear will be based on the number of months covered by the Arrear and the monthly Arrears fee associated with the selected Tax Class. 

It will be possible to have zero, one or more different Arrears / Tax Class combinations associated with an untaxed period. 

Once the Arrear has been confirmed, the Untaxed Period table will be updated to include the Tax Class associated with the Arrear. 

The new wireframe for the screen is as follows: 

!image-20250326-104004.png|width=442,height=847,alt=""image-20250326-104004.png""!

The “stepper” that is included in the above wireframe will be delivered as part of a separate user story. 

If the user selects “Gap”, the data in the action section displayed will change slightly, i.e. the “Arrears Cost” and the Tax Class dropdown list box will both disappear and the Gap reason code dropdown list box is displayed: 

!image-20250304-123529.png|width=612,height=1035,alt=""image-20250304-123529.png""!

Hitting the “Confirm Action” button will add the arrear to the Untaxed Period table. 

Hitting the “Cancel Action” button will cancel the add action and dynamically update the screen to remove the highlighted section of the screen. 

When this screen is being loaded, if any arrears are being auto-generated, the Tax Class will default to the Tax Class associated with the vehicle.

It will not be possible to create an arrear without selecting a Tax Class. ","*Scenario 1: Tax Class for Arrears. Auto-generated.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*And* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see an arrear has been auto-generated

*Then* I can see that the arrear has a Tax Class that matches the Tax Class associated with the vehicle

*And* I can see that the start dates and the end dates of the arrear are correct

*And* I can see that the arrears fee is populated correctly, as per the Tax Class

*And* I can see that the full untaxed period has been accounted for 

  

*Scenario 2: Tax Class for Arrears.* *Adding a new Arrear*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*And* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see an arrear has been auto-generated

*And* I can remove the Arrear using the “Remove” button / hyperlink

*And* I can select the “Add Action” button to add a new Arrear.

*Then* I can see that the arrear has a Tax Class drop down list box available

*And* the Tax Class drop down list box has defaulted to match the Tax Class associated with the vehicle

*And* I can select the drop down list box to see a list of the Tax Classes available, as dictated by the Body type of the vehicle 

*And* I can select the required Tax Class from the drop down list box

*And* I can see that the start dates and the end dates of the arrear are correct

*And* I can see that the arrears fee is populated correctly, as per the Tax Class

*And* I can see that the full untaxed period has been accounted for 

*And* I can select the “Confirm Action” button to add the arrear to the Untaxed Period table on the screen

*And* I can see that all of the details associated with the Arrear in the Untaxed Period table are correct."
Story,MCR-454,20986,"Tax a vehicle. Transfer motor tax - confirm motor tax transfer transaction - ""Finish"" pop up",Medium,QA Finished,30/06/2025 17:48,MTO Sprint 12,"*As* internal staff

*I need to* be able to finish the motor tax transfer transaction 

*So that* I can return to the Front Office screen  

This user story will focus on delivering the _front end_ screen for the modal that pops up when the user asks to print the receipt at the end of a motor tax transfer transaction. [https://digitalhubjira.atlassian.net/browse/MCR-452|https://digitalhubjira.atlassian.net/browse/MCR-452|smart-link]  is very closely coupled with this user story. 

The user can select the “Print Receipt” button to leave the motor tax transfer transaction confirmation screen and print the receipt. 

When the user selects the “Print Receipt” button, the system will pop up a message box informing the user that the receipt is available to print via a separate tab on the browser. The only button available on this pop up message box will be the “Finish” button. When this button is selected, the user will be returned to the Front Office screen. 

!image-20250519-085208.png|width=870,height=964,alt=""image-20250519-085208.png""!","*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*And* I enter a new vehicle registration number

*And* I click on the “Search” button

*And* the chassis numbers of the original vehicle and the new vehicle are displayed

*And* the chassis numbers match

*And* I can select the “Confirm” button to transfer the motor tax to the new vehicle registration number

*And* the motor tax is transferred to the new vehicle registration number 

*And* the confirmation screen is displayed

*And* I click on the Print Receipt button

*And* a new tab opens up in the browser, displaying the receipt that is top be printed in PDF format

*And* a pop up message box tells the user they can print the receipt on the separate tab

*And* the user can click on the “Finish” button to complete the transaction and return to the Front Office screen."
Story,MCR-452,20984,Tax a Vehicle. Transfer motor tax - confirmation screen,Medium,QA Finished,30/06/2025 17:18,MTO Sprint 12,"*As* internal staff

*I need to* be able to transfer motor tax details from one vehicle registration number to a different vehicle registration number

*So that* a vehicle re-registration can be processed without any issues

This user story will deliver the _front end_ changes required to confirm that the motor tax has been transferred to the new vehicle registration number.  

All of the functionality delivered in user story [https://digitalhubjira.atlassian.net/browse/MCR-416|https://digitalhubjira.atlassian.net/browse/MCR-416|smart-link] will have captured the new Vehicle Registration number and confirmed that the chassis numbers match. The functionality delivered in user story [https://digitalhubjira.atlassian.net/browse/MCR-451|https://digitalhubjira.atlassian.net/browse/MCR-451|smart-link] will have written the changes to the database, ensuring that the motor tax is transferred to the new Vehicle Registration Number and setting the status of the original vehicle registration number to “ELV”. 



This user story will deliver the front end changes required to display a new screen to confirm that the motor tax disc is now associated with the new vehicle registration number. The confirmation screen will be as per the following wireframe: 

!image-20250519-085024.png|width=2880,height=2792,alt=""image-20250519-085024.png""!



When the user selects the “Print Receipt” button, the motor tax transfer transaction receipt will be printed. The print functionality will be delivered as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-453|https://digitalhubjira.atlassian.net/browse/MCR-453|smart-link]. ","*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*And* I enter a new vehicle registration number

*And* I click on the “Search” button

*And* the chassis numbers of the original vehicle and the new vehicle are displayed

*And* the chassis numbers match

*And* I can select the “Confirm” button to transfer the motor tax to the new vehicle registration number

*And* the motor tax is transferred to the new vehicle registration number 

*And* the confirmation screen is displayed

*And* all of the relevant details are correctly displayed on the screen. "
Story,MCR-416,20764,Tax a Vehicle. Transfer motor tax - display screen to capture new vehicle registration,Medium,QA Finished,19/06/2025 16:10,MTO Sprint 12,"*As* internal staff

*I need to* be able to transfer motor tax details from one vehicle registration number to a different vehicle registration number

*So that* a vehicle re-registration can be processed without any issues

*Background:* 

* If a vehicle is re-registered, e.g. a vintage vehicle being assigned a “ZV” number plate, we need to do something to ensure that the new vehicle registration is taxed. 
* Bear in mind here that we’re actually talking about the exact same vehicle, it’s just the vehicle registration number that is changing. 
* The re-registered details, including the new vehicle registration number, comes across in the Revenue file. 
* The new vehicle registration number comes across from Revenue with the original date of vehicle registration associated with it, as it’s the same vehicle as the original. 

*Current Process:* 

* The current system requires the same vehicle to be taxed again under the new vehicle registration number. 
** This is not a smooth experience for the vehicle owner. 
** In order to generate the tax disc that the owner is entitled to for the new vehicle registration (as it has already been paid for in the original transaction) the MTO uses a postal batch back to the start date of the original vehicle registration’s tax disc. 
** They issue a new disc that covers the exact same tax period. 
** No money changes hand and it is recorded as a different day cancellation for audit purposes. 
* The current ways of working also mark the original vehicle as ‘End of Life’ as we do not want to have two of the same vehicles with a status of “Current” on the NVDF database. 
** We have been looking at a new vehicle status ‘Re-Registered’.
** At the moment they cannot have two newly registered vehicles with the same chassis number on the system.

*Where does this functionality fit:* 

There is a requirement for the new system to transfer motor tax details between the old vehicle registration and the new vehicle registration to make the process more streamlined.

When we discussed this with the MTOs, they agreed that it would be smoother if we implemented a function in the new system that would enable the transfer of motor tax details from one vehicle registration number to another, as long as we were sure that it was the same vehicle. See attached for the process map associated with this transfer of motor tax. 

We agreed that this functionality would be accessed from the screen that displays the motor tax details for the original vehicle registration. The user would first search for the original vehicle registration number, select the vehicle and go to the screen displaying the vehicle motor tax history, as delivered by [https://digitalhubjira.atlassian.net/browse/MCR-47|https://digitalhubjira.atlassian.net/browse/MCR-47|smart-link]. 

The user would then click on the “View” button associated with the most recent motor tax entry on the screen. This would open a new window displaying the detail of the selected motor tax transaction, as delivered by [https://digitalhubjira.atlassian.net/browse/MCR-441|https://digitalhubjira.atlassian.net/browse/MCR-441|smart-link].

From this View Motor Tax screen, as long as the following two conditions are met, the “Transfer” button will be available to the user: 

* the vehicle is a vintage vehicle, i.e. the year of vehicle registration is thirty years ago or more
* the tax disc selected by the user has not already expired

Both of these validations are being delivered as part of [https://digitalhubjira.atlassian.net/browse/MCR-441|https://digitalhubjira.atlassian.net/browse/MCR-441|smart-link].

*This user story:*

If all is in order, the user will be able to click on the “Transfer” button on the View Motor Tax screen to begin the transfer of the motor tax disc to the new vehicle registration number. 

This user story will deliver the _front end_ changes required to identify the new vehicle registration number.  

We will display a new screen (see wireframe included below) and request that the user provides the new vehicle registration number. 

During refinement, we discussed the opportunity for the user to jump to this screen by manually entering the URL in the browser. Given that this is a possible approach that could be used, we’ll need to apply the entry validation again as part of loading the screen. The user is allowed to access this screen as long as the following two conditions are met: 

* the vehicle is a vintage vehicle, i.e. the year of vehicle registration is thirty years ago or more
* the tax disc selected by the user has not already expired

If these two criteria are not satisfied, we will not allow the user to access the Transfer Tax screen and we will re-direct them to the Vehicle Primary Details screen. 

Once the Transfer Tax screen is accessed and the user enters the new vehicle registration number and clicks on the “Search” button, the system will retrieve the details associated with the new vehicle registration number from the database. 

If the user does not enter a vehicle registration number and then hits the “Search” button, the system will display an error message at the top of the screen “Vehicle Registration Number is a mandatory field” and the Vehicle Registration Number field will be highlighted in red.

If the user enters a vehicle registration number and hits the “Search” button, but the Vehicle Registration Number cannot be found, an error message will be displayed at the top of the screen “Vehicle Registration Number not found” and the Vehicle Registration Number field will be highlighted in red. 

If the user enters a vehicle registration number and hits the “Search” button, and the Vehicle Registration Number is found in the database, the system will display the Chassis Number associated with the original Vehicle Registration Number and the Chassis Number associated with the new Vehicle Registration Number on the screen for the user to see. 

If the user selects the “Confirm” button before they search for a new vehicle registration number, the system will display an error message at the top of the screen “Please search for the new Vehicle Registration Number before confirming” and the Vehicle Registration Number field will be highlighted in red.

!image-20250328-110446.png|width=800,height=611,alt=""image-20250328-110446.png""!

The user can then visually compare the chassis numbers to ensure that they are the same, thereby confirming that both vehicle registration numbers are actually associated with the same vehicle. 

If the chassis numbers do not match, we will not allow the motor tax transfer as we are not allowed to transfer tax between two different vehicles. If the user selects the “Confirm” button when the chassis numbers don’t match, a pop up error message will be displayed saying “Cannot transfer motor tax as the chassis numbers do not match”. The user will be able to select the “OK” button on the pop up error message to acknowledge it. 

If the chassis numbers do not match, the user will be able to re-enter a vehicle registration number and try again, or they can click on the “Cancel” button to return to the previous screen.

If the chassis numbers match when the user clicks the “Confirm” button, they will be able to process the motor tax transfer. A separate user story ( [https://digitalhubjira.atlassian.net/browse/MCR-451|https://digitalhubjira.atlassian.net/browse/MCR-451|smart-link]) will deliver the functionality to actually complete the transfer of the tax disc from the original vehicle registration number to the new vehicle registration number. A second user story ( [https://digitalhubjira.atlassian.net/browse/MCR-452|https://digitalhubjira.atlassian.net/browse/MCR-452|smart-link]) will deliver the functionality to display the screen where we confirm that the motor tax disc is now associated with the new vehicle registration number.  ","*Scenario 1: Transfer motor tax.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*Then* the “Transfer Motor Tax” screen is displayed



*Scenario 2: Transfer motor tax. Validation. Enter new vehicle registration number - matching chassis number*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*Then* I enter a new vehicle registration number

*And* I click on the “Search” button

*And* the chassis numbers of the original vehicle and the new vehicle are displayed

*And* the chassis numbers match

*And* I can select the “Confirm” button to transfer the motor tax to the new vehicle registration number



*Scenario 3: Transfer motor tax. Validation. Enter new vehicle registration number - chassis number does not match*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*Then* I enter a new vehicle registration number

*And* I click on the “Search” button

*And* the chassis numbers of the original vehicle and the new vehicle are displayed

*And* the chassis numbers do not match

*And* I select the “Confirm” button 

*And* I see a pop up error message saying “Cannot transfer motor tax as the chassis numbers do not match”



*Scenario 4: Transfer motor tax. Validation. No new vehicle registration number*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*Then* I do not enter a new vehicle registration number

*And* I click on the “Search” button

*And* I see an error message at the top of the screen saying “Vehicle Registration Number is a mandatory field”

*And* the Vehicle Registration Number field is highlighted in red



*Scenario 5: Transfer motor tax. Validation. Vehicle registration number not found*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*Then* I enter a vehicle registration number that does not exist in the database

*And* I click on the “Search” button

*And* I see an error message at the top of the screen saying “Vehicle Registration Number not found”

*And* the Vehicle Registration Number field is highlighted in red



*Scenario 6: Transfer motor tax. Validation. Confirm before searching*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax records associated with the vehicle

*And* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* I click on the “Transfer” button

*And* the “Transfer Motor Tax” screen is displayed

*And* I do not enter a new vehicle registration number

*Then* I select the “Confirm” button 

*And* I see an error message at the top of the screen saying “Please search for the new Vehicle Registration Number before confirming”

*And* the Vehicle Registration Number field is highlighted in red



*Scenario 7: Transfer motor tax. User manually keys the URL. Validation successful.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I manually enter the URL to access the Transfer Tax screen

*And* the screen validation is successful (Current Tax Disc & Vintage Vehicle)

*Then* the “Transfer Motor Tax” screen is displayed



*Scenario 8: Transfer motor tax. User manually keys the URL. Validation unsuccessful.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vintage vehicle 

*And* I am redirected to the vehicle details screen

*And* I manually enter the URL to access the Transfer Tax screen

*And* the screen validation is unsuccessful (either it’s not the Current Tax Disc or it’s not a Vintage Vehicle)

*Then* the Vehicle Primary Details screen is displayed"
Story,MCR-251,19935,Tax a Vehicle. Change tax class associated with a tax disc,Medium,QA Finished,05/06/2025 14:58,MTO Sprint 12,"*As* internal staff

*I need to* be able to update the Tax Class associated with a vehicle’s tax disc

*So that* the Tax Class accurately represents the usage of the vehicle

*Background:*

The Tax Class associated with a vehicle is an important attribute. It is essential that it is kept up to date.
Article 7(c) of the 1992 act advises that when changing Tax Class, the owner should pay the difference between the licence originally issued and the amount payable at the new rate ""for the like period"". We view ""for the like period"" as meaning a disc with the same Start Date and End Date.
The following is an extract from the Dept of Transport regarding such occurrences and the change is generally considered to have occurred on the date of sale, not the date of presentation to the MTO.
“If the change to the vehicle took place during a current motor tax period and gave rise to an increase in the rate of motor tax payable, you are required to pay the difference between the original fee paid and the higher rate of motor tax due, from the start of the month in which the change took place”

*Requirements:*

This user story will focus on delivering the front end requirements to change the Tax Class associated with a tax disc.

As the Tax Class is not stored alongside the Tax Disc itself, the change of Tax Class here will result in the Tax Class of the vehicle being updated. 

Note: We’re adding some validation via [https://digitalhubjira.atlassian.net/browse/MCR-803|https://digitalhubjira.atlassian.net/browse/MCR-803|smart-link] which will prevent the user from getting to this screen if the status of the vehicle is not “Current “ or “Restricted Data Access Limited”. It makes no sense to change the vehicle’s tax class if the status is not one of these two values. 

Under the “Relevant Details” section, the screen will display the current Tax Class associated with the vehicle and will also display the current Motor Tax dates, i.e. the Start Date and End Date of the current tax disc. The Current VRC Number is also included for reference. This VRC Number is the latest valid VRC Number associated with the vehicle.

NOTE: In some scenarios, the most recent VRC record will not have a VRC Number populated, i.e. the certNumber associated with the current VRC record is empty. This is a valid scenario and can occur if there’s a VRC awaiting issue. If we find that the certNumber is empty and the status of the VRC record is “Awaiting Issue”, we should populate the Current VRC Number field on this screen with the text “Awaiting Issue”. This will ensure that the cashier is aware that there’s currently a VRC awaiting issue for this vehicle.

The user will be able to select a new Tax Class for the vehicle using the dropdown list box provided. The contents of the dropdown list box will be controlled based on the contents of the tax_class_body_type table. The New Tax Class must be different from the Current Tax Class.

* If the user clicks on the “Continue” button without first selecting a valid New Tax Class an error message “New Tax Class is a mandatory field” will be displayed at the top of the screen and the New Tax Class field will be highlighted in red 
* If the user selects a New Tax Class that is the same as the Current Tax Class, the system will display a message at the top of the screen saying “New Tax Class cannot be the same as the Current Tax Class” and the New Tax Class field will be highlighted in red.

As well as selecting the new Tax Class, the user will be able to select the Change Start Date, i.e. the date from when the Tax Class change is to be applied. The Change Start Date will have to be the first day of a month and it will default to the start of the current month. The user will be able to set the Change Start Date to the start of any month from the Start Date to the End Date of the current tax disc.

* The Change Start Date cannot be left blank. If the user clicks on the “Continue” button without first selecting a valid Change Start Date an error message “Change Start Date is a mandatory field” will be displayed at the top of the screen and the Change Start Date field will be highlighted in red.
* If the user enters a Change Start Date that is earlier than the Start Date of the current tax disc, the system will display a message at the top of the screen saying “Change Start Date cannot be earlier than the Current Start Date” and the Change Start Date field will be highlighted in red.
* If the user enters a Change Start Date that is later than the End Date of the current tax disc, the system will display a message at the top of the screen saying “Change Start Date cannot be after the Current End Date” and the Change Start Date field will be highlighted in red.
* If the user enters a Change Start Date that is not the first day of a month, the system will display a message at the top of the screen saying “Change Start Date must be the first day of a month” and the Change Start Date field will be highlighted in red.

Once the New Tax Class and Change Start Date have been entered, the surcharge will be calculated and the Transaction Summary fields will be updated accordingly. A separate user story will be responsible for calculating the surcharge for the change of Tax Class (see [https://digitalhubjira.atlassian.net/browse/MCR-634|https://digitalhubjira.atlassian.net/browse/MCR-634|smart-link]).

The following is the proposed wireframe for the screen when it first loads (Transaction Summary section populated with hyphens): 

!image-20250502-144659.png|width=549,height=709,alt=""image-20250502-144659.png""!



When the New Tax Class and Change Start Date fields have been populated, the data in the Transaction Summary section will be updated dynamically as follows:

!image-20250502-144729.png|width=554,height=709,alt=""image-20250502-144729.png""!



Once the surcharge has been calculated, the screen will dynamically update the Transaction Summary section of the screen to reflect the new Tax Class details. The fields in the Transaction Summary section will be populated as follows:

* Current Tax Class – the current Tax Class associated with the tax disc
* New Tax Class – the new Tax Class being applied to the tax disc
* Motor Tax dates – the Start Date and End Date of the current tax disc, e.g. “01 Mar 2025 - 30 Aug 2025”
* Change Start Date – the date from when the Tax Class change is to be applied, e.g. “01 Jun 2025”
* Number of Months – the number of months that the Tax Class change will be applicable
* Monthly Surcharge Amount –  the Monthly Surcharge Amount calculated by user story [https://digitalhubjira.atlassian.net/browse/MCR-634|https://digitalhubjira.atlassian.net/browse/MCR-634|smart-link]
** The Monthly Surcharge Amount may be €0.00 or more. 
** The Monthly Surcharge Amount should not be negative. 
** The Monthly Surcharge Amount may include euro and cents, e.g. €23.65
* Cost of Tax Class Change – Number of Months multiplied by Surcharge Amount
** The Cost of Tax Class Change will be a value in euro. 
** It may be zero if the Monthly Surcharge Amount is zero. 
** The Cost of Tax Class Change will be rounded down to an even euro amount, e.g. €140.64 will be rounded down to €140.00.

The breadcrumbs will be delivered as part of this user story. 

The stepper will be delivered as part of a separate user story. 

The user can select the “Cancel Transaction” button to cancel the Tax Class Change transaction.
The user can select the “Continue” button to continue with the Tax Class Change transaction. The next screen to be displayed is the process payment screen which will be desscribed in user story [https://digitalhubjira.atlassian.net/browse/MCR-646|https://digitalhubjira.atlassian.net/browse/MCR-646|smart-link]. 

Question - if there is no payment due, do we still need to go through the Payments screen? Should the “Continue” button skip the payment screen in this scenario and go straight to the confirmation screen? What impact will that have from a stepper perspective? ","*Scenario 1: Change the tax class associated with a tax disc - increase*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs more than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are correct

*And* the Cost of Tax Class Change value is an even euro amount



*Scenario 2: Change the tax class associated with a tax disc - decrease*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class that costs less than the original Tax Class

*And* I provide a start date for the Tax Class change

*And* I can see that the Monthly Surcharge Amount and the Cost of Tax Class Change values are both €0.00.



*Scenario 3: Change the tax class associated with a tax disc - New Tax Class validation*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I do not provide a new Tax Class

*And* I click on the “Continue” button

*And* a message is displayed at the top of the screen saying “New Tax Class is a mandatory field” 

*And* the New Tax Class field will be highlighted in red

*And* I select a new Tax Class that is the same as the original Tax Class

*And* a message is displayed at the top of the screen saying “New Tax Class cannot be the same as the Current Tax Class” 

*And* the New Tax Class field will be highlighted in red.



*Scenario 4: Change the tax class associated with a tax disc - Change Start Date validation*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* I click on the “View” button associated with the current tax disc

*And* I can see the full details of the current tax disc

*And* I click on the “Change Tax Class” button

*Then* I can see the screen to change the Tax Class for a vehicle

*And* I select a new Tax Class 

*And* I do not provide a Change Start Date

*And* I click on the “Continue” button

*And* a message is displayed at the top of the screen saying “Change Start Date is a mandatory field” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is earlier than the Start Date of the current tax disc

*And* a message is displayed at the top of the screen saying “Change Start Date cannot be earlier than the Current Start Date” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is is later than the End Date of the current tax disc

*And* a message is displayed at the top of the screen saying “Change Start Date cannot be after the end of the Current End Date” 

*And* the Change Start Date field will be highlighted in red

*And* I provide a Change Start Date that is not the first day of a month

*And* a message is displayed at the top of the screen saying “Change Start Date must be the first day of a month” 

*And* the Change Start Date field will be highlighted in red."
Story,MCR-608,22477,Tax a vehicle. Validate New Tax Class,Medium,QA Finished,14/05/2025 11:57,MTO Sprint 11,"*As* internal staff

*I need to* be able to validate the new Tax Class selected as part of processing motor tax

*So that* the appropriate Tax Class is selected

When the user selects a new Tax Class as part of processing a motor tax renewal, there are a couple of validations that we need to apply to ensure that the selected new Tax Class is allowed. The validations were identified on 14/04/2025 when Silvia was reviewing the legacy system functionality. 

The validations that need to be applied as part of this user story are as follows: 

* When the user selects the Tax Class of “Vintage/Veteran”, we must implement a check to ensure that the vehicle is a minimum of 30 years old, based on the year of vehicle registration. 
** If the vehicle is not a minimum of 30 years old and the user selects a Tax Class of “Vintage/Veteran”, we must pop up an error message saying ""Year of manufacture must be 1995 or earlier for 'Vintage/Veteran' tax class"". 
*** In this error message, the year of manufacture is dynamically updated based on the current year minus 30 years, e.g. 2025 - 30 = 1995. 
* When the user selects the Tax Class of “Own Goods” or “Other Goods” we need to ensure that the vehicle weights have been captured / recorded correctly. 
** Stephen Cumbers confirmed that he has seen vehicles registered with very small weights, e.g. 0kg, 1kg, etc.
** Stephen recommended that we set a minimum weight of 500kg for a Goods vehicle. 
** If the vehicle weights have not been captured correctly (i.e. the weight is less than 500kg) and the user selects the Tax Class of “Own Goods” or “Other Goods”, we must pop up an error message saying ""A vehicle with Unladen Weight Basis of Assessment must have a vehicle weight greater than or equal to 500kg"". 
** We should hold the minimum weight value as a parameter in the system.
** Unladen weight is the wt_ulw field in the vehicle_weight table.
** We’ll need to call a new end point here to retrieve the weight data for the vehicle

These validations will need to be applied for the change of Tax Class as part of taxing the vehicle, and for the Tax Class selected as part of adding an Arrear. ","*Scenario 1: Validate New Tax Class. Vintage/Veteran*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number for a vehicle that is less than 30 years old

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*And* I select a new Tax Class of “Vintage/Veteran”

*And* I click the “Continue” button

*Then* I see the following pop up message on screen: ""Year of manufacture must be 1995 or earlier for 'Vintage/Veteran' tax class""

*And* I confirm that the year called out in the error message is in fact 30 years ago

*And* I can click the OK button to get rid of the pop up message. 



*Scenario 2: Validate New Tax Class. Goods*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number for a vehicle that has a vehicle weight of less than 500kg

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*And* I select a new Tax Class of “Own Goods” or “Other Goods”

*And* I click the “Continue” button

*Then* I see the following pop up message on screen: ""A vehicle with Unladen Weight Basis of Assessment must have a vehicle weight greater than or equal to 500kg""

*And* I can click the OK button to get rid of the pop up message. "
Story,MCR-582,22026,View Vehicle Primary Details - Tax Expiry Date v's SORD Expiry Date,Medium,QA Finished,09/06/2025 18:23,MTO Sprint 11,"*As* internal staff

*I need to* display either the Tax Expiry Date or the SORD Expiry Date on the Vehicle Primary Details screen

*So that* I can see the most recent date of these two dates

At present, on the Vehicle Primary Details screen, we are only displaying the Motor Tax Expiry Date from the Vehicle table. 

!image-20250408-162734.png|width=704,height=531,alt=""image-20250408-162734.png""!

There is also a SORD Expiry Date on the Vehicle table. If the vehicle was declared off the road more recently than it was taxed, the SORD Expiry Date will be more recent than the Tax Expiry Date. In these scenarios, we would like to display the SORD Expiry Date from the Vehicle table rather than the Motor Tax Expiry Date. 

!image-20250408-163544.png|width=631,height=481,alt=""image-20250408-163544.png""!

This user story will deliver the front end and back end changes required to dynamically populate the most appropriate date (Tax Expiry or SORD Expiry) on the Vehicle Primary Details screen. 

If the Tax Expiry Date is in the past, the Tax Expiry Date is highlighted with an icon. When the user hovers their mouse over the icon, the following text is displayed: “Motor tax has expired for this vehicle”.

If the SORD Expiry Date is in the past, the SORD Expiry Date is highlighted with an icon. When the user hovers their mouse over the icon, the following text is displayed: “SORD has expired for this vehicle”.



The same logic is also required for the Process Off Road Declaration screen. The logic of the current screen only displays the SORD Expiry Date. However, we would like this date to be dynamically updated (as described above) to show the most recent of the SORD Expiry Date and the Motor Tax Expiry Date. 

!image-20250409-115804.png|width=759,height=426,alt=""image-20250409-115804.png""!

We would need to ensure that the correct label and date are also displayed on this screen. 

!image-20250409-120237.png|width=740,height=416,alt=""image-20250409-120237.png""!","*Scenario 1: Currently taxed. Display Tax Expiry Date*  

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a taxed vehicle

*And* I am redirected to the vehicle details screen

*Then* the Tax Expiry Date from the Vehicle table is displayed on the screen.



*Scenario 2: Currently off road. Display SORD Expiry Date* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vehicle that is declared off road

*And* I am redirected to the vehicle details screen

*Then* the SORD Expiry Date from the Vehicle table is displayed on the screen.



*Scenario 3: Previously taxed. Display Tax Expiry Date*  

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number that was most recently taxed

*And* I am redirected to the vehicle details screen

*Then* the Tax Expiry Date from the Vehicle table is displayed on the screen

*And* the Tax Expiry date is highlighted with an icon

*And* when I hover over the icon following text is displayed: “Motor tax has expired for this vehicle”.



*Scenario 4: Previously declared off road. Display SORD Expiry Date* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number that was most recently declared off road

*And* I am redirected to the vehicle details screen

*Then* the SORD Expiry Date from the Vehicle table is displayed on the screen

*And* the SORD Expiry date is highlighted with an icon

*And* when I hover over the icon following text is displayed: “SORD has expired for this vehicle”.



*Scenario 5: Currently taxed. Display Tax Expiry Date*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a taxed vehicle

*And* I am redirected to the vehicle details screen

*Then* the Tax Expiry Date from the Vehicle table is displayed on the screen

*And* I choose to declare the vehicle off the road

*And* the Tax Expiry Date from the Vehicle table is displayed on the Process SORD screen

 

*Scenario 6: Currently off road. Display SORD Expiry Date*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a vehicle that is declared off road

*And* I am redirected to the vehicle details screen

*Then* the SORD Expiry Date from the Vehicle table is displayed on the screen.

*And* I choose to declare the vehicle off the road

*And* the SORD Expiry Date from the Vehicle table is displayed on the Process SORD screen"
Story,MCR-570,21751,Update screens to display correct Date text (End Date v's Expiry Date),Medium,QA Finished,08/05/2025 13:49,MTO Sprint 11,"*As* internal staff

*I need to* be sure that the correct dates are being displayed on the front-end screens

*So that* we can be confident when we’re discussing End date v’s Expiry date

These changes are most relevant for SORD and Motor Tax. 

We have been using “Expiry Date” a lot on the SORD and Motor Tax screens when we really should be using “End Date”. This user story will be responsible for making the changes to the front end and (where necessary) the back end to ensure that the correct dates are being used and that the correct screen labels are being used.  

The End Date is the original finish date for the SORD / Motor Tax record when it was first created. 

If a SORD is terminated early, the Expiry Date field in the ORD table is populated with a revised end date. The actual End Date field in the SORD record in not updated. The Expiry Date is used to capture the date the SORD was interrupted. 

If a Motor Tax Disc is terminated early, the Status Date field in the Vehicle Licence table is populated with the date that the motor tax disc was cancelled. In some cases, depending on the reason code that was selected, the End Date of the motor tax disc is updated to be the last day of the month of the date of cancellation. 

To further complicate the matter, there is both a Tax Expiry Date and a SORD Expiry Date held on the Vehicle table. 

We need to review the screens we have already delivered to ensure that we are correctly using the terms End Date and Expiry Date. If we are using the Tax Expiry Date or the SORD Expiry Date from the Vehicle table, it is ok to use the “Expiry Date” label. However, where we are using the End Date from either the ORD table or the Vehicle Licence table, we should be using the label “End Date”. 

The screens that we need to address as part of this user story are as follows: 

# Process Motor Tax screen, Transaction Summary section at the bottom of the screen

!image-20250411-093559.png|width=378,height=252,alt=""image-20250411-093559.png""!

# Process Motor Tax Payments screen, Transaction Summary section at the top of the screen

!image-20250411-093726.png|width=302,height=320,alt=""image-20250411-093726.png""!

# Process Motor Tax Confirmation screen - arrange the dates so that they are side by side (Start Date - End Date)

!image-20250411-093907.png|width=412,height=449,alt=""image-20250411-093907.png""!

# Process SORD screen, Transaction Summary at bottom of screen

!image-20250411-094152.png|width=194,height=122,alt=""image-20250411-094152.png""!

# Process SORD Confirmation screen - arrange the dates so that they are side by side (Start Date - End Date)

!image-20250411-094725.png|width=319,height=320,alt=""image-20250411-094725.png""!","*Scenario 1: Update labels for End Date on Motor Tax screens*

*Given* I am logged in as a cashier

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I click on Tax vehicle

*And* I am redirected to the process motor tax screen

*Then* I can see that the end date in the Transaction Summary section is correctly labelled

*And* I proceed to the payments screen

*Then* I can see that the end date in the Transaction Summary section is correctly labelled

*And* I proceed to the confirmation screen

*Then* I can see that the start and end dates are correctly labelled as “New Motor Tax Dates” and the dates are side by side on the screen



*Scenario 2: Update labels for End Date on SORD screens*

*Given* I am logged in as a cashier

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I click on Declare Off Road

*And* I am redirected to the process SORD screen

*Then* I can see that the end date in the Transaction Summary section is correctly labelled

*And* I proceed to the confirmation screen

*Then* I can see that the start and end dates are correctly labelled as “New SORD Dates” and the dates are side by side on the screen"
Story,MCR-512,21435,"Tax a vehicle. Remove the word ""New"" from the Motor Tax screens",Medium,QA Finished,14/05/2025 09:29,MTO Sprint 11,"*As* internal staff

*I need to* remove the word “New” from the Motor Tax processing screens 

*So that* the screen labels and headings are less cluttered

This user story deals with the _front end_ changes required to remove the word “New” from the Motor Tax processing screens. 

This was proposed as part of a Sprint Review call with the business on 24 March 2025. 

The following three screens will need to be updated: 

!image-20250324-184136.png|width=647,height=824,alt=""image-20250324-184136.png""!





!image-20250324-184319.png|width=634,height=957,alt=""image-20250324-184319.png""!





!image-20250324-184359.png|width=658,height=675,alt=""image-20250324-184359.png""!","*Scenario 1: Process Motor Tax*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify I can see the Process Motor Tax screen

*And* the word “New” is no longer visible "
Story,MCR-510,21433,"Tax and SORD - Change from ""Received From"" to ""Vehicle Owner""",Medium,QA Finished,14/05/2025 12:21,MTO Sprint 11,"*As* internal staff

*I need to* be able to see confirmation that the Motor Tax and SORD transactions have successfully completed

*So that* I can confirm the details with the owner  

This user story will focus on delivering a simple text change on the _front end_ screen for confirming that the Motor Tax and SORD transactions were successfully completed. This user story is closely coupled with [https://digitalhubjira.atlassian.net/browse/MCR-292|https://digitalhubjira.atlassian.net/browse/MCR-292|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-210|https://digitalhubjira.atlassian.net/browse/MCR-210|smart-link]. 

Currently, the screens include a label “Received From”, which represents the name and address of Registered owner of Vehicle. The business have asked that this label be changed to “Vehicle Owner” on the following two screens: 

!image-20250324-183033.png|width=50%,alt=""image-20250324-183033.png""!

!image-20250324-182534.png|width=625,height=587,alt=""image-20250324-182534.png""!","*Scenario 1: Confirm Motor Tax Renewal Complete*

*Given* I am logged in as a cashier

*When* I have processed a Motor Tax transaction

*And* I confirm the transaction

*Then* I can see the Process Motor Tax Complete screen 

*And* All of the correct details that are relevant to the Motor Tax are displayed on the screen

*And* The label “Vehicle Owner” is displayed instead of “Received From”.



*Scenario 2: Confirm SORD Renewal Complete*

*Given* I am logged in as a cashier

*When* I have processed a SORD transaction

*And* I confirm the transaction

*Then* I can see the Process SORD Complete screen 

*And* All of the correct details that are relevant to the SORD are displayed on the screen

*And* The label “Vehicle Owner” is displayed instead of “Received From”."
Story,MCR-441,20925,Tax a vehicle. View Motor Tax - View Specific Motor Tax,Medium,QA Finished,09/06/2025 10:29,MTO Sprint 11,"*As* a cashier

*I need to* be able to see all the details associated with a specific motor tax record

*So that* I can review the motor tax transaction in more detail

The user must be able to view the previous motor tax details associated with the vehicle they have selected. This user story will focus on the _front end_ changes required to display a specific motor tax record from the motor tax history table. 

User Story [https://digitalhubjira.atlassian.net/browse/MCR-47|https://digitalhubjira.atlassian.net/browse/MCR-47|smart-link] will be responsible for displaying the full list of motor tax discs associated with the vehicle. 

This screen is a read only screen - user won’t be able to make any changes to the motor tax details displayed on the screen.

Selecting the “Back” button will return the user to the previous screen. 

Breadcrumbs will be available at the top of the screen. 

* The functionality behind the “Change Tax Class” button will will be delivered as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-251|https://digitalhubjira.atlassian.net/browse/MCR-251|smart-link] 
** However, *this* user story will control whether or not the “Change Tax Class” button is actually visible for the user. This screen will only display the “Change Tax Class” button if the tax disc selected by the user has not already expired. If the tax disc has not already expired, the “Change Tax Class” button will be visible. Otherwise, the “Change Tax Class” button will be dynamically hidden.
* The functionality behind the “Transfer” button will be delivered as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-416|https://digitalhubjira.atlassian.net/browse/MCR-416|smart-link]
** However, *this* user story will control whether or not the “Transfer” button is actually visible for the user. This screen will only display the “Transfer” button if the following two conditions are met: 
*** the vehicle is a vintage vehicle, i.e. if the year of vehicle registration is thirty years ago or more. 
*** the tax disc selected by the user has not already expired.
*** These validation checks were ratified during the MTO workshop on 26/03/2025. 
** If both of these criteria are met, the “Transfer” button will be visible. Otherwise, the “Transfer” button will be dynamically hidden. 
* The functionality behind the “Cancel Tax” button will be delivered as part of a separate user story. 
** However, *this* user story will control whether or not the “Cancel Tax” button is actually visible for the user. This screen will only display the “Cancel Tax” button if the tax disc selected by the user has not expired. If the tax disc has not expired, the “Cancel Tax” button will be visible. Otherwise, the “Cancel Tax” button will be dynamically hidden.

* <> The proposed wireframe is included below (removed Issuing User and Previous Motor Tax Number for now as decided in comments and Licence Sort replaced by Motor Tax Type): 

!image-20250411-112206.png|width=783,height=561,alt=""image-20250411-112206.png""!","*Scenario 1: View motor tax.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*Then* I select the a motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed



*Scenario 2: View motor tax. Validation. Not a Vintage Vehicle*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number that is less than 30 years old 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*Then* I select the current, unexpired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* the “Transfer” button is not visible

*And* the “Change Tax Class” button is visible

*And* the “Cancel Tax” button is visible



*Scenario 3: View motor tax. Validation. Vintage Vehicle. Tax Valid.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number that is more than 30 years old 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*Then* I select the current, unexpired motor tax record (with three or more months remaining) using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* the “Transfer” button is visible

*And* the “Change Tax Class” button is visible

*And* the “Cancel Tax” button is visible



*Scenario 4: View motor tax. Validation. Vintage Vehicle. Tax Expired.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number that is more than 30 years old 

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*Then* I select the expired motor tax record using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* the “Transfer” button is not visible

*And* the “Change Tax Class” button is not visible

*And* the “Cancel Tax” button is not visible



*Scenario 5: View motor tax. Validation. Motor Tax Expired*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number where the motor tax has expired

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*Then* I select one of the expired motor tax records using the “View” button

*And* I see a new screen with the full motor tax details displayed

*And* the “Transfer” button is not visible

*And* the “Change Tax Class” button is not visible

*And* the “Cancel Tax” button is not visible"
Story,MCR-436,20858,Tax a vehicle. Update motor tax rate when motor tax class changes,Medium,QA Finished,14/05/2025 09:30,MTO Sprint 11,"*As* internal staff

*I need to* be able to see the motor tax rates update when Tax Class changes 

*So that* the correct motor tax rates are displayed / available

We need a new endpoint that we can call to get motor tax rates using new values related to the motor Tax Class selected, without changing vehicle data. 

The new endpoint will retrieve the correct motor tax rates from the motor tax rates table using the Tax Class provided. 

This user story will also call the new end point from the front end. 

When the end point has been called and the new tax rates have been retrieved, the new motor tax rates will be displayed on the screen. 

If the new Tax Class is an annual only motor tax rate, the screen will update accordingly to dynamically hide the Quarterly and Half-Yearly options. 

!image-20250325-101433.png|width=647,height=840,alt=""image-20250325-101433.png""!

Ignore the “stepper” for now - that’ll be covered separately. ","*Scenario 1: Update motor tax rate when motor tax class changes*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*And* I can see the motor tax rates associated with the current vehicle Tax Class

*Then* I change the Tax Class 

*And* I can see that the motor tax rates are updated accordingly"
Story,MCR-172,19631,Declare a vehicle as off the road (SORD) - Interrupt SORD and tax vehicle,Medium,QA Finished,20/06/2025 15:17,MTO Sprint 11,"*As* internal staff

*I need to* be able to tax a vehicle, even though it is currently declared as off the road

*So that* the vehicle owner will be able to tax the vehicle and bring it back on the road

A vehicle which has been declared Off Road can be eligible for motor taxation between the start date and expiry date of the Off-Road Declaration. 

The current system displays a warning message for the user when they select a vehicle where there is a current SORD associated. The warning is as follows: 

!image-20250403-132805.png|width=375,height=186,alt=""image-20250403-132805.png""!

Note, the dates are dynamically updated in the warning message to ensure that the user is clear on the process. In the case of the above warning message, it was generated in Sept 2024. 

If a SORD currently exists for the vehicle and the vehicle owner wishes to bring the vehicle back on the road, they can do so by selecting the vehicle and clicking on the “Tax Vehicle” button on the Primary Details tab. 

When the Process Motor Tax screen loads, a message will be displayed at the top of the screen saying “An off road declaration currently exists for this vehicle. If you proceed to tax the vehicle, the off road declaration will be terminated and the vehicle will be taxed from the start of the current month”.  The banner is informational and will be displayed in blue text, as per the OGCIO style guide.

!image-20250408-170131.png|width=584,height=1021,alt=""image-20250408-170131.png""!

A new component will need to be delivered for this informational message. This new information component may be user as a banner at the top of other screens in the future. 

The user may choose to hit the “Cancel” button on the Process Motor Tax screen to leave the SORD in place and not tax the vehicle. 

If the user continues to process the motor tax for the vehicle, *the start date for the motor tax will default to the start of the current month.* ","*Scenario 1: Declare a vehicle off the road. Interrupt SORD and tax vehicle* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I enter a valid vehicle registration number with status ‘Current’ and an existing SORD which is not due to expire for another few months

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I am redirected to Process Motor Tax screen

*And* I see a message at the top of the screen, as follows: “An off road declaration currently exists for this vehicle. If you proceed to tax the vehicle, the off road declaration will be terminated and the vehicle will be taxed from the start of the current month”.

*And* I proceed to tax the vehicle 



*Scenario 2: Declare a vehicle off the road. Do not interrupt SORD*. 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I enter a valid vehicle registration number with status ‘Current’ and an existing SORD which is not due to expire for another few months

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I am redirected to Process Motor Tax screen

*And* I see a message at the top of the screen, as follows: “An off road declaration currently exists for this vehicle. If you proceed to tax the vehicle, the off road declaration will be terminated and the vehicle will be taxed from the start of the current month”.

*And* I click on “Cancel”

*And* the motor tax transaction is abandoned

*And* I am returned to the Vehicle Primary Details tab

*And* the SORD remains uninterrupted. "
Story,MCR-440,20924,Tax a vehicle. View motor tax - Get Motor Tax List Details from Database,Medium,QA Finished,06/06/2025 09:19,MTO Sprint 10,"*As* a cashier

*I need to* be able to retrieve all the motor tax records associated with a vehicle from the database

*So that* I can check previous motor tax details

The user must be able to view the previous motor tax records associated with the vehicle they have selected. This user story will focus on the _back end_ changes required to retrieve the list of motor tax records associated with the vehicle from the database. 

When the user selects the “Motor Tax and Certs” tab, the system will call an API to retrieve all of the motor tax details associated with the current vehicle. There may be zero, one or more motor tax records associated with a vehicle. If the vehicle is newly registered in the state and has never been taxed before, there will be zero motor tax records associated with the vehicle. 

The Motor Tax data will be displayed on a new “Motor Tax and Certs” tab on the “Vehicle Page”. The motor tax details that are retrieved from the database as part of this user story will be passed forward to user story [https://digitalhubjira.atlassian.net/browse/MCR-47|https://digitalhubjira.atlassian.net/browse/MCR-47|smart-link] so they can be displayed as required. 

We’ll take a copy of the existing API and create a new end point and modify it to ensure that pagination and sorting are carried out at the database level. ","*Scenario 1: View motor tax*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax and Certs’ tab

*Then* the system calls an API to retrieve a full list of motor tax details associated with the vehicle"
Story,MCR-47,18816,Tax a vehicle. View Motor Tax List - Display Motor Tax Screen,Medium,QA Finished,10/06/2025 12:59,MTO Sprint 10,"*As* a cashier

*I need to* be able to see all the motor tax records associated with a vehicle

*So that* I can check previous motor tax details

The user must be able to view the previous motor tax records associated with the vehicle they have selected. This user story will focus on the _front end_ changes required to display the motor tax records for the vehicle. This screen will be accessible via a new “Motor Tax” tab on the “Vehicle Page”. 

User Story [https://digitalhubjira.atlassian.net/browse/MCR-440|https://digitalhubjira.atlassian.net/browse/MCR-440|smart-link] will be responsible for retrieving the motor tax data from the database. 

Within this user story, we will be focussing on delivering the contents for the “Motor Tax” sub-tab within the “Motor Tax” tab on the “Vehicle Page”. The other sub-tabs for “Arrears”, “Gaps”, “SORD” and “Motor Tax history” will be delivered using separate user stories. 

Delivering the “Motor Tax” tab on the “Vehicle Page” will be the responsibility of this user story. The new “Motor Tax” tab will be at the same level as the existing “Main Details” tab. 

Delivering the “Motor Tax” sub-tab within the “Motor Tax” tab on the “Vehicle Page” will also be the responsibility of this user story. 

The proposed wireframe is included below. The motor tax data will be displayed on the screen in tabular format, with the following motor tax details being included in the table: 

* Start Date
* End Date
* Status
* Motor Tax Number
* Sort / Type

The screen will be sorted by Start Date descending so that the most relevant / most recent motor tax entry is at the top of the list. Each table entry will have a “View” hyperlink on the right hand side of the row. The user can click on the “View” hyperlink to view the full details associated with the selected row. 

There is no requirement for the user to be able to be able to sort or filter the contents of the table

This screen will be a read only screen, user won’t be able to make any changes to the motor tax data that is displayed.

The screen will include pagination. A maximum of 10 rows will be displayed at a time. 

Breadcrumbs will be available at the top of the screen. 

Selecting the “Tax Vehicle” button within the “Motor Tax” sub-tab will take the user to the “Process Motor Tax” screen, as already delivered via user story [https://digitalhubjira.atlassian.net/browse/MCR-8|https://digitalhubjira.atlassian.net/browse/MCR-8|smart-link]. The same validations as described in [https://digitalhubjira.atlassian.net/browse/MCR-206|https://digitalhubjira.atlassian.net/browse/MCR-206|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-438|https://digitalhubjira.atlassian.net/browse/MCR-438|smart-link] will be applied here to ensure that the owner is allowed to tax the vehicle. 

Should the user wish to return to view the primary details of the current vehicle, they simply click on the “Main Details” tab again. 

Selecting the “Back” button will return the user to the previous screen, i.e. the vehicle search screen.  

The “Untaxed Period” section at the top of the screen will dynamically display any untaxed period, if one currently exists for the vehicle. The logic for determining if an untaxed period currently exists has already been implemented as part of the “Process Motor Tax” functionality. If no untaxed period exists for the vehicle, the “Untaxed Period” section will be dynamically hidden. All we need to display is the untaxed period start date and end date. We do +*not*+ need to reference how we might interpret the untaxed period from a gaps and arrears point of view. 

{panel:bgColor=#deebff}
This “Untaxed Period” will be shown for all the possible tags in Motor Tax tab
{panel}

Future wireframe: 

!image-20250425-160249.png|width=699,height=870,alt=""image-20250425-160249.png""!

Legacy system screens: 

!image-20241016-093526.png|width=617,height=418,alt=""image-20241016-093526.png""!

!image-20241016-093240.png|width=451,height=304,alt=""image-20241016-093240.png""!

!image-20241016-093356.png|width=50%,alt=""image-20241016-093356.png""!

!image-20241016-094947.png|width=543,height=374,alt=""image-20241016-094947.png""!

!image-20241016-093227.png|width=451,height=304,alt=""image-20241016-093227.png""!","*Scenario 1: View motor tax*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*Then* I can see the full list of Motor Tax details associated with the vehicle

*And* the entries are sorted by Start Date descending 



*Scenario 2: View motor tax. Newly registered vehicle*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*Then* I can not see any motor tax details associated with the vehicle



*Scenario 3: View motor tax. Tax Vehicle*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number

*And* I am redirected to the vehicle details screen

*And* I click on the ‘Motor Tax’ tab

*And* I can see the full list of motor tax details associated with the vehicle

*And* the entries are sorted by Start Date descending 

*Then* I can click on the “Tax Vehicle” button to tax the vehicle."
Story,MCR-589,22114,First time a vehicle is load for taxing a vehicle Tax class is not shown,Medium,QA Finished,23/04/2025 15:08,MTO Sprint 9,"*As* a cashier

*I need to* be able to see the tax class associated with a vehicle

*So that* I know how the vehicle is being taxed

This user story started life as a bug. When the process motor tax screen was being displayed, the current tax class associated with the vehicle should be displayed in the “Tax Class” dropdown list box. 

However, when we implemented the functionality to only allow the “Tax Class” dropdown list box to display the tax classes linked to the vehicle’s body type, the Tax Class was no longer being displayed by default in the dropdown list box. 

Further investigation revealed that the issue was linked to dirty vehicle data.

We are using the tax_class_body_type table to link tax classes with body types. It turns out that there are records in the database with an invalid combination of tax class and body type and in these scenarios the “Tax Class” is not being defaulted in the dropdown list box. 

As this is correct behaviour, we converted the bug to be a user story. 

In this scenario we are defaulting the “Tax Class” dropdown list box value to “Please Select”. We are also showing a pop up message with the following text when the current “Tax Class” is not valid for the associated Body Type: “Tax class not valid for body type. Please select from list provided”





When testing on sit and taxing a vehicle 
[https://mto-client-ui-sit-mto.apps.npocp4.ap.dot.ie/mto/vehicle-page/M698345/vehicle-process-motor-tax|https://mto-client-ui-sit-mto.apps.npocp4.ap.dot.ie/mto/vehicle-page/M698345/vehicle-process-motor-tax]


{color:#ff5630}*Actual:*{color}

The first time this screen is loaded tax class is not fulfilled

!image-20250410-101746.png|width=2055,height=1091,alt=""image-20250410-101746.png""!

{color:#36b37e}*Expected*{color}[{color:#36b37e}*:* {color}|https://mto-client-ui-sit-mto.apps.npocp4.ap.dot.ie/mto/vehicle-page/M698345/vehicle-process-motor-tax]

Tax class has corresponding value","*Scenario 1: Tax class valid for body type*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I can see the Tax Class defaulted correctly to the tax class associated with the vehicle and it’s body type



*Scenario 2: Tax class invalid for body type*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I can see the Tax Class defaulted to “Please select”

*And* a pop up message is displayed stating “Tax class not valid for body type. Please select from list provided”

*And* I can use the dropdown list box to select a tax class that is associated with the vehicle’s body type. "
Story,MCR-571,21752,"Tax a vehicle. Display Tax Expiry Date, Declared off Road, Export Date and Sale Date",Medium,QA Finished,05/05/2025 10:55,MTO Sprint 9,"*As* internal staff

*I need to* be able to see Tax Expiry Date, Declared off Road, Export Date and Sale Date on the Process Motor Tax screen

*So that* I can understand what I need to do with Gaps and Arrears

Following discussions with the MTOs on 02/04/2025, it was agreed that we would add Tax Expiry Date, Declared off Road, Export Date and Sale Date to the top of the Process motor Tax screen, where the dates are relevant. If the dates are irrelevant, we will either display “N/A” or we won’t display them.  

In order to understand why certain gaps and arrears are required, the user needs to know if the vehicle is taxed, if it’s declared off road, if it has been exported and if it was sold. Without displaying these fields on the Process Motor Tax screen, the user will need to search elsewhere in the system to see what the dates are. It makes sense to add these details to the Process motor Tax screen now, so they user has all the relevant information while processing the motor tax transaction. 

This user story will deliver the front end changes required to the Process Motor Tax screen to display the following: 

* Motor Tax Expiry Date
* SORD Expiry Date
* Sale Date
* Export Date

All of this information should already be available to us, so we just have to dynamically display the details if they are relevant. The updated wireframe is as follows for a scenario where all dates are relevant: 

!image-20250403-203426.png|width=565,height=936,alt=""image-20250403-203426.png""!

For the scenario where the Sale Date and Export Date are both not relevant, we will dynamically hide the row that included those two dates, as follows: 

!image-20250408-115257.png|width=627,height=999,alt=""image-20250408-115257.png""!

For the scenario where the Sale Date is relevant, but the Export Date is not relevant, we will dynamically display the row that included those two dates. However, the Sale Date will be populated and the Export Date will contain “N/A”. This will be vice versa if the Sale date is not relevant but the Export Date is. For example:  

!image-20250408-115428.png|width=593,height=953,alt=""image-20250408-115428.png""!



The four fields will be dynamically displayed when they are relevant to the untaxed period of the current transaction. For example: 

* If the SORD Expiry Date is more recent than the Motor Tax Expiry Date, we only need to display the SORD Expiry Date, i.e. the Motor Tax Expiry Date will be “N/A”, and vice versa. 
* If there is a Sale Date associated with the vehicle, but the Sale Date pre-dates the untaxed period, it is not relevant to this transaction and it will not be displayed. 
* If there is an Export Date associated with the vehicle but the Export Date pre-dates the last tax disc / SORD, it is not relevant to this transaction and it will not be displayed.
* If both Sale Date and Export Date are not relevant, we won’t display that row on the screen. 

As well as dynamically displaying / hiding the four fields called out above, we will be changing the title of this top section of the screen from “Current Motor Tax Details” to “Relevant Motor Tax Details”. ","*Scenario 1: Display Tax Expiry Date, Declared off Road, Export Date and Sale Date.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 6 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*And* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see an arrear has been auto-generated

*Then* I can see that the relevant dates are correctly displayed at the top of the screen

*And* I can see that any of the dates that are not relevant are not displayed

*And* I can see that the title of the section has been updated to “Relevant Motor Tax Details” 



*Scenario 1: Display Dates. Export Date and Sale Date both not relevant.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 6 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*And* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see an arrear has been auto-generated

*Then* I can see that the relevant dates are correctly displayed at the top of the screen

*And* I can see that the row containing Sale Date and Export Date is not displayed on the screen 

*And* I can see that the title of the section has been updated to “Relevant Motor Tax Details” "
Story,MCR-514,21452,Tax a vehicle. Additional Postal Date Validation.,Medium,QA Finished,24/04/2025 14:27,MTO Sprint 9,"*As* internal staff

*I need to* be able to include additional Postal Date validation 

*So that* the Postal Date cannot be set too far in the past



This user story is closely coupled with [https://digitalhubjira.atlassian.net/browse/MCR-209|https://digitalhubjira.atlassian.net/browse/MCR-209|smart-link]. The scenario was found when the Test team looked at the Motor Tax Process Payment screen. They found that the user could set a date to any time in the past, as long as it was a valid date format. It makes no sense to allow a Postal Date from potentially 100’s or 1000’s of years ago. 

When we discussed this with Enda Casey and Stephen Cumbers, we agreed that the Postal Date should be limited to a maximum of three months in the past.

This user story will be responsible for adding this additional Postal Date validation to the Process Motor Tax Payment screen. 

If the user provides a Postal Date that is more than three months in the past, the system will display an error message “Postal Receipt Date cannot be more than three months in the past” at the top of the screen and the Postal Date will be highlighted in red. 

!image-20250325-092500.png|width=642,height=985,alt=""image-20250325-092500.png""!","*Scenario 1: Process a payment. Validation. Postal Receipt Date.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of “Postal”

*And* I see the screen dynamically update to include a Postal Receipt Date field

*And* I enter a Postal Receipt Date that is more than three months in the past

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following error message displayed at the top of the screen: “Postal Receipt Date cannot be more than three months in the past”

*And* the Postal Receipt Date is highlighted in red. "
Story,MCR-411,20739,Tax a vehicle. Gaps and Arrears. Add Action Button,Medium,QA Finished,20/06/2025 15:57,MTO Sprint 9,"*As* internal staff

*I need to* be able to display gaps and arrears associated with an untaxed period for a vehicle 

*So that* the motor tax of the vehicle is up to date

*Background:*

* All vehicle owners are legally required to have motor tax on their vehicle if it is being driven on a public road.
* Motor tax should be paid when due, but if the motor tax lapses on a vehicle for more than a month, the owner of the vehicle will be liable to pay arrears.
* An arrears period can only exist if there is a full month's gap between the expiry date of the previous tax period and the beginning of the current month.
* Arrears are charged based on the number of months of arrears due, multiplied by the monthly arrears fee. 
* The arrears monthly fee usually works out at one-tenth the value of the annual motor tax rate for the vehicle.
* Arrears are calculated using data stored in the MOTOR_TAX_RATES table.
* There are no fees associated with Gaps.

This user story will focus on the _front end_ changes to the “Process Motor Tax” screen to implement the functionality behind the “Add Action” button in the “Untaxed Period” section of the screen.

The agreed wireframe design is included below:

!image-20250303-123746.png|width=702,height=1007,alt=""image-20250303-123746.png""!

The screen clearly displays the details associated with any Untaxed Period, displaying the appropriate gaps and arrears. If the full untaxed period has been explained using a combination of gaps and arrears, the “Add Action” button will be disabled. 

If the user removes one of the untaxed periods from the table, a new row will be added to the table to account for the remaining untaxed period. The “Add Action” button will become enabled and the user can then click on it to add a new gap or arrears to the untaxed period table. The new gap or arrear will account for some or all of the remaining untaxed period. 

If the new gap or arrear accounts for all of the remaining untaxed period, the “Remaining untaxed period” row is replaced in the table by the new gap or arrear. 

If the new gap or arrear accounts for only some of the remaining untaxed period, a new gap or arrear row is added to the table and the start and end dates associated with the “Remaining untaxed period” row are updated accordingly.

Selecting the “Add Action” button will dynamically give the user the opportunity to provide details of the associated gap or arrear. Arrear will be selected by default, as follows:  

!image-20250303-183158.png|width=50%,alt=""image-20250303-183158.png""!

If the user selects “Gap”, the data action displayed will change slightly, i.e. the “Arrears Cost” disappears and the Gap reason code dropdown list box is displayed: 

!image-20250304-123529.png|width=612,height=1035,alt=""image-20250304-123529.png""!

The grey area of the screen shown above will dynamically be displayed when the “Add Action” button is selected.  

The user must select either the Gap radio button or the Arrears radio button. The default will be Arrears. 

The Start Date will default to the start date of the untaxed period that needs to be explained. The Start date will be locked - the user will not be able to edit it. 

The End Date will default to the end date of the untaxed period that needs to be explained. The End date will be editable either manually or via the date picker. The End Date will always be the last day of a month. The End Date cannot be less than the Start Date. The End Date cannot be more than last day of the untaxed period. 

The Arrears Cost field will only be displayed for Arrears; it will not be displayed for Gaps. It will be calculated according to the number of months difference between the Start Date and the End Date. The number of months will be multiplied by the arrears monthly fee as taken from the MOTOR_TAX_RATES table. 

The Gap Reason Code will only be displayed for Gaps; it will not be displayed for Arrears. The user will be required to select the gap reason code from the drop down list box. There are some limitations to the Gap Reason Codes that can be selected, as follows: 

* “Gap Past Owner” may not be selected if there is no Date of Sale within the Remaining Untaxed Period. 
* -“Gap Motor Dealer” may not be selected if the vehicle owner is not a Garage / Motor Dealer.- 

If “Gap Past Owner” -or “Gap Motor Dealer”- options are not valid, they should not be included in the dropdown list box. 

-By default, the dropdown list box should be set to “Gap Past Owner”.-

The gap reason code dropdown list box should not default to any reason code. The “Gap Past Owner Unlicenced” reason code should appear at the top of the list of available reason codes, if it is applicable (i.e. if there has been a date of sale during the untaxed period). 

Hitting the “Confirm Action” button will add the gap or arrear to the Untaxed Period table. 

Hitting the “Cancel Action” button will cancel the add action and dynamically update the screen to remove the highlighted section of the screen. 

The list of current Gap Reason codes are as follows: 

* HG: GAP CAR HIRE
* GD: GAP DIPLOMATIC STAFF
* GE: GAP DUE TO EXPORT
* GS: GAP DUE TO SCRAPPAGE
* GX: GAP EXEMPT VEHICLE IN USE
* GC: GAP MOTOR DEALER
* GR: GAP REFUND
* GV: GAP VINTAGE VEHICLE
* GU: GAP PAST OWNER UNLICENSED","*Scenario 1: Gaps and Arrears.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see any gaps or arrears have been auto-generated

*And* I can see that the start dates and the end dates of each gap and / or arrear is correct

*And* I can see that the full untaxed period has been accounted for 

*And* I can see that the arrears fee (where applicable) is populated correctly 

*And* I can see that the gap reason code (where applicable) is as expected

  

*Scenario 2: Gaps and Arrears. Tax expiring current / previous month*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expiring current or previous month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify that there is no untaxed period displayed



*Scenario 3: Gaps and Arrears.* *Remove gaps and / or arrears*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see any gaps or arrears have been auto-generated

*And* I can remove a gap or an arrear 

*And* I can add a new gap or arrear to account for the untaxed period

*And* I can see that the start date for the new gap or arrear is auto-populated and un-editable

*And* I can see that the end date for the gap or arrear is auto-populated and editable

*And* I can see that the arrears fee (where applicable) is populated correctly 

*And* I can see that the gap reason code “Gap Previous Owner” (where applicable) is available to be selected"
Story,MCR-549,21504,Add sord expiry date to untaxPeriodHandler to avoid creating untax periods if sord is active,Medium,QA Finished,03/04/2025 16:55,MTO Sprint 8,"Description can be found in [https://digitalhubjira.atlassian.net/browse/MCR-368|https://digitalhubjira.atlassian.net/browse/MCR-368|smart-link]. Initially this was a subtask. Story created to consider effort during current sprint

If SORD is active, tax expiry date is not updated, only sord expiry date, which means, if there is sord active we don’t need to add untax period from expiry date

Use sord expiry date as expiry date when it’s after the most recent tax licence",
Story,MCR-539,21493,"Add logic for ""Gap motor dealer""",Medium,QA Finished,04/04/2025 08:39,MTO Sprint 8,Description can be found in [https://digitalhubjira.atlassian.net/browse/MCR-368|https://digitalhubjira.atlassian.net/browse/MCR-368|smart-link]. Initially this was a subtask. Story created to consider effort during current sprint,
Story,MCR-438,20872,Tax a vehicle. Vehicle licence. Additional Validations,Highest,QA Finished,23/04/2025 08:28,MTO Sprint 8,"*As* internal staff

*I need to* be able to tax a vehicle for any type of licence 

*So that* vehicle status is up to date and taxes paid when required



There is an additional validation required when checking if a vehicle can be taxed. This was missed when preparing user story [https://digitalhubjira.atlassian.net/browse/MCR-206|https://digitalhubjira.atlassian.net/browse/MCR-206|smart-link] so we need to add it using this user story instead. 

* If a Vehicle has a “Vehicle Stolen” alert associated with it when the user selects the “Tax vehicle” button on the Vehicle Primary Details screen:
** The following pop up error message will be displayed: ""Can not tax this vehicle due to active Stolen alert”. ","*Scenario 1: Tax a vehicle. Vehicle Stolen alert exists.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with an active alert for “Vehicle Stolen”

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*Then* I see the following pop up message on screen: ‘Can not tax this vehicle due to active Stolen alert’"
Story,MCR-435,20839,Update Revenue Cert Date on Vehicle Details Screen,Medium,QA Finished,09/06/2025 18:23,MTO Sprint 8,"*As* internal staff

*I need to* be able to replace the “Revenue Cert Date” field with the “Registration Date” field

*So that* the correct date is showing for the vehicle

When designing the Primary Details tab on the Vehicle Details screen, we included a field called “Revenue Cert Date”. It has since come to light that this field should have been the “Registration Date” field. 

This user story will require changes to be made to the _front end_ to update the label associated with the field on the screen to be “Registration Date”. 

This user story will also require changes to be made to the _back end_ to ensure that the Registration Date of the vehicle will now be displayed in this field. 

!image-20250311-100527.png|width=678,height=1083,alt=""image-20250311-100527.png""!","*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*Then* I can see that the Vehicle Registration Date is correctly being displayed. "
Story,MCR-431,20833,Filter motor tax class to show only the list of motor tax classes that can be selected for this vehicle,Medium,QA Finished,07/05/2025 18:50,MTO Sprint 8,"*As* internal staff

*I need to* be able to filter motor tax class 

*So that* only the list of valid motor tax classes that can be selected are visible for this vehicle

There is a link between Tax Class and Body Type. When the user wishes to change the Tax Class associated with the vehicle, they should only be presented with a list of the valid Tax Classes associated with the vehicle’s Body Type. ",
Story,MCR-410,20738,Tax a vehicle. Gaps and Arrears. Remove Button,Medium,QA Finished,11/04/2025 09:51,MTO Sprint 8,"*As* internal staff

*I need to* be able to display gaps and arrears associated with an untaxed period for a vehicle 

*So that* the motor tax of the vehicle is up to date

*Background:*

* All vehicle owners are legally required to have motor tax on their vehicle if it is being driven on a public road.
* Motor tax should be paid when due, but if the motor tax lapses on a vehicle for more than a month, the owner of the vehicle will be liable to pay arrears.
* An arrears period can only exist if there is a full month's gap between the expiry date of the previous tax period and the beginning of the current month.
* Arrears are charged based on the number of months of arrears due, multiplied by the monthly arrears fee. 
* The arrears monthly fee usually works out at one-tenth the value of the annual motor tax rate for the vehicle.
* Arrears are calculated using data stored in the MOTOR_TAX_RATES table.
* There are no fees associated with Gaps.

This user story will focus on the _front end_ changes to the “Process Motor Tax” screen to implement the functionality behind the “Remove” button in the “Untaxed Period” section of the screen. 

The agreed wireframe design is included below:

!image-20250303-123746.png|width=702,height=1007,alt=""image-20250303-123746.png""!

If there are gaps or arrears for the vehicle, the “Untaxed Period” section will be visible and populated on the screen. The “Untaxed Period” section of the screen will be dynamically displayed only when there are gaps and / or arrears to display.   

Any gaps or arrears will be displayed in tabular format, as per the wireframe included above. 

Each row in the table will have a “Remove” hyperlink on the right hand side. When the “Remove” button us selected, the associated untaxed period (i.e. the Gap or Arrear) is removed from the table. Once the Gap or Arrears is removed from the table, there is still a requirement for the user to explain the untaxed period. A new row is automatically added to the table showing the start and end dates of the untaxed period that still needs to be explained. So, if the Arrear was removed from the screen above, the untaxed period data would be displayed as follows: 

!image-20250303-180729.png|width=745,height=1059,alt=""image-20250303-180729.png""!

The Type of this new row that is inserted in the table is “Remaining Untaxed Period”. The Start Date will be the start date of the untaxed period that remains. The End date will be the end date of the untaxed period that needs to be explained. There is no Reason Code and there is no Cost associated with this row. Finally, there is no “Remove” button associated with this row. 

When there are no arrears entries in the Untaxed Period table, the “Untaxed Period Due” cost will not be included in the “Transaction Summary” section of the screen. However, if an arrears entry is added, the “Untaxed Period Due” cost will be dynamically included in the “Transaction Summary” section of the screen and the value of the “Untaxed Period Due” will be included in the “Total” field. 

If the user hits the F5 key to refresh the screen at this point, the Untaxed Period row that was removed will _not_ be reloaded. The contents of the Untaxed Period table will remain as it was before the F5 key was pressed. However, if the user hits the browse back button, or if the user selects a breadcrumb to jump to a different screen, the contents of the Untaxed Period table will be discarded. 

If the user also removed the Gap from the screen above, the untaxed period data would be displayed as follows: 

!image-20250303-174928.png|width=764,height=1062,alt=""image-20250303-174928.png""!

We will never have an occasion where two “Remaining Untaxed Period” entries are adjacent to each other in the table. In the above instance, there two entries in the table will be rolled up into one “Remaining Untaxed Period” entry. 

If the user clicks on the “Continue” button at the bottom of the page and the full untaxed period has not been explained using a combination of gaps and arrears, a pop up message will be displayed on the screen saying “Cannot continue until all remaining untaxed periods are accounted for. Use the Add Action button to add a gap or an arrear.”

It is possible to have more than one “Remaining Untaxed Period” entry in the Untaxed Period table, but there will never be two “Remaining Untaxed Period” entries adjacent to each other. The scenario where more than one exists would be similar to the screenshot included below: 

!image-20250304-124535.png|width=672,height=1089,alt=""image-20250304-124535.png""!","*Scenario 1: Gaps and Arrears.* *Remove gaps and / or arrears*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*And* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see that gaps or arrears have been auto-generated

*Then* I can click on the “Remove” button alongside a gap or an arrear 

*And* I can see that the selected gap or arrear has been removed from the table





*And* I can see that the start date for the new gap or arrear is auto-populated and un-editable

*And* I can see that the end date for the gap or arrear is auto-populated and editable

*And* I can see that the arrears fee (where applicable) is populated correctly 

*And* I can see that the gap reason code (where applicable) is defaulted to “Gap Previous Owner” and that it can be updated

*And* I can proceed to tax the vehicle and clear the untaxed period. "
Story,MCR-265,20107,Find a garage - Create the advance garage search screen,Medium,QA Finished,03/04/2025 16:55,MTO Sprint 8,"*As* internal staff

*I need to* be able to search for a garage using a variety of different search criteria 

*So that* I can view the details of the associated garage 

The Garage Code is a unique identifier that allows us to identify a specific garage. If the Garage Code is not available (which is very rare), the MTO cashier will need to use other criteria to search for the garage.

This user story will focus purely on delivering the _front end_ for the Advanced Garage Search screen. None of the actual functionality to make the screen work (i.e. the screen logic and validation) will be delivered as a result of this user story; that will be delivered as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-26|https://digitalhubjira.atlassian.net/browse/MCR-26|smart-link]. 

Adding the “Advanced Garage Search” hyperlink to the Front Office menu will also form part of this user story.

It does not make any sense to include “Garage Code” as one of the search criteria here, as the user would have used that on the previous screen if it was available. This screen is only ever used when the Garage Code is unknown. The majority of times, the garage owner will know their Garage Code, so this screen will only be used in exceptional circumstances.  

The following fields are required as the advanced search criteria: 

* Garage Name
* Trade Plate Number
* Town
* County
* VAT Number

Garage Name and Trade Plate Number are two of the most commonly used fields when carrying out an advanced search, so these two fields should be included at the top of the search criteria list. 

The County field will be a dropdown list box. The user will be able to select the required county from the dropdown list box - they will not key in the county. 

The County field will default to the county associated with the user’s MTO, but the user is allowed to select an alternative county if they wish.  

The maximum lengths of these fields will be confirmed according to the size of the corresponding field in the database. 

The breadcrumbs are important on this screen as they provide the only route back to the previous screen.

The following buttons will be required: 

* The user will click on the “Search” button to initiate the search. The logic required to validate the data and search for the Garage in the database will be carried out as part of [https://digitalhubjira.atlassian.net/browse/MCR-26|https://digitalhubjira.atlassian.net/browse/MCR-26|smart-link]. 
* There will be a ""Clear"" button to reset the search criteria if the MTO agent wishes to restart their search using different search criteria. 

!image-20250306-172128.png|width=819,height=544,alt=""image-20250306-172128.png""!



The legacy screen for advanced garage search is as follows: 

!image-20250217-102833.png|width=342,height=257,alt=""image-20250217-102833.png""!

There are a few fields on the legacy system advanced search screen that will *not* be required in the new system, e.g. Company Reg Number and RSI Number. 

The legacy system has a “Create” button. An equivalent “Create” button will *not* be required in the new system as the MTOs are not responsible for creating garages. This is carried out centrally in Shannon. ","*Scenario 1: Search for a vehicle*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Garage Search link

*Then* I can search for a garage by a variety of different search criteria, as per the screen design "
Story,MCR-25,18408,Find a garage - Search for a garage using garage code - part 1,Medium,QA Finished,22/05/2025 16:20,MTO Sprint 8,"*As* internal staff

*I need to* be able to search for a garage using the garage code

*So that* I can view the details of the associated garage

The garage code is a unique identifier that allows us to identify a specific garage. 

We have been told that 99% of garage owners know their garage number, so this garage code search option is predominantly used. The Advanced Search screen for garages will still be required, but will be delivered via a different user story - [https://digitalhubjira.atlassian.net/browse/MCR-26|https://digitalhubjira.atlassian.net/browse/MCR-26|smart-link]. 

This user story will deliver the updates required to the Front Office screen to include the Find Garage functionality. This includes the Garage Code field and the Search button. 

The Garage Code is made up of numeric characters only. 

If the user keys any non-numeric characters in the Garage Code field the field will immediately turn red and an error message will be displayed telling the user that non-numeric characters are not allowed in the garage code field. The message “Garage Code is a numeric field” will be displayed at the top of the screen and the Garage Code field will be highlighted in red.  

If the user doesn’t enter a Garage Code and then clicks the Search button, the system will display an error message telling the user that Garage Code is a required field. The message “Garage code is a required field” will be displayed at the top of the screen and the Garage Code field will be highlighted in red.  

Clicking into the Garage Code text box will automatically clear the contents of the Vehicle Registration Number text box, and vice versa. 

Max length of the Garage Code field is 6 digits. The system will not allow the user to key in more than six digits. 

{color:#ff5630}-This user story will also include the call to the back end to check if the Garage Code can be found.- {color}



The user will provide the relevant Garage Code via the text box on the Front Office screen: 

!image-20250207-165739.png|width=630,height=498,alt=""image-20250207-165739.png""!

The garage search screen in the legacy system is as follows:

!image-20241010-143139.png|width=341,height=256,alt=""image-20241010-143139.png""!","*Scenario 1: Search for a garage*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a _valid_ Garage Code

*And* I click Search

*Then* field validation is carried out



*Scenario 2: Search for a garage. Validations. Mandatory field.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I do not enter a Garage Code

*And* I click Search

*Then* I see the following message at the top of the screen : “Garage Code is a required field”

*And* the Garage Code field is highlighted in Red.



*Scenario 3: Search for a garage. Validations. Invalid characters.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter an _invalid_ Garage Code, including non-numeric characters

*Then* I immediately see the Garage field is highlighted in red

*And* I see the following message at the top of the screen : “Garage Code is a numeric field”"
Story,MCR-432,20834,Adapt motor tax class screen to wireframe. Heights not matching,Medium,QA Finished,23/04/2025 08:29,MTO Sprint 7,"We need review all pages to match the design with the figma: [DOT - MTO – Figma|https://www.figma.com/design/8I3Ct53ns9S9ZyoI8JvyvO/DOT---MTO?node-id=0-1&p=f&t=8XLfiZxCMkyYL4Ld-0]

For example:

Vehicle Header needs to be 19px for both label and data

Height between title and content is too much (needs to be reduced)

height between fields seems to be not matching with wireframe



!image-20250312-141923.png|width=512,height=516,alt=""image-20250312-141923.png""!",
Story,MCR-412,20740,Tax a vehicle. Gaps and Arrears. Arrears Only,Medium,QA Finished,06/04/2025 20:15,MTO Sprint 7,"*As* internal staff

*I need to* be able to display gaps and arrears associated with an untaxed period for a vehicle 

*So that* the motor tax of the vehicle is up to date

*Background:*

* All vehicle owners are legally required to have motor tax on their vehicle if it is being driven on a public road.
* Motor tax should be paid when due, but if the motor tax lapses on a vehicle for more than a month, the owner of the vehicle will be liable to pay arrears.
* An arrears period can only exist if there is a full month's gap between the expiry date of the previous tax period and the beginning of the current month.
* Arrears are charged based on the number of months of arrears due, multiplied by the monthly arrears fee. 
* The arrears monthly fee usually works out at one-tenth the value of the annual motor tax rate for the vehicle.
* Arrears are calculated using data stored in the MOTOR_TAX_RATES table.
* There are no fees associated with Gaps.

This user story will focus on the _front end_ changes to the “Process Motor Tax” screen to to implement the functionality behind the “Untaxed Period Only Transaction” checkbox in the “Untaxed Period” section of the screen. 

The agreed wireframe design is included below:

!image-20250303-123746.png|width=702,height=1007,alt=""image-20250303-123746.png""!

The screen clearly displays the details associated with any Untaxed Period, displaying the appropriate gaps and arrears. 

The vehicle owner may wish to only clear the untaxed period, without renewing the tax for the vehicle. This may be the case when the current owner wants to clear the arrears on the vehicle before selling it. It could also be the case that the Tax Class of the vehicle is changing and that the owner wishes to clear the arrears on the vehicle before updating the Tax Class and processing a tax renewal. 

Processing the arrears only will be achieved by clicking on the “Untaxed Period Only Transaction” check box in the “Untaxed Period” section of the screen. 

Clicking the check box will result in the New Motor Tax Details section of the screen dynamically being removed. Any references to the taxing period will also be dynamically removed from the Transaction Summary section of the screen. 

The Transaction Summary section will dynamically include any arrears due. The Total field within the Transaction Summary section will equal the arrears due figure.

When the “Untaxed Period Only Transaction” check box is clicked, the screen will dynamically look like this: 

!image-20250303-182049.png|width=736,height=849,alt=""image-20250303-182049.png""!","*Scenario 1: Gaps and Arrears.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify I can see a record at the untaxed periods, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see any gaps or arrears have been auto-generated

*And* I can see that the start dates and the end dates of each gap and / or arrear is correct

*And* I can see that the full untaxed period has been accounted for 

*And* I can see that the arrears fee (where applicable) is populated correctly 

*And* I can see that the gap reason code (where applicable) is as expected

*And* I click on the “Untaxed Period Only Transaction” check box

*And* the “New Motor Tax Details” section of the screen is dynamically hidden

  

*Scenario 2: Gaps and Arrears. Tax expiring current / previous month*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expiring current or previous month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify that there is no untaxed period displayed"
Story,MCR-368,20527,Tax a vehicle. Untax period. Gaps and Arrears. Check if Gaps or Arrears Exist,Medium,QA Finished,09/06/2025 09:17,MTO Sprint 7,"*As* internal staff,
*I need to* check if gaps or arrears exist for a vehicle,
*So that* they can be included as part of taxing a vehicle.

*Background:*

* All vehicle owners are legally required to have motor tax on their vehicle if it is being driven on a public road.
* Motor tax should be paid when due, but if the motor tax lapses on a vehicle for more than a month, the owner of the vehicle will be liable to pay arrears.
* An arrears period can only exist if there is a full month's gap between the expiry date of the previous tax period and the beginning of the current month.
* Arrears are charged based on the number of months the vehicle was untaxed. The arrears monthly fee usually works out at one-tenth the value of the annual motor tax rate for the vehicle.
* Arrears are calculated using data stored in the MOTOR_TAX_RATES table.
* The vehicle owner will be liable for any arrears they have accumulated. However, there are scenarios where arrears accumulated on the vehicle before the current vehicle owner purchased it. A vehicle owner cannot be liable for any arrears that accumulated on the vehicle before they bought it. This is where gaps come into play. A gap is a period where the vehicle was not taxed, but the current owner is not liable to pay arrears.

*Notes:*

* Changes to the ""Process Motor Tax"" screen are needed to account for gaps and arrears, but this user story will only focus on the _backend_ changes required to check if gaps and/or arrears are due before loading the ""Process Motor Tax"" screen.
* The functionality delivered by this user story will be called when the user chooses to tax a vehicle. 
* Before loading the ""Process Motor Tax"" screen, we will check the database for the selected vehicle and determine if gaps or arrears exist. 
* The gaps and arrears data identified as part of this user story will be passed forward into the ""Process Motor Tax"" screen and consumed by user story [https://digitalhubjira.atlassian.net/browse/MCR-38|https://digitalhubjira.atlassian.net/browse/MCR-38|smart-link].
* There are scenarios where a combination of gaps and arrears need to be cleared before taxing a vehicle. 
* The attached process flow explains the high-level steps involved in identifying gaps and arrears.
* This user story will determine if an untaxed period exists, and within that period, what time can be seen as gaps and what time can be seen as arrears.

*Validation:*

* If the vehicle is currently taxed or if a SORD (Statutory Off Road Declaration) exists for the vehicle, gaps or arrears cannot exist as they would have been dealt with during previous taxing/off-road declaration.
* If the most recent tax or SORD expired less than a month ago, gaps or arrears cannot exist.
* If there is at least one full month's gap between the expiry date of the previous tax period (or SORD) and the beginning of the current month, then gaps and/or arrears exist and must be dealt with.

*Key Information:*

* The Date of Sale is crucial in determining whether a gap or an arrear is used to clear an untaxed period.
* If no Date of Sale exists, and the vehicle has never been taxed or declared off road, we must refer to the registration date of the vehicle.
* Another crucial date is the Date Exported, which can be used to determine whether or not the vehicle was out of the country during the untaxed period. 

*Gaps and Arrears Logic:*

* Identify the Date of Sale (if one exists).
* Identify the Date Exported (if one exists).
* Calculate start date and end date associated with the untaxed period:
** Start Date:
*** Always the first day of a month
*** not less than first of month following expiry of last motor tax or SORD
**** If the vehicle was never sold, taxed or declared off road, the Start Date will be the Registrations Date.
*** not more than first day of the month prior to the current month
** End Date:
*** Always the last day of a month
*** not less than start date
*** not more than last day of the month prior to the current month
* Determine how the untaxed period is to be divided:
** If a Date of Sale exists, and it falls within the untaxed period, determine how much is to be gapped and how much is to be recorded as arrears.
*** If the current vehicle owner is a garage / motor dealer, use a gap to explain the untaxed period.
**** Any untaxed period relating to the months prior to the month of the Date of Sale must be processed as a gap.
***** Gap type: “Gap Previous Owner” ({{GAP PAST OWNER UNLICENSED}})
**** Any untaxed period relating to the month of the Date of Sale up to the month prior to today must be processed as a separate gap.
***** Gap type: “Gap Motor Dealer”
*** If the current vehicle owner is not a garage / motor dealer
**** Any untaxed period relating to the months prior to the month of the Date of Sale must be processed as a gap.
***** Gap type: “Gap Previous Owner” ({{GAP PAST OWNER UNLICENSED}})
**** Any untaxed period from the month of the Date of Sale to the end of the month prior to the current month must be processed as arrears.
** If no Date of Sale exists, or if Date of Sale predates the start of the untaxed period, check if the vehicle was exported during the untaxed period.
*** If the vehicle was exported, the date the vehicle was exported will be available on the system. 
**** This can be used to determine the start date for the export.
**** The start date for the export will be the first day of the month following the Date Exported. 
**** The MTO cashier should manually confirm the date the vehicle was brought back into the country, i.e. the end date for the export.
***** We can default the end date for the export to be the last day of the month prior to the current month.
**** If the vehicle was exported during the untaxed period, raise a gap for the time the vehicle was out of country.
***** Gap type: “Gap Exported”
*** There may still be arrears due on the vehicle if the export gap does not fully cover the untaxed period.
**** Any untaxed period from the month of the end date for the export to the end of the month prior to the current month must be processed as arrears.
** If no Date of Sale exists and the vehicle was not exported
*** The full untaxed period must be recorded as arrears.

*Outcome:* Once all of the gaps and arrears have been identified, launch the ""Process Motor Tax"" screen and display the data to the user.

*Examples:*

# No arrears
## Vehicle tax expired 31/12/2024.
## Owner renews motor tax on 20/01/2025.
## No arrears are due.
## New tax disc starts from 01/01/2025.
# Arrears
## Vehicle tax expired 31/12/2024.
## Owner renews motor tax on 22/02/2025.
## Arrears are due for January 2025.
## New tax disc starts from 01/02/2025.
# Gaps
## Vehicle tax expired 30/09/2024.
## Vehicle sold on 13/02/2025.
## Owner renews motor tax on 22/02/2025.
## ""Gap Previous Owner"" created for 01/10/2024 to 31/01/2025. ({{GAP PAST OWNER UNLICENSED}})
## No arrears are due.
## New tax disc starts from 01/02/2025.
# Gaps & Arrears
## Vehicle tax expired 30/09/2024.
## Vehicle sold on 19/12/2024.
## Owner renews motor tax on 22/02/2025.
## ""Gap Previous Owner"" created for 01/10/2024 to 30/11/2024.({{GAP PAST OWNER UNLICENSED}})
## Arrears due for 01/12/2024 to 31/01/2025.
## New tax disc starts from 01/02/2025.
# Complex scenario
## Newly registered vehicle 20/01/2023.
## Vehicle never taxed.
## Vehicle exported 04/04/2023.
## Vehicle returned to Ireland 12/12/2024.
## Owner renews motor tax on 22/02/2025.
## Untaxed Period is 01/01/2023 to 31/01/2025.
## Arrears due for two periods: 
### 01/01/2023 to 30/04/2023
### 01/12/2024 to 31/01/2025
## “Gap Exported” created for 01/05/2023 to 30/11/2024.
## New tax disc starts from 01/02/2025.



!image-20250303-123746.png|width=702,height=1007,alt=""image-20250303-123746.png""!","*Scenario 1: Check if Gaps or Arrears Exist*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and motor tax expired at least 2 months ago

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* the system identifies the Untaxed Period

*And* the Start Date of the Untaxed Period is the first day of the month following the expiry of the previous tax disc

*And* the End Date of the Untaxed Period is the last day of the month prior to the current month

*And* Gaps and Arrears are determined for the full Untaxed Period

*And* I am redirected to the Process Motor Tax screen



*Scenario 2: Check if Gaps or Arrears Exist. Tax expiring current / previous month:*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and motor tax expiring current month or previous month

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* the system does not identify an Untaxed Period

*And* I am redirected to the Process Motor Tax screen



*Scenario 3: Check if Gaps or Arrears Exist. Newly Registered Vehicle - Never Taxed.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and no motor tax date and no SORD date and Registration Date at least two months ago

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* the system identifies the Untaxed Period

*And* the Start Date of the Untaxed Period is the first day of the month of vehicle registration

*And* the End Date of the Untaxed Period is the last day of the month prior to the current month

*And* Gaps and Arrears are determined for the full Untaxed Period

*And* I am redirected to the Process Motor Tax screen



*Scenario 4: Check if Gaps or Arrears Exist. CVO Exists.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and tax expired at least two months ago and CVO within the Untaxed Period

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* the system identifies the Untaxed Period

*And* the Start Date of the Untaxed Period is the first day of the month following the expiry of the previous tax disc

*And* the End Date of the Untaxed Period is the last day of the month prior to the current month

*And* a Gap Previous Owner is identified for the Untaxed Period before the CVO ({{GAP PAST OWNER UNLICENSED}})

*And* an Arrear is identified for the Untaxed Period following the CVO 

*And* I am redirected to the Process Motor Tax screen



*Scenario 5: Check if Gaps or Arrears Exist. Vehicle Exported.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and vehicle tax had expired before the vehicle was subsequently exported and then returned to the country

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* the system identifies the Untaxed Period

*And* the Start Date of the Untaxed Period is the first day of the month following the expiry of the previous tax disc

*And* the End Date of the Untaxed Period is the last day of the month prior to the current month

*And* an Arrear is identified for the untaxed period before the vehicle was exported

*And* a Gap Exported is identified for the Untaxed Period from the month following the month of export onwards

*And* I am redirected to the Process Motor Tax screen"
Story,MCR-293,20274,"Declare a vehicle as off the road (SORD) - Screen to confirm motor tax renewal transaction - ""Finish"" pop up",Medium,QA Finished,21/05/2025 15:40,MTO Sprint 7,"*As* internal staff

*I need to* be able to finish the SORD transaction 

*So that* I can return to the Front Office screen  

This user story will focus on delivering the _front end_ screen for the modal that pops up when the user asks to print the receipt at the end of a SORD transaction. [https://digitalhubjira.atlassian.net/browse/MCR-292|https://digitalhubjira.atlassian.net/browse/MCR-292|smart-link] is very closely coupled with this user story. 

The user can select the “Print Receipt” button to leave the SORD transaction confirmation screen and print the receipt. 

When the user selects the “Print Receipt” button, the system will pop up a message box informing the user that the receipt is available to print via a separate tab on the browser. The only button available on this pop up message box will be the “Finish” button. When this button is selected, the user will be returned to the Front Office screen. 

!image-20250224-164550.png|width=1048,height=961,alt=""image-20250224-164550.png""!","*Scenario 1: Confirm SORD Complete*

*Given* I am logged in as a cashier

*When* I have processed a SORD transaction

*And* I confirm the transaction

*Then* I can see the Process SORD Complete screen 

*And* All of the correct details that are relevant to the SORD are displayed on the screen

*And* I select the “Print Receipt” button

*Then* I see the pop up message telling me that the receipt is available to be printed on a separate tab

*And* I click on “Finish”

*And* I am returned to the Front Office screen"
Story,MCR-38,18427,Tax a vehicle. Gaps and Arrears. Display Gaps and Arrears on Screen,Medium,QA Finished,06/04/2025 20:13,MTO Sprint 7,"*As* internal staff

*I need to* be able to display gaps and arrears associated with an untaxed period for a vehicle 

*So that* the motor tax of the vehicle is up to date

*Background:*

* All vehicle owners are legally required to have motor tax on their vehicle if it is being driven on a public road.
* Motor tax should be paid when due, but if the motor tax lapses on a vehicle for more than a month, the owner of the vehicle will be liable to pay arrears.
* An arrears period can only exist if there is a full month's gap between the expiry date of the previous tax period and the beginning of the current month.
* Arrears are charged based on the number of months of arrears due, multiplied by the monthly arrears fee. 
* The arrears monthly fee usually works out at one-tenth the value of the annual motor tax rate for the vehicle.
* Arrears are calculated using data stored in the MOTOR_TAX_RATES table.
* There are no fees associated with Gaps.

This user story will focus on the _front end_ changes to the “Process Motor Tax” screen that are required to display any gaps and arrears associated with the vehicle. 

The agreed wireframe design is included below:

!image-20250303-123746.png|width=702,height=1007,alt=""image-20250303-123746.png""!

The screen clearly displays the details associated with any Untaxed Period, displaying the appropriate gaps and arrears. 

The processing required to identify the gaps and arrears associated with a vehicle will be delivered separately in user story [https://digitalhubjira.atlassian.net/browse/MCR-368|https://digitalhubjira.atlassian.net/browse/MCR-368|smart-link]. The gaps and arrears data will be made available to the “Process Motor Tax” screen and will be used when dynamically populating the screen.  

The following points are relevant for adding the Untaxed Period section to the “Process Motor Tax” screen:

* If there are no gaps or arrears for the vehicle, the Untaxed Period section will not be visible on the screen. 
** The Untaxed Period section of the screen will be dynamically displayed only when there are gaps and / or arrears to display.   
** Gaps and arrears will be displayed in tabular format, as per the wireframe included above. 
*** When the screen initially loads, the gap and arrear details will be passed in to the screen, ready to be displayed. 
*** Gaps always have a Reason Code, but they do not have a Cost associated with them. 
*** Arrears do not have a Reason Code, but they always have a Cost associated with them. 
**** The cost may be €0.00, e.g. in the case where the vehicle is exempt. 
*** Each row in the table will have a “Remove” hyperlink on the right hand side. 
**** The functionality behind the “Remove” button will be dealt with as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-410|https://digitalhubjira.atlassian.net/browse/MCR-410|smart-link] 
** An “Add Action” button will be displayed to allow the user to add an untaxed period, if required. 
*** The functionality behind the “Add Action” button will be dealt with as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-411|https://digitalhubjira.atlassian.net/browse/MCR-411|smart-link] 
** The user may wish to only clear the untaxed period, without taxing the vehicle
*** This will be achieved by clicking on the “Untaxed Period Only Transaction” check box. 
*** The functionality behind the “Untaxed Period Only Transaction” check box will be dealt with as part of user story [https://digitalhubjira.atlassian.net/browse/MCR-412|https://digitalhubjira.atlassian.net/browse/MCR-412|smart-link]  
* The Transaction Summary section will dynamically include any arrears due
** If there are no arrears due, there will be no “Untaxed Payment Due” row displayed. 
** The Total field within the Transaction Summary section is calculated by adding the total arrears, i.e. the “Untaxed Payment Due” to the fee associated with the selected Taxing Period. 
* The Start Date associated with the Arrears or Gap will:
** always be the first day of a month.
** not be less than the first of the month following the expiry of the last motor tax or SORD.
** not be more than the first day of the previous month.
* The End Date associated with the Arrears or Gap will:
** always be the last day of a month.
** not be less than start date.
** not be more than the last day of the previous month.

 

The screen will clearly display a combination of gaps or arrears to account for any untaxed period. ","*Scenario 1: Gaps and Arrears.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expired at least 2 months ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify I can see a record of the untaxed period, with start date of first day of month following tax expiry and end date of last day of previous month

*And* I can see any gaps or arrears have been auto-generated

*And* I can see that the start dates and the end dates of each gap and / or arrear is correct

*And* I can see that the full untaxed period has been accounted for 

*And* I can see that the arrears fee (where applicable) is populated correctly 

*And* I can see that the gap reason code (where applicable) is as expected

*And* I can proceed to tax the vehicle and clear the untaxed period. 

  

*Scenario 2: Gaps and Arrears. Tax expiring current / previous month*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and vehicle licence expiring current or previous month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I verify that there is no untaxed period displayed

*And* I can proceed to tax the vehicle and clear the untaxed period. 



*Scenario 3: Check if Gaps or Arrears Exist. Newly Registered Vehicle - Never Taxed.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and no motor tax date and no SORD date and Registration Date at least two months ago

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I can see a record of the untaxed period, with start date of first day of month of vehicle registration and end date of last day of previous month

*And* I can see an arrears entry for the full Untaxed Period

*And* I can see that the start dates and the end dates for the arrear is correct

*And* I can see that the arrears fee is populated correctly 

*And* I can proceed to tax the vehicle and clear the untaxed period. 



*Scenario 4: Check if Gaps or Arrears Exist. CVO Exists.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and tax expired at least two months ago and CVO within the Untaxed Period

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I can see a record of the untaxed period, with start date of first day of the month following the expiry of the previous tax disc and end date of last day of the month prior to the current month

*And* I can see a Gap Previous Owner is identified for the Untaxed Period from first day of the month following the expiry of the previous tax disc to last day of month prior to the month of the date of sale

*And* an Arrear is identified for the Untaxed Period from the first day of the month of sale to the last day of the month prior to the current month

*And* I am redirected to the Process Motor Tax screen



*Scenario 5: Check if Gaps or Arrears Exist. Vehicle Exported.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and vehicle tax had expired before the vehicle was subsequently exported and then returned to the country

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I can see a record of the untaxed period, with start date of first day of the month following the expiry of the previous tax disc and end date of last day of the month prior to the current month

*And* an Arrear is identified for the untaxed period from first day of the month following the expiry of the previous tax disc to the last day of the month the vehicle was exported

*And* a Gap Exported is identified for the Untaxed Period from the month following the month of export to the last day of the month prior to the current month

*And* I am redirected to the Process Motor Tax screen"
Story,MCR-292,20273,Declare a vehicle as off the road (SORD) - Screen to confirm SORD transaction,Medium,QA Finished,21/05/2025 15:40,MTO Sprint 6,"*As* internal staff

*I need to* be able to see confirmation that the SORD transaction has successfully completed

*So that* I can confirm the details with the owner  

This user story will focus on delivering the _front end_ screen for confirming that the SORD transaction was successfully completed. The actual printing of the receipt will be addressed in a separate user story (  [https://digitalhubjira.atlassian.net/browse/MCR-276|https://digitalhubjira.atlassian.net/browse/MCR-276|smart-link])  

When a customer makes a payment for a SORD this screen will confirm that the transaction has completed successfully. This screen will display all of the details relevant to the SORD transaction. This screen will also give the user the opportunity to print a receipt for the vehicle owner. 

The details that will be displayed on the screen are as follows: 

* Transaction Number 
* Date and time 
* Motor Tax Office
* Vehicle Registration Number
* Vehicle Make / Model
* Received from (Name and address of Registered owner of Vehicle)
* Transaction Type (e.g. Off Road Declaration)
* Tax Class
* Start and End Date of SORD
* Transaction Amount

The transaction number will be a sequential number.

The following confirmation screen will be displayed: 

!image-20250224-164419.png|width=1054,height=972,alt=""image-20250224-164419.png""!

* The screen is very similar to that displayed as part of [https://digitalhubjira.atlassian.net/browse/MCR-210|https://digitalhubjira.atlassian.net/browse/MCR-210|smart-link] 



This screen is proof that the transaction has been completed successfully. 

The user can select the “Print Receipt” button to leave this screen and print the receipt. That functionality is covered by other user stories [https://digitalhubjira.atlassian.net/browse/MCR-293|https://digitalhubjira.atlassian.net/browse/MCR-293|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-276|https://digitalhubjira.atlassian.net/browse/MCR-276|smart-link].","*Scenario 1: Confirm Motor Tax Renewal Complete*

*Given* I am logged in as a cashier

*When* I have processed a SORD transaction

*And* I confirm the transaction

*Then* I can see the Process SORD Complete screen 

*And* All of the correct details that are relevant to the SORD are displayed on the screen"
Story,MCR-264,20106,Fix errors after putting everything together,Medium,QA Finished,24/03/2025 11:33,MTO Sprint 6,"!image-20250207-161847.png|width=1261,height=862,alt=""image-20250207-161847.png""!



!image-20250207-161914.png|width=1064,height=805,alt=""image-20250207-161914.png""!



!image-20250207-162133.png|width=977,height=862,alt=""image-20250207-162133.png""!



!image-20250207-162627.png|width=703,height=895,alt=""image-20250207-162627.png""!



Validate before going to SORD screen needs to happen

Show make/model

!image-20250210-120030.png|width=1004,height=745,alt=""image-20250210-120030.png""!

Change format for dates to use text (Example: 01/04/2025 => 01 Apr 2025)

Breadcrumbs are missing Vehicle

!image-20250210-152910.png|width=809,height=477,alt=""image-20250210-152910.png""!",
Story,MCR-263,20103,"Tax a vehicle. Screen to confirm motor tax renewal transaction - ""Finish"" pop up",Medium,QA Finished,21/05/2025 15:39,MTO Sprint 6,"*As* internal staff

*I need to* be able to finish the motor tax renewal transaction 

*So that* I can return to the Front Office screen  

This user story will focus on delivering the _front end_ screen for the modal that pops up when the user asks to print the receipt at the end of a motor tax renewal form. [https://digitalhubjira.atlassian.net/browse/MCR-210|https://digitalhubjira.atlassian.net/browse/MCR-210|smart-link] is very closely coupled with this user story. 

The user can select the “Print Receipt” button to leave the motor tax renewal transaction confirmation screen and print the receipt. 

When the user selects the “Print Receipt” button, the system will pop up a message box informing the user that the receipt is available to print via a separate tab on the browser. The only button available on this pop up message box will be the “Finish” button. When this button is selected, the user will be returned to the Front Office screen. 

!image-20250207-142133.png|width=793,height=732,alt=""image-20250207-142133.png""!","*Scenario 1: Confirm Motor Tax Renewal Complete*

*Given* I am logged in as a cashier

*When* I have processed a Motor Tax Renewal transaction

*And* I confirm the transaction

*Then* I can see the Process Motor Tax Transaction Complete screen 

*And* All of the correct details that are relevant to the Motor Tax Renewal are displayed on the screen

*And* I select the “Print Receipt” button

*Then* I see the pop up message telling me that the receipt is available to be printed on a separate tab

*And* I click on “Finish”

*And* I am returned to the Front Office screen"
Story,MCR-239,19857,Use Title Case for displaying vehicle data on screen,Medium,QA Finished,24/03/2025 11:33,MTO Sprint 6,"*As* internal staff

*I need to* be able to see the vehicle details displayed in Title Case

*So that* the details are easier to read

The current system displays all vehicle data in uppercase, as this is how the data is stored in the database. 

For this new system, we will display all vehicle data (apart from codes such as Chassis Number, Engine Number, etc.) in Title Case so that it is easier to read. Title Case will be the default display case that is used for all screens in the new application. 

This is a front end change only. ","*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I enter a valid vehicle registration number 

*And* I am redirected to the Vehicle Primary Details screen

*Then* I can see the vehicle details displayed in Title Case on the screen"
Story,MCR-210,19776,Tax a vehicle. Screen to confirm motor tax renewal transaction,Medium,QA Finished,23/04/2025 08:28,MTO Sprint 6,"*As* internal staff

*I need to* be able to see confirmation that the motor tax renewal transaction has successfully completed

*So that* I can confirm the details with the owner  

This user story will focus on delivering the _front end_ screen for confirming that the motor tax renewal transaction was successfully completed. The actual printing of the receipt will be addressed in a separate user story ([https://digitalhubjira.atlassian.net/browse/MCR-215|https://digitalhubjira.atlassian.net/browse/MCR-215|smart-link])  

When a customer makes a payment for a motor tax renewal this screen will confirm that the transaction has completed successfully. This screen will display all of the details relevant to the motor tax renewal transaction. This screen will also give the user the opportunity to print a receipt for the vehicle owner. 

The details that will be displayed on the screen are as follows: 

* Transaction Number 
* Date and time 
* Motor Tax Office
* Vehicle Registration Number
* Vehicle Make / Model
* Received from (Name and address of Registered owner of Vehicle)
* Transaction Type (e.g. Motor Tax Renewal)
* Tax Class
* Taxing Period
* Start and End Date of Motor Tax Renewal
* Transaction Amount

The transaction number will be a sequential number.

The following confirmation screen will be displayed: 

!image-20250207-092648.png|width=683,height=643,alt=""image-20250207-092648.png""!

This screen is proof that the transaction has been completed successfully. 

The user can select the “Print Receipt” button to leave this screen and print the receipt. That functionality is covered by user stories [https://digitalhubjira.atlassian.net/browse/MCR-263|https://digitalhubjira.atlassian.net/browse/MCR-263|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-215|https://digitalhubjira.atlassian.net/browse/MCR-215|smart-link].","*Scenario 1: Confirm Motor Tax Renewal Complete*

*Given* I am logged in as a cashier

*When* I have processed a Motor Tax Renewal transaction

*And* I confirm the transaction

*Then* I can see the Process Motor Tax Transaction Complete screen 

*And* All of the correct details that are relevant to the Motor Tax Renewal are displayed on the screen"
Story,MCR-209,19775,Tax a vehicle. Display the process payment screen,Medium,QA Finished,29/05/2025 11:39,MTO Sprint 6,"*As* internal staff

*I need to* be able to process a payment for a vehicle licence transactions 

*So that* the vehicle licence transaction can be completed

This user story will deal with delivering the _front end_ functionality for processing a payment. The payment screen will be displayed when the user selects the “Continue” button on the Process Motor Tax screen. 

This will be the first iteration of processing a payment for a licence renewal transaction. The screen will be capable of taking payment for a single transaction. The payment to be processed will be provided to this screen from the Process Motor Tax screen. 

The Transaction summary section of the screen will describe the transaction for which the payment is being taken. 

As part of taking payment, the MTO agent must be able to record one or more payment types and the associated payment amounts. The payment types can be cash, card, postal order, cheque. The user must select the appropriate payment type and enter the amount. If more than one payment type is used to settle the transaction, the user must click on the “Add Payment” button to capture additional payment types and amounts. 

If an additional payment is added by mistake, the user can select the “Remove” hyperlink alongside the payment to remove the payment from the transaction. 

The values entered in the Payment Amount field cannot be negative. 

* If the user enters a negative payment amount, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Payment Amount cannot be a negative value”.

In the Payment Summary section at the bottom of the screen, 

* The Method field will be displayed as a drop down list box with the values “Counter” or “Postal”. The default value when the screen is displayed will be “Counter”. When the Method is “Counter”, no supporting data is required. However, when the Method is “Postal”, we will also need to capture the Postal Receipt Date in the format DD/MM/YYYY.
** If the user selects a Method of “Postal”, the screen will dynamically update to display the required “Postal Receipt Date”. 
*** There will be three buttons to the right of the Postal Receipt Date to make it easier for the user to update the field
**** The Date Picker icon, which will allow the user to select a date using a date picking function. 
**** The “Today” button will update the Postal Receipt Date to be today’s date. 
**** The “Clear” button will clear the contents of the Postal Receipt Date field. 
*** The user will be able to key in the Postal Receipt Date. 
**** If they key in two digits for DD, the cursor will automatically jump to MM.
**** If they key in two digits for MM, the cursor will automatically jump to YYYY.
*** The postal Receipt Date must be validated to ensure that it is a well formed / valid date that is not in the future. 
** If the user selects a Method of “Postal”, and they do not provide a Postal Receipt Date, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Postal Receipt Date is a required field”.  
** If the user selects a Method of “Postal”, and they provide a Postal Receipt Date in the future, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Postal Receipt Date cannot be in the future”.  
** If the user selects a Method of “Postal”, and they provide an invalid Postal Receipt Date, a pop up error message will be displayed when the user clicks on the “Process” button. The error message will state “Invalid Postal Receipt Date”.  
** If the user selects a Method of “Postal”, and the screen dynamically updates to display the required “Postal Receipt Date”, and if the user then changes the Method back to “Counter”, the screen will dynamically update to hide the Postal Receipt Date.
* The Payment Total field will display the total payment due for the transaction. 
* The Payment Amount field will display the total value of payments already entered by the user. 
* The Payment Remaining field will display the outstanding balance required to settle the transaction. 

These payments must be recorded against the relevant licence renewal transaction. The payment details will be written to the database and will be available to form part of payment reports made available to the MTO agent and the MTO supervisor. 

When the payment details have been completed, and the user selects the “Process” button, the system will issue a paperless tax disc and give the user the option to print a receipt. The printing of the receipt, etc. will be dealt with in the separate user story [https://digitalhubjira.atlassian.net/browse/MCR-210|https://digitalhubjira.atlassian.net/browse/MCR-210|smart-link]  

If the user selects the “Process” button and insufficient payment has been entered, the system will pop up an error message saying “Insufficient funds have been provided”. The user will have to click the “OK” button to acknowledge the error message. 

If the user selects the “Process” button and the payment amount entered by the user exceeds the payment required, the system will populate the “Change Due” field within the Payment Summary section of the screen with the difference between the “Payment Total” and the “Payment Amount”. The “Change Due” field is for information purposes only, to allow the user to determine what change they need to give the vehicle owner. The overpayment should not be recorded against the transaction, as the user will give the vehicle owner their change, based on the contents of the “Change Due” field. 

The “Change Due” field will be dynamically displayed - if there is no change due to the vehicle owner, the field will not be displayed. If there is change due to the vehicle owner, the field will be displayed. 

If the user selects the “Cancel” button, they will be returned to the Process Motor Tax screen and all payment information will be discarded.

There is *no* limit to the number of payments that can be added to the transaction. In reality, the vast majority of transactions will be paid for using a single payment type. 

There will be *no* restriction to prevent a user from creating multiple payments of the same type, e.g. two “Card” payments. 

If the user adds two or more payments with the same type, e.g. €50.00 Cash and €75.00 cash, we will *not* need to roll the Cash payment figure up, e.g. resulting in one Cash payment of €125.00. 

If the user chooses to refresh the screen, all of the data on the screen will be retained. 

The new Payment screen will look as follows: 

!image-20250206-125455.png|width=705,height=865,alt=""image-20250206-125455.png""!

If a second payment type is required the user will press the “Add Payment” button to allow the capture of an additional payment:

!image-20250306-111615.png|width=735,height=831,alt=""image-20250306-111615.png""!

If the “Postal” Method selected, a Postal Receipt Date must be captured: 

!image-20250130-105557.png|width=675,height=893,alt=""image-20250130-105557.png""!

The current payments screen is as follows:

!image-20241018-093216.png|width=340,height=256,alt=""image-20241018-093216.png""!","*Scenario 1: Process a payment*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I can provide the Method of payment details

*And* I can see the Transactions value and the Remainder value being automatically updated as each payment type is entered

*And* I can select the “Process” button to complete the payment transaction.



*Scenario 3: Process a payment. Validation. Negative payment.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I ensure that I enter a negative payment amount

*And* I provide the Method of payment details

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up error message displayed on the screen: “Payment Amount cannot be a negative value”.



*Scenario 3: Process a payment. Validation. Payment provided does not cover the cost of the transaction.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of payment details

*And* the total of the payments recorded does not cover the cost of the transaction

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Insufficient funds have been provided”. 



*Scenario 4: Process a payment. Validation. Payment provided exceeds the cost of the transaction.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of payment details

*And* the total of the payments recorded exceeds the cost of the transaction

*And* I can see that the “Change Due” field is populated with the difference between the “Payment Total” and the “Payment Amount” fields



*Scenario 5: Process a payment. Validation. Remove unwanted payment.*  

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I select the “Add Payment” button

*And* A second payment section is displayed to capture the additional payment type

*Then* I can select the “Remove” hyperlink to remove the second payment section. 



*Scenario 6: Process a payment. Validation. Postal Receipt Date.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I select one of the tax periods

*And* I can click on the Continue button to move on to the payments screen

*Then* I can capture details of the payment type(s) provided

*And* I capture details of the payment types provided

*And* I provide the Method of “Postal”

*And* I see the screen dynamically update to include a Postal Receipt Date field

*And* I do not provide a Postal Receipt Date

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Postal Receipt Date is a required field”

*And* I provide a Postal Receipt Date in the future

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Postal Receipt Date cannot be in the future”

*And* I provide an invalid Postal Receipt Date (e.g. MM = 13)

*And* I select the “Process” button to complete the payment transaction

*Then* I see the following pop up message displayed on the screen: “Invalid Postal Receipt Date”

*And* I click on the “Today” button 

*Then* the Postal Receipt Date is updated to today’s date

*And* I click on the “Clear” button

*Then* the Postal Receipt Date field is cleared 

*And* I enter two digits in the DD field of the Postal Receipt Date

*Then* the cursor automatically jumps to the MM field

*And* I enter two digits in the MM field of the Postal Receipt Date

*Then* the cursor automatically jumps to the YYYY field

*And* I enter four digits in the YYYY field of the Postal Receipt Date

*And* I provide the Method of “Counter”

*Then* I see the screen dynamically update to remove the Postal Receipt Date field

*And* I select the “Process” button to complete the payment transaction"
Story,MCR-206,19735,Tax a vehicle. Vehicle licence. Validations,Highest,QA Finished,13/05/2025 09:59,MTO Sprint 6,"*As* internal staff

*I need to* be able to tax a vehicle for any type of licence 

*So that* vehicle status is up to date and taxes paid when required



This user story will deal with implementing a series of validation checks before the vehicle licence screen is displayed. If any of these validations fail, an error message will pop up on the screen and the vehicle licence screen will not be displayed. All of these validation checks will take place in sequence once the user selects the “Tax vehicle” button on the Vehicle Primary Details screen. 

The following is a list of the validation checks that will be put in place: 

* Vehicle status is not Current
** If the status of the vehicle is not “Current” when the user selects the “Tax vehicle” button on the Vehicle Primary Details screen:
*** The following pop up error message will be displayed: ""Can only process licences for vehicles with a status of Current"" {color:#ff5630} {color}
* Licence pending:
** If the licence issue date is empty, but a licence number exists when the user selects the “Tax vehicle” button on the Vehicle Primary Details screen
*** The following pop up error message will be displayed: ""Cannot process this licence until the current licence has been issued"" 
*** This scenario is related to taxing a vehicle online, and then trying to tax it again in the MTO before the online tax disc is issued by Shannon. 
*** In this scenario, we believe that the Licence Status is “awaiting issue”. 
*** This check may be made redundant once we implement paperless discs, but we still need to build it in to ensure it doesn’t cause an issue.
* Not in the month of expiry of current licence
** If the current licence is not due to expire in the current month
*** The following pop up error message will be displayed: ""A new licence cannot be processed until the month the current licence expires"" 
** However, if tax has already expired, the vehicle can be taxed. 
** The restriction here is more to do with an owner trying to tax the vehicle several months in advance of expiry of current licence 



In all of the above validation scenarios, the pop up message box will have an “OK” button so the user can acknowledge the message. The user will remain on the Vehicle Primary Details screen. ","*Scenario 1: View licence screen. Not allowed. Vehicle status not ‘Current’*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status other than ‘Current’ (Code ‘C’), e.g. End of life = ‘L’, Exported = ‘E’, Scrapped/Destroyed = ‘D’, Inactive = ‘I’, Restricted = ‘R’, Exported VRT Refunded = ‘V’, Written off by Insurer = ‘W’

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*Then* I see the following pop up message on screen: ‘Can only process licences for vehicles with a status of Current’

 

*Scenario 2: View licence screen. Not allowed. Licence pending*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with new licence but no issue date

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*Then* I see the following pop up message on screen: ‘Cannot process this licence until the current licence has been issued’

 

*Scenario 3: View licence screen. Not allowed. Not in the month of expiry of current licence*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with licence not due to expire for several months

*And* I view the vehicle details on the Primary Details screen

*And* I click on “Tax Vehicle”

*Then* I see the following pop up message on screen: ‘A new licence cannot be processed until the month the current licence expires’"
Story,MCR-175,19634,Create screen to declare a vehicle as off the road (SORD),Medium,QA Finished,24/03/2025 11:33,MTO Sprint 6,"*As* internal staff

*I need to* be able to declare a vehicle as off the road

*So that* the vehicle owner will not be liable for motor tax for the agreed time period

This user story is only to deliver the _front end_ screen for declaring a vehicle as off the road. 

If a vehicle is not being used on the public road system, the owner is not liable to pay tax on the vehicle. In this scenario, the vehicle can be declared off the road. It is important to note that the vehicle must be declared off the road in advance - it cannot be retrospectively be declared off the road. At present, an off road declaration can be made for a minimum of three months and a maximum of twelve months. Discussions are ongoing regarding making off road declarations open ended. There is no fee for declaring a vehicle off the road. 

The start date for a SORD will always be the first of a month. The end date for a SORD will always be the last day of a month. 

There are some restrictions regarding declaring a vehicle off the road, e.g. a vehicle cannot be declared off the road if there are tax arrears associated with the vehicle, or if tax arrears have just been cleared. If tax arrears have just been cleared, the vehicle must be taxed for a minimum of three months before it can be declared off the road. 

The functionality to declare a vehicle off the road will be covered in separate user stories, e.g. [https://digitalhubjira.atlassian.net/browse/MCR-14|https://digitalhubjira.atlassian.net/browse/MCR-14|smart-link]. 

This screen will be launched via the “Declare Off Road” button at the bottom of the “Primary Details” vehicle page: 

!image-20250114-103037.png|width=101,height=41,alt=""image-20250114-103037.png""!

When the “Declare Off Road” button is selected, the SORD screen will launch. For the purposes of this user story, there will not be any validation carried out regarding whether or not the vehicle can be declared off the road at this time. 

_Within the Current Expiry Details section_: 

* The Expiry Date will be used to display either the current Motor Tax expiry date or the current SORD expiry date, as appropriate. 
** The field will be displayed in the format DD/MM/YYYY. 
** The field label will correctly display “Motor Tax Expiry Date” or “SORD Expiry Date”, as appropriate. 

_Within the SORD Details section_: 

* The Start Date / Start Month for the SORD will default to the first day of the next month. 
** For example, if today is 14th Jan, the first day of the next month will be 1st Feb. 
** The field will be displayed in the format MM/YYYY 
* The End Date / End Month for the SORD is the only data entry field available on this screen. 
** The End Date must be a min of 3 months after the Start Date and a max on 12 months after the Start Date. 
*** For example, if the Start Date is Feb 2025, the End Date must be between Apr 2025 and Jan 2026 (inclusive).
** The field will have the format MM/YYYY. 
** A date picker will be included, with all supporting validation to enforce valid dates / date formats. 
* The Total Fee will default to €0.00

_Within the Transaction Summary Section:_ 

* The Start Date will display the full start date for the SORD by default. 
** The field will be displayed in the format DD/MM/YYYY.
** For example, if the SORD is to start in Feb 2025, the Start Date here will display 01/02/2025
* The End Date will automatically display the full end date for the SORD, once the user has updated the End Date field above. 
** The field will be displayed in the format DD/MM/YYYY.
** For example, if the SORD is to end in Jun 2025, the End Date here will display 30/06/2025
* The “Confirm” button will be used to write the details of the SORD to the database and return the user to the previous screen. 
* The “Cancel” button will return the user to the previous screen, i.e. the “Primary Details” vehicle page, without saving any changes.

The screen will be delivered as per the wireframe defined in Figma:

!image-20250114-102927.png|width=1070,height=1018,alt=""image-20250114-102927.png""!

Current UX:

!image-20250109-202703.png|width=484,height=337,alt=""image-20250109-202703.png""!

!image-20250109-202717.png|width=497,height=352,alt=""image-20250109-202717.png""!

!image-20250109-202725.png|width=491,height=337,alt=""image-20250109-202725.png""!

!image-20250109-202739.png|width=479,height=327,alt=""image-20250109-202739.png""!","*Scenario 1: Declare a vehicle off the road. Licence expiring current month or current Off Road declaration expiring current month* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and licence expiring current month or off road declaration expiring current month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*Then* I am redirected to the off road declaration screen

*And* I verify start date is defaulted to current month and not editable

*And* I verify fee is €0.00 and not editable

*And* I enter a valid End Date to record an off road declaration

*And* I click on Confirm

*And* A new record is added to the table with description (Statutory off road declaration), start date and end date reflect the dates provided by user

*And* A receipt is printed for the vehicle owner, with a unique reference number.  <jira to be determined to issue stock>



*Scenario 2: Declare vehicle off the road. Validations. Mandatory fields:*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with ‘Current’ status and licence/SORD expiring current month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*And* I am redirected to the off road declaration screen

*And* I click on Confirm

*Then* I see following message on screen: ‘Mandatory field – Value must be entered’

*And* End date is highlighted in red

*And* I enter a valid end date

*And* I click on Confirm

*And* I verify I cannot see any messages on the screen

*And* A new record is added to the table with description (Statutory off road declaration), start date and end date reflect the dates provided by user



*Scenario 3: Declare vehicle off the road. Validations. End date:*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with ‘Current’ status and licence/SORD expiring current month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*And* I am redirected to the off road declaration screen

*And* I enter end date as the next month 

*And* I click on Confirm

*Then* I see following message on screen: ‘Minimum duration is 3 months’

*And* I enter end date as more than year in advance

*And* I click on Confirm

*Then* I see following message on screen: ‘Maximum duration is 12 months’

*And* I enter a valid end date

*And* I click on Confirm

*And* I verify I cannot see any messages on the screen

*And* A new record is added to the table with description (Statutory off road declaration), start date and end date reflect the dates provided by user"
Story,MCR-171,19630,Declare a vehicle as off the road (SORD) - Parameterise payment,Medium,QA Finished,13/03/2025 12:39,MTO Sprint 6,"*As* internal staff

*I need to* be able to declare a vehicle as off the road and charge an appropriate fee

*So that* the vehicle owner will not be liable for motor tax for the agreed time period

At present, there is no charge associated with a SORD, regardless of the duration that the vehicle is declared off road. 

The application logic will be developed to include a parameterised SORD Fee to allow for flexibility. 

The Fee will be set to €0 initially. Should the fee need to be adjusted, it will be possible to update the parameter and the new fee will be charged automatically. There should be no need for a code release to support the change in fee. 

Just a quick note - whatever we put in place here will need to be flexible enough so that it can be reused for other parameterised payments in the future. 

A receipt will need to be printed for the vehicle owner, with a unique reference number. This will be as part of a separate user story. ","*Scenario 1: Declare a vehicle off the road. Update SORD fee* 

*Given* I am login as cashier

*When* I update the parameterised fee associated with a SORD 

*And* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and licence expiring current month or off road declaration expiring current month

*And* I am redirected to the update vehicle details screen

*And* I click on Licence

*And* I click on ‘Stat ORD’ menu option / button

*Then* I am redirected to state off road declaration screen

*And* I verify that the fee displayed is the updated parameterised fee "
Story,MCR-168,19627,Declare a vehicle as off the road (SORD) - Newly registered vehicle,Medium,QA Finished,24/03/2025 11:33,MTO Sprint 6,"*As* internal staff

*I need to* be able to declare a newly registered vehicle as off the road

*So that* the vehicle owner will not be liable for motor tax for the agreed time period

This user story will focus on declaring a vehicle as off the road following a new vehicle registration.

Vehicles which are newly registered in the state must be presented for SORD within 21 days of the vehicle registration date. 

These vehicles will have a status of “Current”, will have no tax history and no previous SORD. 

We will compare the current date against the date of vehicle registration to determine if the owner is within 21 days of the registration date. It is important to remember that the date of registration is considered to be day 1 of the 21 days allowed. If the owner waits for more than 21 days, they will not be able to declare the vehicle as off the road - they’ll need to tax the vehicle. Tax will be due from the date that the vehicle was registered in the state. Depending on the date of registration, there could be arrears implications here too.

Processing of the registration of new / imported vehicles must be completed before a SORD can be processed; this is a paper exercise, not a system one. It is the responsibility of the user to ensure that all of the appropriate paperwork is in order. 

This type of SORD will have a SORD Start date of the 1^st^ of the month of the registration date. 

This 21 day period validation will be applied when the user selects the “Declare Off Road” button at the bottom of the “Primary Details” vehicle page.

* If the owner is within the 21 day period, they will be taken to the Declare Off Road screen.
* If the owner is trying to declare a vehicle off the road more than 21 days after the registration date of the vehicle, an error message will be displayed: “Vehicle cannot be declared off the road as vehicle registration date is more than 21 days ago. Vehicle must be taxed for a minimum period before an off road declaration can be made.”
** The error message will be displayed in a pop up format, with an OK button that the user can click to acknowledge the message.   ","*Scenario 1: Declare a newly registered vehicle off the road.*  

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number for a newly registered vehicle with status ‘Current’ 

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*And* the system confirms that no previous tax record or SORD record exists for the vehicle

*And* the system confirms that it is within 21 days since the vehicle was registered

*Then* I am redirected to off road declaration screen

*And* I verify start date is defaulted to the month of vehicle registration and not editable

*And* I verify that I can enter an end date between three and twelve months in the future

*And* I verify amount is €0.00 and not editable

*And* I click on Confirm

*And* A new record is added to the table with description (Statutory off road declaration), start date and end date reflect the dates provided by user

*And* User will need to proceed with payments fee is €0.00 <jira to be determined>

*And* A receipt is printed for the vehicle owner, with a unique reference number.  <jira to be determined to issue stock>





*Scenario 2: Declare a vehicle off the road. Validations. No tax record exists for vehicle. Vehicle was newly registered more than 21 days ago.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with current status, with no tax record, where the registration date was more than 21 days ago

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*Then* a message is displayed saying “Vehicle cannot be declared off the road as vehicle registration date is more than 21 days ago. Vehicle must be taxed for a minimum period before an off road declaration can be made.”"
Story,MCR-167,19626,Declare a vehicle as off the road (SORD) - Ensure SORD can be open ended,Medium,QA Finished,13/03/2025 12:39,MTO Sprint 6,"*As* internal staff

*I need to* be able to declare a vehicle as off the road without an end date

*So that* the vehicle owner will not have to keep renewing the off road declaration each year



At present, a SORD can only be created for a maximum period of one year. If a vehicle is off the road for an extended period of time, the owner must remember to complete a new SORD each year. 

The new solution that we are delivering needs to flexible, as the 12-month cap may be removed before we go live in production. There is currently legislation under review that will make SORDs open-ended. We need to consider this as part of our delivery, as the legislation is likely to be approved before we go live.

We need to have a parameter that allows us to enable or disable to use of the End Date when declaring a vehicle as off the road. 

If the new parameter is set and End Date is no longer required, it will be possible to save a SORD without actually providing an End Date. In this scenario, the SORD will be open ended and the vehicle will remain off road until the owner notifies the tax office that they want to bring the vehicle back on the road. 

If the parameter is set, the End Date will no longer form part of the SORD screen; the existing End Date fields in both the “SORD Details” section and the “Transaction Summary” section will be hidden. 

{color:#ff5630}TBC: {color}

* {color:#ff5630}We need to understand what we will actually do with the End Date from a database point of view if it is left blank by the user. {color}
** {color:#ff5630}Is it possible to save a SORD with a blank End Date or is there validation in place that prevents this? {color}
** {color:#ff5630}Should we default the end date to be some date in the distant future, e.g. 31/12/3000? Discuss approach with Hugh? {color}","*Scenario 1: Declare a vehicle off the road. End date not required.*  

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and licence expiring current month or off road declaration expiring current month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*Then* I am redirected to the off road declaration screen

*And* I verify start date is defaulted to next month and not editable

*And* I verify that the End Date is no longer a visible field on the screen

*And* I verify the fee is €0.00 and not editable

*And* I click on Confirm

*And* A new record is added to the table with description (Statutory off road declaration)

*And* A receipt is printed for the vehicle owner, with a unique reference number.  <jira to be determined to issue stock>"
Story,MCR-8,18357,Tax a vehicle. Vehicle licence. Display screen,Highest,QA Finished,06/06/2025 11:00,MTO Sprint 6,"*As* internal staff

*I need to* be able to licence a vehicle 

*So that* vehicle taxes are paid when required



This user story will deal with delivering the _front end_ screen for licencing a vehicle. The Process Motor Tax screen will be displayed when the user selects the “Tax vehicle” button on the Vehicle Primary Details screen. This “Tax Vehicle” button will also be implemented as part of delivering this user story. 

There will be several validations carried out before the Process Motor Tax screen is displayed. These validations will be dealt with as part of a separate user story ([https://digitalhubjira.atlassian.net/browse/MCR-206|https://digitalhubjira.atlassian.net/browse/MCR-206|smart-link])  

The legacy system has a slightly more complicated tax renewal screen than the one we will be building here. The legacy system deals with licence renewals, licence replacements and licence replacements free-in-lieu. However, because we are moving to paperless tax discs in Jan 2026, there will be no need to deliver functionality related to replacement tax discs or replacement free-in-lieu tax discs. The new screen will focus purely on licence renewals. 

In the vast majority of cases, this screen will allow the user to select one of three different periods for licencing the vehicle: quarterly, half year and annual. The licence period will not default to any one of the three options when the screen loads. The user will need to select the required licence period before they can move forward with the taxing process. 

The exception here is when a vehicle can _only_ be licenced annually, in this instance, the quarterly and half-yearly periods will not be available to be selected. The decision as to whether or not a vehicle must be taxed annually is based on the contents of the MOTOR_TAX_RATES table. For any vehicle type in the MOTOR_TAX_RATES table where the half yearly and quarterly values are zero, the vehicle must be taxed on an annual basis. If the vehicle can only be taxed on an annual basis, the quarterly and half-yearly renew options will not be displayed; only the annual option and it’s associated fee will be visible to the user. 

The total licence renewal payment due will depend on the length of the licence period selected, the assessment class and the tax assessment value, available from the MOTOR_TAX_RATES table. 

The user will only need to confirm the Tax Class and select the Taxing Period on this screen. 

Tax Class is being added to this screen as it is a logical attribute to have displayed when dealing with motor tax renewals. If the vehicle has never been taxed before, the Tax Class will not be populated and the user will be required to select the appropriate Tax Class for the vehicle before the vehicle can be taxed. Until a Tax Class is selected, the screen will be unable to display the cost associated with quarterly, half-yearly and annual tax renewal. Only when the Tax Class is populated will the associated costs be displayed. 

If a different Tax Class is selected for the vehicle by the user, the associated costs for quarterly, half-yearly and annual tax renewal will be updated accordingly. The new Tax Class selected by the user will be saved  against the vehicle as part of the taxing of the vehicle.

If the Tax Class is blank and the user does not select one from the drop down list box, an error message will be displayed at the top of the screen when the user selects the “Continue” button. The message will state “Motor tax class cannot be empty”. 

The Tax Class drop down list box will only display the valid Tax Classes that are relevant for the vehicle Body Type. This will ensure that the user cannot select an invalid Tax Class from the drop down list box. 

If the user does not select one of the available Taxing Periods, a pop up error message will be displayed when the user selects the “Continue” button. The message will state “Please select a Taxing Period”. 

The Licence Start Date will default based on the following logic: 

* First taxing of a vehicle - defaults to the first day of the month of date of registration, as long as the vehicle is being taxed in the month of registration.
** Otherwise, defaults to the start of the current month.
* Tax renewal in month of expiry - defaults to the first day of the next month, assuming that the current Motor Tax expires in the current month.
* Tax renewal in month following Tax expiry - defaults to the first day of the current month, assuming that the previous Motor Tax expired at the end of the previous month.
* Tax renewal with arrears - defaults to the first day of the current month
* Taxing following a CVO, tax already expired - defaults to the first day of the month of sale, as long as the vehicle is being taxed in the month of sale.
** Otherwise, defaults to the start of the current month.
* Taxing following a CVO, tax expiring in month of sale - defaults to the first day of the next month, as long as the vehicle is being taxed in the month of sale.
** Otherwise, defaults to the start of the current month.

The Transaction Summary details will automatically update based on the Taxing Period selected by the user. 

The “Continue” button will persist the user selections for Tax Class and Taxing Period and take the user forward to the payments screen. The payment processing for licencing a vehicle will be dealt with separately as part of another user story ([https://digitalhubjira.atlassian.net/browse/MCR-209|https://digitalhubjira.atlassian.net/browse/MCR-209|smart-link]). 

The “Add Vehicle” button will follow the same logic as the “Next” button in the current system; it will be delivered as part of a separate user story ([https://digitalhubjira.atlassian.net/browse/MCR-243|https://digitalhubjira.atlassian.net/browse/MCR-243|smart-link])

The “Cancel” button will abandon any changes and return the user to the Vehicle Primary Details screen. 

The wireframe for the screen looks as follows: 

!image-20250225-130604.png|width=963,height=498,alt=""image-20250225-130604.png""!

!image-20250130-104402.png|width=684,height=765,alt=""image-20250130-104402.png""!

In the scenario where the Tax Class has not yet been selected (i.e. a new vehicle registration) the screen will look as follows when it first loads: 

!image-20250130-104520.png|width=669,height=744,alt=""image-20250130-104520.png""!

Tax Class will be blank, and as a result, the Taxing Period values will be unavailable. 

In the situation where arrears exist, the value of the arrears due will be calculated based on the period that the vehicle was untaxed. This calculation will be based on the number of months since the last licence expiry date until the current month, multiplied by the arrears rate that is available from the MOTOR_TAX_RATES table. However, the screen delivered as part of this user story will _not_ deal with Arrears. The functionality required to process Arrears will be covered by a separate user story. 

*Initial layouts*

!image-20241007-152131.png|width=1009,height=719,alt=""image-20241007-152131.png""!

!image-20241007-152151.png|width=972,height=696,alt=""image-20241007-152151.png""!

!image-20241007-152239.png|width=1167,height=731,alt=""image-20241007-152239.png""!","*Scenario 1: View licence screen. Happy path*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*Then* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I verify I can see the 3 different types of tax periods (quarterly, half year and annual)

*And* I select one of the 3 different tax periods

*And* I verify I can see the correct Start Date and End Date

*And* I verify I can see the total to pay

*And* I can click on the Continue button to move on to the payments screen



*Scenario 2: View licence screen. Validation. No Tax Class*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number for a newly registered vehicle that has never been taxed

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I do *not* select a Tax Class for the vehicle from the drop down list box

*And* I verify that the three different Taxing Periods (quarterly, half year and annual) do not have a value associated with them

*And* I can click on the Continue button 

*Then* an error message will be displayed at the top of the screen stating: “Motor tax class cannot be empty”

*And* I click the “OK” button to acknowledge the error message

*And* I *do* select a Tax Class for the vehicle from the drop down list box

*And* I verify that the three different Taxing Periods (quarterly, half year and annual) do have a value associated with them

*And* I select one of the Taxing Periods

*Then* I can click on the Continue button to move on to the payments screen 



*Scenario 3: View licence screen. Validation. Annual Taxing Only Vehicle*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number for a vehicle that must be taxed annually, e.g. an Agricultural Tractor

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*Then* I verify that the only Taxing Period available for selection is Annual 

*And* I select the Annual Taxing Period

*Then* I can click on the Continue button to move on to the payments screen 



*Scenario 4: View licence screen. Validation. Only valid Tax Classes available to select*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number 

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I click the drop down list box for Tax Class 

*Then* I verify that the Tax Class options displayed in the drop down list box are valid / correct for the body type of the vehicle



*Scenario 5: View licence screen. Validation. No Taxing Period*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number

*And* I am redirected to the Vehicle Primary Details screen

*And* I click on ‘Tax Vehicle’ button

*And* I am redirected to the Process Motor Tax screen

*And* I verify I can see details of vehicle (vehicle registration number, make/model, tax expiry date of the vehicle)

*And* I verify I can see the three different Taxing Periods (quarterly, half year and annual), each with an associated fee

*And* I do *not* select one of the three different Taxing Periods

*And* I can click on the Continue button 

*Then* a pop up error message will be displayed stating: “Please select a Taxing Period”

*And* I click the “OK” button to acknowledge the error message

*And* I *do* select a Taxing Period for the vehicle

*Then* I can click on the Continue button to move on to the payments screen "
Story,MCR-136,19475,[Test only]. Implement breadcrumbs to allow user to retrace their steps through the system,Medium,QA Finished,24/03/2025 11:35,MTO Sprint 5,"*As a* MTO agent

*I need to* ensure that the system displays breadcrumbs at the top of the screen

*So that* I can retrace my steps through the system

Breadcrumbs are a useful feature that allows the user to quickly and easily retrace their steps when using a system. They appear at the top of the screen and the user may click on the hyperlinks to jump back one or more steps to a previous screen. 

We will implement breadcrumbs at the top of the MTO Client Replacement system, as follows: 

!image-20241216-120112.png|width=1168,height=136,alt=""image-20241216-120112.png""!



As part of our implementation, we must be able to follow the breadcrumbs back to the previous screens that we stepped through to get to the current point in the system. This includes being able to step back to a search results page. For example, if we do an advanced vehicle search that returns five entries on the Vehicle List page, and we select one of these entries to view the vehicle, we need to be able to step back to the Vehicle List page that displayed the five vehicles that satisfied the search criteria. The same five vehicles should still be visible on the Vehicle List screen; we do not want to have to re-enter the search criteria and re-run the search - the data should remain readily available through the breadcrumbs. ","*Scenario 1: Implement breadcrumbs to allow user to retrace their steps through the system*

*Given* I am logged in as an internal user

*When* I proceed through the system 

*Then* I see breadcrumbs displayed at the top of the screen, referencing the previous screens I have visited in order to get to the screen that I am currently on

*And* I can click on the breadcrumb hyperlinks to jump back to the associated the screen. "
Story,MCR-199,19716,Declare a vehicle as off the road (SORD) - Retrieve existing SORD details,Medium,QA Finished,12/02/2025 10:07,MTO Sprint 4,"*As* internal staff

*I need to* be able to declare a vehicle as off the road

*So that* the vehicle owner will not be liable for motor tax for the agreed time period



As part of declaring the vehicle off the road, we need to determine if a SORD already exists, and if so, what the expiry date of this SORD might be. There may be zero, one or more SORDs associated with a vehicle, but only one may be valid / current at any point in time. 

This user story will call an API to retrieve the most recent SORD associated with the vehicle. If a SORD exists for the vehicle, we will use the SORD expiry date when determining if the user can process a new SORD for the vehicle. 

This user story is tightly coupled with [https://digitalhubjira.atlassian.net/browse/MCR-14|https://digitalhubjira.atlassian.net/browse/MCR-14|smart-link] and [https://digitalhubjira.atlassian.net/browse/MCR-175|https://digitalhubjira.atlassian.net/browse/MCR-175|smart-link].  ","*Scenario 1: Declare a vehicle off the road. Retrieve existing SORD details* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I attempt to process a new SORD for a vehicle

*Then* I am required to retrieve the latest SORD associated with the vehicle 

*And* I can use the associated End Date to determine if creating a new SORD is allowed"
Story,MCR-158,19512,View Vehicle Details Screen - Primary Details Tab - Owner Details,Medium,QA Finished,06/06/2025 09:19,MTO Sprint 4,"*As* internal staff

*I need to* be able to view the Owner Details of the vehicle within the Primary Details tab of the view vehicle details screen 

*So that* I can clearly see the owner details of the associated vehicle

This user story will only focus on delivering the front end and backend functionality for the _Owner Details_ section of the  “Primary Details” tab within the View Vehicle Details screen. The skeleton of the front end will be delivered as part of [https://digitalhubjira.atlassian.net/browse/MCR-166|https://digitalhubjira.atlassian.net/browse/MCR-166|smart-link]. This user story will build upon the skeleton and overlay any additional functionality required for Owner Details.

The following points were agreed with the MTO representatives during our workshops:

* Owner details
** Only shows relevant details of the current owner.
** The Owner Details fields that should be displayed are called out in the screen design included below.
** Notification Start Date and Notification End Date belong under the Owner Details section.
** Date of Sale belongs with the owner, not with the vehicle.
** We require Address Line 1 and Address Line 2 to be displayed. 
** If available, we should also include email address. 
** Category of Owner field should be highlighted if the value is “Garage”, as this is important for the user to see / recognise. 
** The Sort field is purely a Dublin concept (related to Dublin 9, Dublin 2, etc.), but it is still required. 
** Holds VRC field, Holds Regbook field, Corresponds in Irish field and Owner Deceased field all need to be included on the screen, and they will have Yes / No values
*** Although Holds VRC field and Holds Regbook field should be mutually exclusive, there are some examples in the database currently where both are set to “Yes”. This is an error scenario, but it needs to be supported. 
* It will be possible to collapse / expand the Owner Details section within the “Primary Details” tab using the blue Show / Hide buttons to the right of the section header. 

This user story will ensure that the front end and back end function is in place to retrieve any owner details for the vehicle and present them to the Primary Details tab for display.

The screen design that will be delivered as part of this user story is as follows:

!image-20250110-194930.png|width=588,height=226,alt=""image-20250110-194930.png""!

Some additional point related to the design of the Owner Details section of this screen:

* Category of Owner field should be highlighted if the value is “Garage”, as this is important for the user to see / recognise.
** The text that will be displayed when the user hovers over the icon is as follows: “Vehicle is owned by a garage”.","*Scenario 1: View vehicle details*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number 

*And* I click Search

*And* I can see the Owner Details section of the “Primary Details” tab is populated with all of the relevant details associated with the vehicle.



*Scenario 2: View vehicle details.  Category of Owner*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number where the Category of Owner is “Garage”

*And* I click Search

*Then* I am redirected to the vehicle details screen 

*And* The Category of Owner details are included on the “Primary Details” tab, with an icon alongside the field to draw attention to the fact that the value is “Garage”

*And* when the user hovers over the icon, a message saying “Vehicle is owned by a garage” will be displayed



*Scenario 3: View vehicle details.  Show / Hide functionality*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number 

*And* I click Search

*Then* I am redirected to the vehicle details screen

*And* I can see the Owner Details section header within the “Primary Details” tab

*And* I can click on the Show / Hide hyperlink under the section header title

*And* the screen will dynamically Show / Hide the details associated with the Owner Details as appropriate."
Story,MCR-14,18376,Declare a vehicle as off the road (SORD) - Validations,Medium,QA Finished,13/05/2025 10:01,MTO Sprint 4,"*As* internal staff

*I need to* be able to declare a vehicle as off the road

*So that* the vehicle owner will not be liable for motor tax for the agreed time period

When a vehicle is not being driven on public roads, a vehicle owner is not liable for Motor Tax Licencing but is required to make a Statutory Off Road Declaration (SORD) *in advance*.

The MTO agent will be able to declare a vehicle as off the road by providing the associated start date and end date. 

Note: a SORD has both an End date and an Expiry date. For the purposes of this user story, we are focussing on the SORD *End* date. 

A SORD must have a start date of 1st of a month and an end date of the last day of a month.

At present, SORDs are issued in increments of months, the minimum period being three months, the maximum being twelve months.

This user story will implement the following restrictions / validations: 

* A SORD is *not* permitted where a vehicle has been scrapped, end of life vehicle (ELV), permanently exported (exported, VRT refunded), inactive, written off by an insurer or stolen and not recovered, i.e. only a vehicle with a status of current can qualify for a SORD.
** This validation will be applied when the user selects the “Declare Off Road” button at the bottom of the “Primary Details” vehicle page. 
** If the owner is trying to declare a vehicle off the road after it has been Scrapped, ELV, etc., an error message will be displayed: “Vehicle cannot be declared off the road due to the status of the vehicle not being Current.”.
*** The error message will be displayed in a pop up format, with an OK button that the user can click to acknowledge the message. 
* The vehicle owner can only declare the vehicle as off the road if it is within the last month of their current tax disc or within the last month of their current SORD (i.e. SORD End Date). 
** This validation will be applied when the user selects the “Declare Off Road” button at the bottom of the “Primary Details” vehicle page. 
** If the vehicle is not within the last month of their current tax disc or within the last month of their current SORD, an error message will be displayed: “Vehicle cannot be declared off the road at this time - current Tax / SORD is not due to expire this month.”. 
*** The error message will be displayed in a pop up format, with an OK button that the user can click to acknowledge the message, e.g.: 

!image-20250117-093756.png|width=443,height=243,alt=""image-20250117-093756.png""!

* A SORD cannot be made retrospectively, i.e. after the expiry of motor tax, or after the expiry of an existing SORD.
** This validation will be applied when the user selects the “Declare Off Road” button at the bottom of the “Primary Details” vehicle page. 
** If the owner is trying to declare a vehicle off the road after the expiry of the existing motor tax or SORD, an error message will be displayed: “You cannot retrospectively declare a vehicle Off-Road. Vehicle must now be taxed for a minimum period before an off road declaration can be made.”. 
*** The error message will be displayed in a pop up format, with an OK button that the user can click to acknowledge the message



Current UX:

!image-20250109-202703.png|width=484,height=337,alt=""image-20250109-202703.png""!

!image-20250109-202717.png|width=497,height=352,alt=""image-20250109-202717.png""!

!image-20250109-202725.png|width=491,height=337,alt=""image-20250109-202725.png""!

!image-20250109-202739.png|width=479,height=327,alt=""image-20250109-202739.png""!","*Scenario 1: Declare a vehicle off the road. Licence expiring current month or current Off Road declaration expiring current month* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and licence expiring current month or off road declaration expiring current month

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*Then* I am redirected to the off road declaration screen

*And* I verify start date is defaulted to next month and not editable

*And* I verify amount is 0.00€ and not editable

*And* I provide a valid end date to record a period off road declaration

*And* Payments fee is defaulted to €0.00

*And* I click on Confirm

*And* A new record is added to the table with description (Statutory off road declaration), start date and end date reflect the dates provided by user

*And* A receipt is printed for the vehicle owner, with a unique reference number.  <jira to be determined to issue stock>



*Scenario 2: Declare a vehicle off the road. Active off road declaration doesn’t expire for another two months*.

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I enter a valid vehicle registration number with status ‘Current’ and SORD expiring in two months time

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*Then* a pop-up message is displayed saying “Vehicle cannot be declared off the road at this time - current Tax / SORD is not due to expire this month.”



*Scenario 3: Go to vehicle off the road. Licence expired and no active off road declaration*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Current’ and vehicle licence expired previous month and there is no active off road declaration

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button

*And* a pop-up message is displayed saying: ‘You cannot retrospectively declare a vehicle Off-Road. Vehicle must now be taxed for a minimum period before an off road declaration can be made.”



*Scenario 4: Go to vehicle off the road. Vehicle status is Scrapped*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I go to front office menu

*And* I select Vehicle menu option

*And* I select a valid vehicle registration number with status ‘Scrapped’ 

*And* I am redirected to the vehicle details screen

*And* I click on ‘Declare Off Road’ button 

*Then* a pop-up message is displayed saying “Vehicle cannot be declared off the road due to the status of the vehicle not being Current.”"
Story,MCR-166,19624,Create the View Vehicle Details screen - Primary Details Tab,Medium,QA Finished,06/06/2025 09:19,MTO Sprint 3,"*As* internal staff

*I need to* be able to view the vehicle details of the vehicle within the Primary Details tab of the view vehicle details screen  

*So that* I can clearly see the vehicle details of the associated vehicle

This user story will only focus on delivering the skeleton _front end_ for the “Primary Details” tab within the View Vehicle Details screen. The screen is a view only screen - the functionality required to populate the screen will be delivered as part of separate user stories. 

The view vehicle screen will display all of the key vehicle data as per the agreed “Primary Details” tab of the View Vehicle Details screen design. Because there is a wealth of data associated with each vehicle, it will not be possible to display everything on a single screen. As a result, the “Primary Details” tab on the View Vehicle Details screen will display the most commonly used fields for the MTO agents to view. From this screen, the MTO agent will be able to click on buttons, tabs, etc. to view additional vehicle data such as vehicle owner details, vehicle weight details, vehicle engine details, etc. All of the additional functionality associated with these additional buttons and tabs, as well as the displaying of the Active Alerts and Owner Details, will be delivered using separate user stories as part of future sprints. 

Ultimately, we will display three separate sections in the “Primary Details” tab of the view vehicle details display screen: 

* Active Alerts
* Vehicle Details
* Owner Details

This user story will only deal with delivering the actual skeleton of the front end screen. There are three separate user stories associated with the front end and back end requirements for each of the three sections of the Primary Details tab: 

* [https://digitalhubjira.atlassian.net/browse/MCR-157|https://digitalhubjira.atlassian.net/browse/MCR-157|smart-link] 
* [https://digitalhubjira.atlassian.net/browse/MCR-11|https://digitalhubjira.atlassian.net/browse/MCR-11|smart-link] 
* [https://digitalhubjira.atlassian.net/browse/MCR-158|https://digitalhubjira.atlassian.net/browse/MCR-158|smart-link] 

The *full* screen design that was agreed with the MTO representatives is as follows: 

!image-20250110-161104.png|width=729,height=939,alt=""image-20250110-161104.png""!



The *skeleton* screen design that will be delivered as part of *this* user story will be as follows: 

!image-20250110-161459.png|width=729,height=939,alt=""image-20250110-161459.png""!

It will be the responsibility of the three supporting user stories called out above to populate the actual contents of the screen once the skeleton has been put in place. 

The “Back” button will be used to return to the previous screen, be that the advanced search results screen or the front office menu screen, as appropriate.  ","*Scenario 1: View vehicle details*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number 

*And* I click Search

*Then* I can see the skeleton of the “Primary Details” tab within the “Main Details” tab of the Vehicle Page "
Story,MCR-157,19511,View Vehicle Details Screen - Primary Details Tab - Active Alerts,Medium,QA Finished,06/06/2025 09:19,MTO Sprint 3,"*As* internal staff

*I need to* be able to view the Active Alerts associated with the selected vehicle within the “Primary Details” tab of the view vehicle details screen 

*So that* I can clearly see the Active Alerts of the associated vehicle

This user story will focus on delivering the front end and backend functionality for _Active Alerts_ associated with the “Primary Details” tab within the View Vehicle Details screen.  The skeleton of the front end screen will be delivered as part of [https://digitalhubjira.atlassian.net/browse/MCR-166|https://digitalhubjira.atlassian.net/browse/MCR-166|smart-link]. This user story will build upon the skeleton and overlay any additional functionality required for Active Alerts.

The following points were agreed with the MTO representatives during our workshops:

* Active alerts (if they exist)
** We will ensure that any active alerts are displayed above the Vehicle Details and Owner Details sections of the screen.
*** Note: there could be 0, 1 or more active alerts associated with a vehicle at any one time.
**** The MTO representatives spoke of seeing vehicles with four active alerts. 
** For any active alerts, the Active Alert Status will be highlighted in Red. 
** If there are no Active Alerts, we will not display an Active Alerts section on the screen.
** The number of Active Alerts will always be displayed at the top of the screen. 
*** This figure will be highlighted in Red if there are Active Alerts associated with the vehicle. 
** The user must select the Alerts tab to view all alerts associated with the vehicle (to be delivered separately. 
* It will be possible to collapse / expand the Active Alerts section within the “Primary Details” tab using the blue Show / Hide buttons to the right of the section header.

This user story will ensure that the front end and back end function is in place to retrieve any active alerts for the vehicle and present them to the Primary Details tab for display.  

The screen design that will be delivered as part of this user story are as follows: 

!image-20250110-164448.png|width=808,height=462,alt=""image-20250110-164448.png""!

Some additional point related to the design of the Active Alerts section of this screen: 

* It will be possible to collapse / expand the Active Alerts sections of the screen using the blue Show / Hide button displayed under the section header. 
* We must ensure that any active alerts are displayed above the Vehicle Details and Owner Details sections of the screen.
* There could be 0, 1 or more active alerts associated with a vehicle at any one time; (the MTO representatives spoke of seeing vehicles with four active alerts).
** If any active alerts exist, the Active Alert Status field will be highlighted in Red. 
*** The Status field is not a database field - it will be generated by the code behind the screen if an active alert is found to be associated with the vehicle. 
* If there are no Active Alerts, we will *not* display an Active Alerts section on the screen.
** This includes the Active Alert section header. 
* The number of Active Alerts will always be displayed at the top of the screen, below the “Make/Model” of the vehicle.
* This figure will be highlighted in Red if there are Active Alerts associated with the vehicle.
* If there are no active alerts associated with the vehicle, the figure will be zero and will not be highlighted in red. ","*Scenario 1: View alert details.  Active Alerts exist*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number where there are active alerts 

*And* I click Search

*Then* I am redirected to the vehicle details screen 

*And* The Active Alerts section is visible

*And* I can see all of the Active Alerts associated with the vehicle

*And* the Active Alert Status field is highlighted in red

*And* the Active Alerts count figure below the “Make/Model” field displays the correct number of active alerts

*And* the Active Alerts count figure below the “Make/Model” field is highlighted in red



*Scenario 1: View alert details.  Active Alerts do not exist*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number where there are active alerts 

*And* I click Search

*Then* I am redirected to the vehicle details screen 

*And* The Active Alerts section is not visible

*And* the Active Alerts count figure below the “Make/Model” field contains a value of “0”, i.e. zero



*Scenario 3: View vehicle details.  Show / Hide functionality*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number where there are Active Alerts

*And* I click Search

*Then* I am redirected to the vehicle details screen 

*And* I can see the Active Alerts section header within the “Primary Details” tab

*And* I can click on the Show / Hide hyperlink under the section header title

*And* the screen will dynamically Show / Hide the details associated with the Active Alerts as appropriate."
Story,MCR-11,18365,View Vehicle Details screen - Primary Details Tab - Vehicle Details,Medium,QA Finished,25/06/2025 17:47,MTO Sprint 3,"*As* internal staff

*I need to* be able to view the vehicle details of the vehicle within the Primary Details tab of the view vehicle details screen  

*So that* I can clearly see the vehicle details of the associated vehicle

This user story will only focus on delivering the front end and backend functionality for _Vehicle Details_ associated with the “Primary Details” tab within the View Vehicle Details screen. The skeleton of the front end screen will be delivered as part of [https://digitalhubjira.atlassian.net/browse/MCR-166|https://digitalhubjira.atlassian.net/browse/MCR-166|smart-link]. This user story will build upon the skeleton and overlay any additional functionality required for Vehicle Details.

The following points were agreed with the MTO representatives during our workshops:

* Vehicle details:
** Tax Expiry date is key, and should be highlighted if the tax expiry date is in the past.
** The Vehicle details fields that should be displayed are called out in the screen design included below. 
** Tax Class, Body Type, Assessment Class and Basis of Assessment are all closely coupled and should be grouped together on the screen.
* It will be possible to collapse / expand the Vehicle Details section within the “Primary Details” tab using the blue Show / Hide buttons to the right of the section header. 

This user story will ensure that the front end and back end function is in place to retrieve the vehicle details for the vehicle and present them to the Primary Details tab for display. 

The screen design that will be delivered as part of this user story is as follows: 

!image-20250110-194146.png|width=577,height=259,alt=""image-20250110-194146.png""!

Some additional point related to the design of the Vehicle Details section of this screen: 

* Tax Expiry date should be highlighted if the tax expiry date is in the past, as this is important for the user to see / recognise. 
** The text that will be displayed when the user hovers over the icon is as follows: “Motor tax has expired for this vehicle”.","*Scenario 1: View vehicle details*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number 

*And* I click Search

*And* I can see the Vehicle Details section of the “Primary Details” tab is populated with all of the relevant details associated with the vehicle 



*Scenario 2: View vehicle details.  Expired Motor Tax*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number where the motor tax / off road declaration has expired

*And* I click Search

*Then* I am redirected to the vehicle details screen 

*And* The Tax Expiry details are included on the “Primary Details” tab, with an icon alongside the field to draw attention to the fact that the motor tax / off road declaration has expired

*And* when the user hovers over the icon, a message saying “Motor tax has expired for this vehicle” will be displayed



*Scenario 3: View vehicle details.  Show / Hide functionality*

*Given* I am login as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I enter a valid vehicle registration number 

*And* I click Search

*Then* I am redirected to the vehicle details screen

*And* I can see the Vehicle Details section header within the “Primary Details” tab

*And* I can click on the Show / Hide hyperlink under the section header title

*And* the screen will dynamically Show / Hide the details associated with the Vehicle Details as appropriate."
Story,MCR-4,18321,Display vehicle search results,Medium,QA Finished,21/03/2025 12:31,MTO Sprint 3,"*As* internal staff

*I need to* be able to view a list of vehicles that satisfy the search criteria provided  

*So that* I can select the required vehicle 

If there is more than one vehicle that satisfies the vehicle search criteria provided, a list of the vehicles that matched the search criteria is displayed. They MTO agent can select the required vehicle from the list displayed.  

The search results are not well sorted in the legacy system (they’re sorted by Vehicle Registration Number) and it can be difficult to find the vehicle the user is interested in. 

By default, the search results on the new system will be sorted by vehicle registration date descending, and then by vehicle registration number ascending. This should ensure that the most recently registered vehicles will be displayed first. To ensure full visibility, the Vehicle Registration Date will be displayed on the right hand side of the screen.  

The Vehicle Registration Number will be the first column on the left hand side of the screen. Also included will be the Make, Model, Owner Name, Town, County and Registration Date. This should be sufficient for the user to determine which vehicle they are looking for. 

The tabular screen design agreed with the MTO representatives is as follows: 

!image-20241216-102907.png|width=1174,height=928,alt=""image-20241216-102907.png""!

Pagination will be present on the screen. The default number of rows displayed in the search results table will be 10 rows per page. The user will be able to use “Previous” and “Next” pagination keys, as appropriate. 

If the contents of a field in the table exceeds the space available, the user will see three dots at the end of the displayed text (“…”), as per the screen design above. The user will be able to hover over the field and the full details of the field will be displayed. 

{color:#ff5630}NOTE: Breadcrumbs functionality has not yet been delivered; this will be delivered as part of a separate user story in a future sprint. {color}

If the user sees the record they are looking for, they may click on the corresponding “View” hyperlink on the right hand side of the screen to select the vehicle and move to the “View Vehicle Details” screen. 

However, if the user is still unsure which vehicle they are looking for, they can return to the Advanced Search screen using the breadcrumbs hyperlinks and update the search criteria. 

If possible, we would like to be able to click on the Vehicle Registration Number to select the vehicle as well as being able to click on the “View” hyperlink on the right hand side of the table.  ","*Scenario 1: Display vehicle search results*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter one or more valid search criteria 

*And* I click Search

*And* I am redirected to the vehicle list screen

*Then* I can view a list of the vehicles that satisfy the search criteria provided

*And* the search results are sorted by Registration Date descending and by Vehicle Registration Number Ascending



*Scenario 2: Display vehicle search results. Pagination. All vehicles that satisfy the search criteria are provided.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter one or more valid search criteria 

*And* I click Search

*And* I am redirected to the vehicle list screen

*And* I can view a list of the vehicles that satisfy the search criteria provided.

*Then* I can scroll through the list of vehicles that satisfy the search criteria and I can use pagination to jump to the start / end of the list. 



*Scenario 3: Display vehicle search results. View selected vehicle.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter one or more valid search criteria 

*And* I click Search

*And* I am redirected to the vehicle list screen

*Then* I can view a list of the vehicles that satisfy the search criteria provided

*And* the search results are sorted by Registration Date descending and by Vehicle Registration Number Ascending

*And* I can select the “View” hyperlink on the right hand side of the screen to view the full vehicle details of the corresponding row

*Or* I can click on the Vehicle Registration Number to select the required vehicle 



*Scenario 4: Display vehicle search results. Text too long for field.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter one or more valid search criteria 

*And* I click Search

*And* I am redirected to the vehicle list screen

*Then* I can view a list of the vehicles that satisfy the search criteria provided

*And* the contents of a field in the table exceeds the space available

*And* the user will see three dots at the end of the displayed text (“…”)

*And* The user will be able to hover over the field and the full details of the field will be displayed.



*Scenario 5: Display vehicle search results. Return to Advanced Search.*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter one or more valid search criteria 

*And* I click Search

*And* I am redirected to the vehicle list screen

*Then* I can view a list of the vehicles that satisfy the search criteria provided

*And* I cannot see the vehicle I am looking for

*And* I can use the breadcrumbs at the top of the screen (or the Browser Back button) to return to the advanced search screen

*And* the same search criteria will still be present on the screen.



*Scenario 6: Display vehicle search results. Pagination*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter one or more valid search criteria that returns over 10 search results

*And* I click Search

*And* I am redirected to the vehicle list screen

*Then* I can view a list of the vehicles that satisfy the search criteria provided

*And* the pagination keys are enabled

*And* the user can use the pagination keys to see additional search criteria"
Story,MCR-3,18320,Search for a vehicle using advanced search criteria,Medium,QA Finished,24/03/2025 12:22,MTO Sprint 3,"*As* internal staff

*I need to* be able to search for a vehicle using a variety of different search criteria 

*So that* I can view the details of the associated vehicle

User story [https://digitalhubjira.atlassian.net/browse/MCR-117|https://digitalhubjira.atlassian.net/browse/MCR-117|smart-link] will deliver the Advanced Vehicle Search screen itself. This user story will focus on delivering the screen logic and validation associated with the screen. 

The Vehicle Registration Number is a unique identifier that allows us to identify a specific vehicle. If the Vehicle Registration Number is not available, the MTO client will need to use other details to search for the vehicle, e.g. Chassis number, Engine number, etc.

The most commonly user search fields are as follows: 

* Owner name
* Chassis 
* Engine Number

The owner name is currently one field for both forename and surname, separated by a comma. For the new system, the Forename and Surname will be two separate fields. 

The advance vehicle search screen will require the user to use at least three different search criteria. The one exception here is for Chassis Number - if the user enters a full 17 character Chassis Number, no other search criteria will be required. 

The following restrictions apply for the search criteria:

* Vehicle Registration Number
** A minimum of 3 characters must be entered for the Vehicle Reg Number field if the user wishes to use it as part of their search.
** should contain alpha numeric characters only. 
** must insist that the user enters at least one number and one letter if they wish to use the Vehicle Registration Number as part of their search
* Chassis Number
** A minimum of 6 characters must be entered for the Chassis Number field if the user wishes to use it as part of their search.
** should contain alpha numeric characters only. 
** should not contain the letter “i” or the letter “o”; this restriction was introduced by the motor industry to avoid confusion with the numbers “1” and “0”. 
* Engine Number
** should contain alpha numeric characters only. 
** must insist that the user enters a minimum of 4 characters if they wish to use the Engine Number as part of their search



Once the MTO agent has entered three different search criteria, they can select the ""Search"" button to find the list of vehicles that match the search criteria. If only one vehicle exists in the database, the details of the vehicle are displayed on the screen. If there are multiple vehicles that match the search criteria, the list of vehicles are displayed on the screen and the MTO agent can select the vehicle they are interested in from the list. 

{color:#ff991f}-With GDPR in mind, it has been agreed that we will limit the number of rows returned by any search on this screen. The number of rows may vary according to the role of the user and it must be configurable to allow us increase / decrease the number quickly and easily. Initially, a max limit of 20 search results will be returned for Cashiers, and a max limit of 50 will be returned for Supervisors. If the max allowed limit is exceeded as a result of the search criteria provided, no results are returned / displayed. Instead, an error message is displayed advising the user to be more specific with their search by adding further search parameters.-{color}

{color:#ff991f}-If no vehicle matches the search criteria provided, the system displays an error message that the requested vehicle could not be found.-{color}

{color:#ff991f}The GDPR / results returned restriction functionality has been moved out of this user story and in to user story {color}[https://digitalhubjira.atlassian.net/browse/MCR-148|https://digitalhubjira.atlassian.net/browse/MCR-148|smart-link]{color:#ff991f} {color}


There will also be a ""Clear"" button to reset the search criteria if the MTO agent wishes to restart their search using different search criteria. 

Following discussions with the MTO Supervisors, they confirmed that wildcard searches should be applied by default as part of the Advanced Search screen. They should be implied, i.e. the user should not have to input an asterisk “*”.

In the legacy system, including “Town” in a vehicle search appears to kill the system performance, causing the system to take a long time to return search results. For the new system, we need to ensure that the inclusion of “Town” does not have a detrimental impact on the time it takes to return the search results. 

Screen validation will be applied once the user clicks on the “Search” button. 

The agreed screen design for the Advanced Vehicle Search screen, as agreed during the MTO workshops, is as follows:   

!image-20241216-112014.png|width=1149,height=1084,alt=""image-20241216-112014.png""!

Any validation error messages will be displayed at the top of the screen and the associated field will be highlighted in red.","*Scenario 1: Search for a vehicle*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*Then* I can search for a vehicle using at least three search criteria 

*And* A list with vehicle founds will be displayed

*And* I can select any of the results

*And* I will be redirected to the vehicle details screen



*Scenario 2: Search for a vehicle. Validations. Not a valid set of search criteria.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter an _invalid_ set of search criteria

*And* I click Search

*Then* I see the following message on the screen : ‘Vehicle details not found’



*Scenario 3: Search for a vehicle. Validations. Mandatory field.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I do not enter any search criteria 

*And* I click Search

*Then* I see the following message on the screen : ‘Please enter a minimum of three search criteria’



*Scenario 4: Search for a vehicle. Validations. Missing Number / Letter.* 

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Vehicle Registration Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I enter a vehicle registration number that comprises of only letters _or_ only numbers

*And* I click Search

*Then* I see the following message on the screen : ‘Vehicle Registration Number must contain numbers and letters’



*Scenario 5: Search for a vehicle. Validation. Invalid letters in Chassis Number*

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Chassis Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter a chassis number, but I include the letter “i” or the letter “o” in the chassis number

*And* I click Search

*Then* a message will be displayed to the user saying “Invalid characters used in Chassis Number; letters i and o are not allowed”



*Scenario 6: Search for a vehicle. Performance. Include “Town” as part of the search criteria*

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I search using “Town” as one of the search criteria 

*Then* the search results are returned in a timely fashion - there is no negative impact on system performance. 



*Scenario 7: Search for a vehicle. Validations. Insufficient search criteria.* 

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select Advanced Search

*And* I only enter two search criteria 

*And* I click Search

*Then* I see the following message on the screen : ‘Please enter a minimum of three search criteria’



*Scenario 8: Search for a vehicle. Validation. Must provide at least 3 characters for Vehicle Registration Number*

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Vehicle Registration Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter 2 characters in the Vehicle Registration Number field as part of the three search criteria

*And* I click Search

*Then* a message will be displayed to the user saying “You must provide at least 3 characters in the Vehicle Registration Number”. 



*Scenario 9: Search for a vehicle. Validation. Must provide at least 6 characters for Chassis Number*

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Chassis Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter 4 characters for the Chassis Number field as part of the three search criteria

*And* I click Search

*Then* a message will be displayed to the user saying “You must provide at least 6 characters in the Chassis Number”. 



*Scenario 10: Search for a vehicle. Validation. Must provide at least 4 characters for Engine Number*

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Engine Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter 3 characters for the Engine Number field as part of the three search criteria 

*And* I click Search

*Then* a message will be displayed to the user saying “You must provide at least 4 characters in the Engine Number”. 



*Scenario 11: Search for a vehicle. Validation. User enters a full 17 digit Chassis Number*

_(Note: this validation scenario is only applied if the user enters 17 character in the Chassis Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter 17 characters in the Chassis Number field

*And* I do not provide any additional search criteria  

*And* I click Search

*Then* the system uses the 17 digit chassis number provided to complete the search 



*Scenario 12: Search for a vehicle. Validations. Invalid characters in Vehicle Registration Number.* 

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Vehicle Registration Number field)_

*Given* I am logged in as a cashier

*When* I land on the front office menu

*And* I enter an _invalid_ vehicle registration number, including non-alpha numeric characters

*And* I click Search

*Then* I see the following message on the screen : ‘Only alpha numeric characters allowed for Vehicle Registration Number’



*Scenario 13: Search for a vehicle. Validation. Invalid characters in Engine Number*

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Engine Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter an _invalid_ engine number, including non-alpha numeric characters

*And* I click Search

*Then* a message will be displayed to the user saying “Only alpha numeric characters allowed for Engine Number”



*Scenario 14: Search for a vehicle. Validation. Invalid letters in Chassis Number*

_(Note: this validation scenario is only applied if the user enters at least 1 character in the Chassis Number field)_

*Given* I am logged in as an internal user (cashier or supervisor)

*When* I land on the front office menu

*And* I select “Advance Vehicle Search” option

*And* I enter an _invalid_ chassis number, including non-alpha numeric characters

*And* I click Search

*Then* a message will be displayed to the user saying “Only alpha numeric characters allowed for Chassis Number”"
